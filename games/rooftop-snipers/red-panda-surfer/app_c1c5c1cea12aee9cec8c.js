webpackJsonp([0],[function(e,t,a){var o=a(2),r=a(23),n=a(12),i=a(13),s=a(19),l='prototype',d=function(e,t,a){var p=e&d.F,c=e&d.G,u=e&d.S,y=e&d.P,g=e&d.B,m=c?o:u?o[t]||(o[t]={}):(o[t]||{})[l],f=c?r:r[t]||(r[t]={}),h=f[l]||(f[l]={}),b,v,_,x;for(b in c&&(a=t),a)v=!p&&m&&void 0!==m[b],_=(v?m:a)[b],x=g&&v?s(_,o):y&&'function'==typeof _?s(Function.call,_):_,m&&i(m,b,_,e&d.U),f[b]!=_&&n(f,b,x),y&&h[b]!=_&&(h[b]=_)};o.core=r,d.F=1,d.G=2,d.S=4,d.P=8,d.B=16,d.W=32,d.U=64,d.R=128,e.exports=d},function(e,t,a){var o=a(4);e.exports=function(e){if(!o(e))throw TypeError(e+' is not an object!');return e}},function(e){var t=e.exports='undefined'!=typeof window&&window.Math==Math?window:'undefined'!=typeof self&&self.Math==Math?self:Function('return this')();'number'==typeof __g&&(__g=t)},function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e){e.exports=function(e){return'object'==typeof e?null!==e:'function'==typeof e}},function(e,t,a){var o=a(56)('wks'),r=a(35),n=a(2).Symbol,i='function'==typeof n,s=e.exports=function(e){return o[e]||(o[e]=i&&n[e]||(i?n:r)('Symbol.'+e))};s.store=o},function(e,t,a){e.exports=!a(3)(function(){return 7!=Object.defineProperty({},'a',{get:function(){return 7}}).a})},function(e,t,a){var o=a(1),r=a(99),n=a(24),i=Object.defineProperty;t.f=a(6)?Object.defineProperty:function(e,t,a){if(o(e),t=n(t,!0),o(a),r)try{return i(e,t,a)}catch(t){}if('get'in a||'set'in a)throw TypeError('Accessors not supported!');return'value'in a&&(e[t]=a.value),e}},function(e,t,a){var o=a(26),r=Math.min;e.exports=function(e){return 0<e?r(o(e),9007199254740991):0}},function(e,t,a){var o=a(25);e.exports=function(e){return Object(o(e))}},function(e){e.exports=function(e){if('function'!=typeof e)throw TypeError(e+' is not a function!');return e}},function(e){var t={}.hasOwnProperty;e.exports=function(e,a){return t.call(e,a)}},function(e,t,a){var o=a(7),r=a(34);e.exports=a(6)?function(e,t,a){return o.f(e,t,r(1,a))}:function(e,t,a){return e[t]=a,e}},function(e,t,a){var o=a(2),r=a(12),n=a(11),i=a(35)('src'),s='toString',l=Function[s],d=(''+l).split(s);a(23).inspectSource=function(e){return l.call(e)},(e.exports=function(e,t,a,s){var l='function'==typeof a;l&&(n(a,'name')||r(a,'name',t));e[t]===a||(l&&(n(a,i)||r(a,i,e[t]?''+e[t]:d.join(t+''))),e===o?e[t]=a:s?e[t]?e[t]=a:r(e,t,a):(delete e[t],r(e,t,a)))})(Function.prototype,s,function(){return'function'==typeof this&&this[i]||l.call(this)})},function(e,t,a){var o=a(0),r=a(3),n=a(25),i=/"/g,s=function(e,t,a,o){var r=n(e)+'',s='<'+t;return''!==a&&(s+=' '+a+'="'+(o+'').replace(i,'&quot;')+'"'),s+'>'+r+'</'+t+'>'};e.exports=function(e,t){var a={};a[e]=t(s),o(o.P+o.F*r(function(){var t=''[e]('"');return t!==t.toLowerCase()||3<t.split('"').length}),'String',a)}},function(e,t,a){var o=a(51),r=a(25);e.exports=function(e){return o(r(e))}},function(e,t,a){var o=a(52),r=a(34),n=a(15),i=a(24),s=a(11),l=a(99),d=Object.getOwnPropertyDescriptor;t.f=a(6)?d:function(e,t){if(e=n(e),t=i(t,!0),l)try{return d(e,t)}catch(t){}return s(e,t)?r(!o.f.call(e,t),e[t]):void 0}},function(e,t,a){var o=a(11),r=a(9),n=a(73)('IE_PROTO'),i=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),o(e,n)?e[n]:'function'==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?i:null}},function(e,t,a){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),a(405);var r=a(199),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t['default']=e,t}(r),i=a(490),s=o(i),l=a(492),d=o(l),p=a(493),c=o(p),u=a(55),y=o(u);t['default']=Object.assign({Game:s['default'],Util:y['default'],State:{Base:d['default']},Storage:c['default']},n)},function(e,t,a){var o=a(10);e.exports=function(e,t,a){return(o(e),void 0===t)?e:1===a?function(o){return e.call(t,o)}:2===a?function(o,a){return e.call(t,o,a)}:3===a?function(o,a,r){return e.call(t,o,a,r)}:function(){return e.apply(t,arguments)}}},function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e,t,a){'use strict';var o=a(3);e.exports=function(e,t){return!!e&&o(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,a){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0});var r=a(54),n=o(r),i=a(133),s=o(i),l=a(134),d=o(l),p=a(135),c=o(p),u=a(417),y=o(u),g=a(97),m=o(g);t['default']={Aligned:n['default'],Button:s['default'],Image:d['default'],Input:c['default'],Layout:y['default'],Text:m['default']}},function(e){var t=e.exports={version:'2.5.1'};'number'==typeof __e&&(__e=t)},function(e,t,a){var o=a(4);e.exports=function(e,t){if(!o(e))return e;var a,r;if(t&&'function'==typeof(a=e.toString)&&!o(r=a.call(e)))return r;if('function'==typeof(a=e.valueOf)&&!o(r=a.call(e)))return r;if(!t&&'function'==typeof(a=e.toString)&&!o(r=a.call(e)))return r;throw TypeError('Can\'t convert object to primitive value')}},function(e){e.exports=function(e){if(e==void 0)throw TypeError('Can\'t call method on  '+e);return e}},function(e){var t=Math.ceil,a=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?a:t)(e)}},function(e,t,a){var o=a(0),r=a(23),n=a(3);e.exports=function(e,t){var a=(r.Object||{})[e]||Object[e],i={};i[e]=t(a),o(o.S+o.F*n(function(){a(1)}),'Object',i)}},function(e,t,a){var o=a(19),r=a(51),n=a(9),i=a(8),s=a(90);e.exports=function(e,t){var a=1==e,l=4==e,d=6==e,p=t||s;return function(t,s,c){for(var u=n(t),y=r(u),g=o(s,c,3),m=i(y.length),f=0,h=a?p(t,m):2==e?p(t,0):void 0,b,v;m>f;f++)if((5==e||d||f in y)&&(b=y[f],v=g(b,f,u),e))if(a)h[f]=v;else if(v)switch(e){case 3:return!0;case 5:return b;case 6:return f;case 2:h.push(b);}else if(l)return!1;return d?-1:3==e||l?l:h}}},function(e,t,a){'use strict';if(a(6)){var o=a(36),r=a(2),n=a(3),i=a(0),s=a(66),l=a(96),d=a(19),p=a(42),c=a(34),u=a(12),y=a(44),g=a(26),m=a(8),f=a(125),h=a(38),b=a(24),v=a(11),_=a(53),x=a(4),S=a(9),T=a(87),E=a(39),C=a(17),k=a(40).f,I=a(89),P=a(35),O=a(5),w=a(28),A=a(57),R=a(64),L=a(92),D=a(48),N=a(61),M=a(41),U=a(91),B=a(115),V=a(7),j=a(16),F=V.f,z=j.f,G=r.RangeError,H=r.TypeError,K=r.Uint8Array,W='ArrayBuffer',Y='Shared'+W,J='BYTES_PER_ELEMENT',X='prototype',Z=Array[X],q=l.ArrayBuffer,$=l.DataView,Q=w(0),ee=w(2),te=w(3),ae=w(4),oe=w(5),re=w(6),ne=A(!0),ie=A(!1),se=L.values,le=L.keys,de=L.entries,pe=Z.lastIndexOf,ce=Z.reduce,ue=Z.reduceRight,ye=Z.join,ge=Z.sort,me=Z.slice,fe=Z.toString,he=Z.toLocaleString,be=O('iterator'),ve=O('toStringTag'),_e=P('typed_constructor'),xe=P('def_constructor'),Se=s.CONSTR,Te=s.TYPED,Ee=s.VIEW,Ce='Wrong length!',ke=w(1,function(e,t){return Ae(R(e,e[xe]),t)}),Ie=n(function(){return 1===new K(new Uint16Array([1]).buffer)[0]}),Pe=!!K&&!!K[X].set&&n(function(){new K(1).set({})}),Oe=function(e,t){var a=g(e);if(0>a||a%t)throw G('Wrong offset!');return a},we=function(e){if(x(e)&&Te in e)return e;throw H(e+' is not a typed array!')},Ae=function(e,t){if(!(x(e)&&_e in e))throw H('It is not a typed array constructor!');return new e(t)},Re=function(e,t){return Le(R(e,e[xe]),t)},Le=function(e,t){for(var a=0,o=t.length,r=Ae(e,o);o>a;)r[a]=t[a++];return r},De=function(e,t,a){F(e,t,{get:function(){return this._d[a]}})},Ne=function(e){var t=S(e),a=arguments.length,o=1<a?arguments[1]:void 0,r=o!==void 0,n=I(t),s,i,l,p,c,u;if(n!=void 0&&!T(n)){for(u=n.call(t),l=[],s=0;!(c=u.next()).done;s++)l.push(c.value);t=l}for(r&&2<a&&(o=d(o,arguments[2],2)),s=0,i=m(t.length),p=Ae(this,i);i>s;s++)p[s]=r?o(t[s],s):t[s];return p},Me=function(){for(var e=0,t=arguments.length,a=Ae(this,t);t>e;)a[e]=arguments[e++];return a},Ue=!!K&&n(function(){he.call(new K(1))}),Be=function(){return he.apply(Ue?me.call(we(this)):we(this),arguments)},Ve={copyWithin:function(e,t){return B.call(we(this),e,t,2<arguments.length?arguments[2]:void 0)},every:function(e){return ae(we(this),e,1<arguments.length?arguments[1]:void 0)},fill:function(){return U.apply(we(this),arguments)},filter:function(e){return Re(this,ee(we(this),e,1<arguments.length?arguments[1]:void 0))},find:function(e){return oe(we(this),e,1<arguments.length?arguments[1]:void 0)},findIndex:function(e){return re(we(this),e,1<arguments.length?arguments[1]:void 0)},forEach:function(e){Q(we(this),e,1<arguments.length?arguments[1]:void 0)},indexOf:function(e){return ie(we(this),e,1<arguments.length?arguments[1]:void 0)},includes:function(e){return ne(we(this),e,1<arguments.length?arguments[1]:void 0)},join:function(){return ye.apply(we(this),arguments)},lastIndexOf:function(){return pe.apply(we(this),arguments)},map:function(e){return ke(we(this),e,1<arguments.length?arguments[1]:void 0)},reduce:function(){return ce.apply(we(this),arguments)},reduceRight:function(){return ue.apply(we(this),arguments)},reverse:function(){for(var e=this,t=we(e).length,a=Math.floor(t/2),o=0,r;o<a;)r=e[o],e[o++]=e[--t],e[t]=r;return e},some:function(e){return te(we(this),e,1<arguments.length?arguments[1]:void 0)},sort:function(e){return ge.call(we(this),e)},subarray:function(e,t){var a=we(this),o=a.length,r=h(e,o);return new(R(a,a[xe]))(a.buffer,a.byteOffset+r*a.BYTES_PER_ELEMENT,m((t===void 0?o:h(t,o))-r))}},je=function(e,t){return Re(this,me.call(we(this),e,t))},Fe=function(e){we(this);var t=Oe(arguments[1],1),a=this.length,o=S(e),r=m(o.length),n=0;if(r+t>a)throw G(Ce);for(;n<r;)this[t+n]=o[n++]},ze={entries:function(){return de.call(we(this))},keys:function(){return le.call(we(this))},values:function(){return se.call(we(this))}},Ge=function(e,t){return x(e)&&e[Te]&&'symbol'!=typeof t&&t in e&&+t+''==t+''},He=function(e,t){return Ge(e,t=b(t,!0))?c(2,e[t]):z(e,t)},Ke=function(e,t,a){return Ge(e,t=b(t,!0))&&x(a)&&v(a,'value')&&!v(a,'get')&&!v(a,'set')&&!a.configurable&&(!v(a,'writable')||a.writable)&&(!v(a,'enumerable')||a.enumerable)?(e[t]=a.value,e):F(e,t,a)};Se||(j.f=He,V.f=Ke),i(i.S+i.F*!Se,'Object',{getOwnPropertyDescriptor:He,defineProperty:Ke}),n(function(){fe.call({})})&&(fe=he=function(){return ye.call(this)});var We=y({},Ve);y(We,ze),u(We,be,ze.values),y(We,{slice:je,set:Fe,constructor:function(){},toString:fe,toLocaleString:Be}),De(We,'buffer','b'),De(We,'byteOffset','o'),De(We,'byteLength','l'),De(We,'length','e'),F(We,ve,{get:function(){return this[Te]}}),e.exports=function(e,t,a,l){l=!!l;var d=e+(l?'Clamped':'')+'Array',c=r[d],y=c||{},g=c&&C(c),h=!c||!s.ABV,b={},v=c&&c[X],S=function(a,o){var r=a._d;return r.v['get'+e](o*t+r.o,Ie)},T=function(a,o,r){var n=a._d;l&&(r=0>(r=Math.round(r))?0:255<r?255:255&r),n.v['set'+e](o*t+n.o,r,Ie)},I=function(e,t){F(e,t,{get:function(){return S(this,t)},set:function(e){return T(this,t,e)},enumerable:!0})};h?(c=a(function(e,a,o,r){p(e,c,d,'_d');var n=0,i=0,s,l,y,g;if(!x(a))y=f(a),l=y*t,s=new q(l);else if(a instanceof q||(g=_(a))==W||g==Y){s=a,i=Oe(o,t);var h=a.byteLength;if(void 0===r){if(h%t)throw G(Ce);if(l=h-i,0>l)throw G(Ce)}else if(l=m(r)*t,l+i>h)throw G(Ce);y=l/t}else return Te in a?Le(c,a):Ne.call(c,a);for(u(e,'_d',{b:s,o:i,l:l,e:y,v:new $(s)});n<y;)I(e,n++)}),v=c[X]=E(We),u(v,'constructor',c)):(!n(function(){c(1)})||!n(function(){new c(-1)})||!N(function(e){new c,new c(null),new c(1.5),new c(e)},!0))&&(c=a(function(e,a,o,r){p(e,c,d);var n;return x(a)?a instanceof q||(n=_(a))==W||n==Y?void 0===r?void 0===o?new y(a):new y(a,Oe(o,t)):new y(a,Oe(o,t),r):Te in a?Le(c,a):Ne.call(c,a):new y(f(a))}),Q(g===Function.prototype?k(y):k(y).concat(k(g)),function(e){e in c||u(c,e,y[e])}),c[X]=v,!o&&(v.constructor=c));var P=v[be],O=!!P&&('values'==P.name||P.name==void 0),w=ze.values;u(c,_e,!0),u(v,Te,d),u(v,Ee,!0),u(v,xe,c),(l?new c(1)[ve]!=d:!(ve in v))&&F(v,ve,{get:function(){return d}}),b[d]=c,i(i.G+i.W+i.F*(c!=y),b),i(i.S,d,{BYTES_PER_ELEMENT:t}),i(i.S+i.F*n(function(){y.of.call(c,1)}),d,{from:Ne,of:Me}),J in v||u(v,J,t),i(i.P,d,Ve),M(d),i(i.P+i.F*Pe,d,{set:Fe}),i(i.P+i.F*!O,d,ze),o||v.toString==fe||(v.toString=fe),i(i.P+i.F*n(function(){new c(1).slice()}),d,{slice:je}),i(i.P+i.F*(n(function(){return[1,2].toLocaleString()!=new c([1,2]).toLocaleString()})||!n(function(){v.toLocaleString.call([1,2])})),d,{toLocaleString:Be}),D[d]=O?P:w,o||O||u(v,be,w)}}else e.exports=function(){}},function(e,t,a){var o=a(120),r=a(0),n=a(56)('metadata'),i=n.store||(n.store=new(a(123))),s=function(e,t,a){var r=i.get(e);if(!r){if(!a)return;i.set(e,r=new o)}var n=r.get(t);if(!n){if(!a)return;r.set(t,n=new o)}return n};e.exports={store:i,map:s,has:function(e,t,a){var o=s(t,a,!1);return o!==void 0&&o.has(e)},get:function(e,t,a){var o=s(t,a,!1);return o===void 0?void 0:o.get(e)},set:function(e,t,a,o){s(a,o,!0).set(e,t)},keys:function(e,t){var a=s(e,t,!1),o=[];return a&&a.forEach(function(e,t){o.push(t)}),o},key:function(e){return e===void 0||'symbol'==typeof e?e:e+''},exp:function(e){r(r.S,'Reflect',e)}}},function(e,t,a){var o=a(35)('meta'),r=a(4),n=a(11),i=a(7).f,s=0,l=Object.isExtensible||function(){return!0},d=!a(3)(function(){return l(Object.preventExtensions({}))}),p=function(e){i(e,o,{value:{i:'O'+ ++s,w:{}}})},c=e.exports={KEY:o,NEED:!1,fastKey:function(e,t){if(!r(e))return'symbol'==typeof e?e:('string'==typeof e?'S':'P')+e;if(!n(e,o)){if(!l(e))return'F';if(!t)return'E';p(e)}return e[o].i},getWeak:function(e,t){if(!n(e,o)){if(!l(e))return!0;if(!t)return!1;p(e)}return e[o].w},onFreeze:function(e){return d&&c.NEED&&l(e)&&!n(e,o)&&p(e),e}}},function(e,t,a){var o=a(5)('unscopables'),r=Array.prototype;r[o]==void 0&&a(12)(r,o,{}),e.exports=function(e){r[o][e]=!0}},function(e,t,a){function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function r(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function n(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var i=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),s=function(){function e(t,a,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(r===void 0){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,a,o)}if('value'in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(o)}return e}(),l=a(18),d=function(e){return e&&e.__esModule?e:{default:e}}(l),p=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return n(t,e),i(t,[{key:'preload',value:function(){return function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'preload',this).call(this);var e=this.game.preloadLayout.getElementById('labelLoading'),a=this.game.add.tween(e).to({angle:-360},1e3,Phaser.Easing.Linear.None,!0,0,Number.MAX_SAFE_INTEGER,!1);a.onLoop.add(function(){e.angle=0},this)}}()}]),t}(d['default'].State.Base);t['default']=p},function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e){var t=0,a=Math.random();e.exports=function(e){return'Symbol('.concat(e===void 0?'':e,')_',(++t+a).toString(36))}},function(e){e.exports=!1},function(e,t,a){var o=a(101),r=a(74);e.exports=Object.keys||function(e){return o(e,r)}},function(e,t,a){var o=a(26),r=Math.max,n=Math.min;e.exports=function(e,t){return e=o(e),0>e?r(e+t,0):n(e,t)}},function(e,t,a){var o=a(1),r=a(102),n=a(74),i=a(73)('IE_PROTO'),s=function(){},l='prototype',d=function(){var e=a(71)('iframe'),t=n.length,o='<',r='>',i;for(e.style.display='none',a(75).appendChild(e),e.src='javascript:',i=e.contentWindow.document,i.open(),i.write(o+'script'+r+'document.F=Object'+o+'/script'+r),i.close(),d=i.F;t--;)delete d[l][n[t]];return d()};e.exports=Object.create||function(e,t){var a;return null===e?a=d():(s[l]=o(e),a=new s,s[l]=null,a[i]=e),void 0===t?a:r(a,t)}},function(e,t,a){var o=a(101),r=a(74).concat('length','prototype');t.f=Object.getOwnPropertyNames||function(e){return o(e,r)}},function(e,t,a){'use strict';var o=a(2),r=a(7),n=a(6),i=a(5)('species');e.exports=function(e){var t=o[e];n&&t&&!t[i]&&r.f(t,i,{configurable:!0,get:function(){return this}})}},function(e){e.exports=function(e,t,a,o){if(!(e instanceof t)||o!==void 0&&o in e)throw TypeError(a+': incorrect invocation!');return e}},function(e,t,a){var o=a(19),r=a(113),n=a(87),i=a(1),s=a(8),l=a(89),d={},p={},t=e.exports=function(e,t,a,c,u){var y=u?function(){return e}:l(e),g=o(a,c,t?2:1),m=0,f,h,b,v;if('function'!=typeof y)throw TypeError(e+' is not iterable!');if(n(y)){for(f=s(e.length);f>m;m++)if(v=t?g(i(h=e[m])[0],h[1]):g(e[m]),v===d||v===p)return v;}else for(b=y.call(e);!(h=b.next()).done;)if(v=r(b,g,h.value,t),v===d||v===p)return v};t.BREAK=d,t.RETURN=p},function(e,t,a){var o=a(13);e.exports=function(e,t,a){for(var r in t)o(e,r,t[r],a);return e}},,function(e,t,a){var o=a(7).f,r=a(11),n=a(5)('toStringTag');e.exports=function(e,t,a){e&&!r(e=a?e:e.prototype,n)&&o(e,n,{configurable:!0,value:t})}},function(e,t,a){var o=a(0),r=a(25),n=a(3),i=a(77),s='['+i+']',l='\u200B\x85',d=RegExp('^'+s+s+'*'),p=RegExp(s+s+'*$'),c=function(e,t,a){var r={},s=n(function(){return!!i[e]()||l[e]()!=l}),d=r[e]=s?t(u):i[e];a&&(r[a]=d),o(o.P+o.F*s,'String',r)},u=c.trim=function(e,t){return e=r(e)+'',1&t&&(e=e.replace(d,'')),2&t&&(e=e.replace(p,'')),e};e.exports=c},function(e){e.exports={}},function(e,t,a){var o=a(4);e.exports=function(e,t){if(!o(e)||e._t!==t)throw TypeError('Incompatible receiver, '+t+' required!');return e}},,function(e,t,a){var o=a(20);e.exports=Object('z').propertyIsEnumerable(0)?Object:function(e){return'String'==o(e)?e.split(''):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,a){var o=a(20),r=a(5)('toStringTag'),n='Arguments'==o(function(){return arguments}()),i=function(e,t){try{return e[t]}catch(t){}};e.exports=function(e){var t,a,s;return e===void 0?'Undefined':null===e?'Null':'string'==typeof(a=i(t=Object(e),r))?a:n?o(t):'Object'==(s=o(t))&&'function'==typeof t.callee?'Arguments':s}},function(e,t){function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function o(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function r(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var n=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),i=function(){function e(t,a,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(r===void 0){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,a,o)}if('value'in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(o)}return e}();t['default']=function(e){return function(e){function t(){var e;a(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return s.shui={align:new Phaser.Point,position:new Phaser.Point,autoUpdate:!0},s}return r(t,e),n(t,[{key:'update',value:function(){return function(){this.shui.autoUpdate&&(this.position.x=this.shui.align.x*this.game.width+this.shui.position.x,this.position.y=this.shui.align.y*this.game.height+this.shui.position.y),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'update',this).call(this)}}()}]),t}(e)}},function(e,t,a){function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),n=!0,i=function(){function e(){o(this,e)}return r(e,null,[{key:'isChromeIOs',value:function(){return function(){return Phaser.Device.mobileSafari&&/CriOS/i.test(navigator.userAgent)}}()},{key:'isIFrame',value:function(){return function(){return window.parent!==window}}()},{key:'getViewportSize',value:function(){return function(){var t={width:0,height:0};if(e.isChromeIOs()){var a=document.body.getBoundingClientRect();t.width=a.width,t.height=a.height}else t.width=window.innerWidth,t.height=window.innerHeight;return t}}()},{key:'isFullScreen',value:function(){return function(){try{if(e.isIFrame()){var t=window.parent.document.fullscreenElement||window.parent.document.webkitFullscreenElement||window.parent.document.mozFullScreenElement||window.parent.document.msFullscreenElement;return t&&t===window.frameElement}}catch(t){}return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}()},{key:'canLockScreen',value:function(){return function(){return window.screen&&window.screen.orientation&&window.screen.orientation.lock}}()},{key:'getScreenOrientation',value:function(){function e(){var e=null;if(n)if(window.screen&&window.screen.orientation&&'string'==typeof window.screen.orientation.type)e=window.screen.orientation.type;else if('number'==typeof window.orientation)switch(window.orientation){case 90:e='landscape-primary';break;case-90:e='landscape-secondary';break;case 180:e='portrait-secondary';break;case 0:default:e='portrait-primary';}else console.warn('screen orientation not supported on this device'),n=!1;return e}return e}()},{key:'getAssetUrl',value:function(){return function(e){var t=e;return t.startsWith('./')&&(t=t.substring(2)),t.startsWith('assets/')&&(t=t.substring(7)),t=a(418)('./'+(t+'')),t}}()}]),e}();t['default']=i},function(e,t,a){var o=a(2),r='__core-js_shared__',n=o[r]||(o[r]={});e.exports=function(e){return n[e]||(n[e]={})}},function(e,t,a){var o=a(15),r=a(8),n=a(38);e.exports=function(e){return function(t,a,i){var s=o(t),l=r(s.length),d=n(i,l),p;if(e&&a!=a){for(;l>d;)if(p=s[d++],p!=p)return!0;}else for(;l>d;d++)if((e||d in s)&&s[d]===a)return e||d||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,a){var o=a(20);e.exports=Array.isArray||function(e){return'Array'==o(e)}},function(e,t,a){var o=a(4),r=a(20),n=a(5)('match');e.exports=function(e){var t;return o(e)&&((t=e[n])===void 0?'RegExp'==r(e):!!t)}},function(e,t,a){var o=a(5)('iterator'),r=!1;try{var n=[7][o]();n['return']=function(){r=!0},Array.from(n,function(){throw 2})}catch(t){}e.exports=function(e,t){if(!t&&!r)return!1;var a=!1;try{var n=[7],i=n[o]();i.next=function(){return{done:a=!0}},n[o]=function(){return i},e(n)}catch(t){}return a}},function(e,t,a){'use strict';var o=a(1);e.exports=function(){var e=o(this),t='';return e.global&&(t+='g'),e.ignoreCase&&(t+='i'),e.multiline&&(t+='m'),e.unicode&&(t+='u'),e.sticky&&(t+='y'),t}},function(e,t,a){'use strict';var o=a(12),r=a(13),n=a(3),i=a(25),s=a(5);e.exports=function(e,t,a){var l=s(e),d=a(i,l,''[e]),p=d[0],c=d[1];n(function(){var t={};return t[l]=function(){return 7},7!=''[e](t)})&&(r(String.prototype,e,p),o(RegExp.prototype,l,2==t?function(e,t){return c.call(e,this,t)}:function(e){return c.call(e,this)}))}},function(e,t,a){var o=a(1),r=a(10),n=a(5)('species');e.exports=function(e,t){var a=o(e).constructor,i;return a===void 0||(i=o(a)[n])==void 0?t:r(i)}},function(e,t,a){'use strict';var o=a(2),r=a(0),n=a(13),i=a(44),s=a(31),l=a(43),d=a(42),p=a(4),c=a(3),u=a(61),y=a(46),g=a(78);e.exports=function(e,t,a,m,f,h){var b=o[e],v=b,_=f?'set':'add',x=v&&v.prototype,S={},T=function(e){var t=x[e];n(x,e,'delete'==e?function(e){return(!h||p(e))&&t.call(this,0===e?0:e)}:'has'==e?function(e){return(!h||p(e))&&t.call(this,0===e?0:e)}:'get'==e?function(e){return h&&!p(e)?void 0:t.call(this,0===e?0:e)}:'add'==e?function(e){return t.call(this,0===e?0:e),this}:function(e,a){return t.call(this,0===e?0:e,a),this})};if('function'!=typeof v||!(h||x.forEach&&!c(function(){new v().entries().next()})))v=m.getConstructor(t,e,f,_),i(v.prototype,a),s.NEED=!0;else{var E=new v,k=E[_](h?{}:-0,1)!=E,I=c(function(){E.has(1)}),P=u(function(e){new v(e)}),O=!h&&c(function(){for(var e=new v,t=5;t--;)e[_](t,t);return!e.has(-0)});P||(v=t(function(t,a){d(t,v,e);var o=g(new b,t,v);return void 0!=a&&l(a,f,o[_],o),o}),v.prototype=x,x.constructor=v),(I||O)&&(T('delete'),T('has'),f&&T('get')),(O||k)&&T(_),h&&x.clear&&delete x.clear}return y(v,e),S[e]=v,r(r.G+r.W+r.F*(v!=b),S),h||m.setStrong(v,e,f),v}},function(e,t,a){for(var o=a(2),r=a(12),n=a(35),s=n('typed_array'),l=n('view'),d=!!(o.ArrayBuffer&&o.DataView),p=d,c=0,i=['Int8Array','Uint8Array','Uint8ClampedArray','Int16Array','Uint16Array','Int32Array','Uint32Array','Float32Array','Float64Array'],u;c<9;)(u=o[i[c++]])?(r(u.prototype,s,!0),r(u.prototype,l,!0)):p=!1;e.exports={ABV:d,CONSTR:p,TYPED:s,VIEW:l}},function(e,t,a){'use strict';e.exports=a(36)||!a(3)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete a(2)[e]})},function(e,t,a){'use strict';var o=a(0);e.exports=function(e){o(o.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,a){'use strict';var o=a(0),r=a(10),i=a(19),s=a(43);e.exports=function(e){o(o.S,e,{from:function(e){var t=arguments[1],a,o,l,n;return(r(this),a=void 0!==t,a&&r(t),void 0==e)?new this:(o=[],a?(l=0,n=i(t,arguments[2],2),s(e,!1,function(e){o.push(n(e,l++))})):s(e,!1,o.push,o),new this(o))}})}},function(e,t,a){Object.defineProperty(t,'__esModule',{value:!0});var o=a(18),r=function(e){return e&&e.__esModule?e:{default:e}}(o),n=function(e){this.game=e,this.Consumables={MAGNET:0,CURRENCY:1,LIFE:2,properties:{0:{name:'magnet',owned:0,price:0,active:!1,uiIndex:2,shopIndex:1},1:{name:'currency',owned:0,price:0,active:!1,uiIndex:1,shopIndex:2},2:{name:'life',owned:0,price:0,active:!1,uiIndex:3,shopIndex:0}}},this.CONSUMABLE_TYPE_COUNT=Object.keys(this.Consumables.properties).length,this.config=this.game.cache.getJSON('config'),this.storage=new r['default'].Storage(this.config.storageKey),this.shopJson=this.game.cache.getJSON('shop').shop;for(var t=0,a;t<this.CONSUMABLE_TYPE_COUNT;t++)a=this.Consumables.properties[t].name,this.Consumables.properties[t].owned=this.storage.getItem('consumable_'+(a+''),null),null===this.Consumables.properties[t].owned&&(this.Consumables.properties[t].owned=0,this.storage.setItem('consumable_'+(a+''),0)),this.Consumables.properties[t].price=this.shopJson.consumables[a].price};n.prototype.isActive=function(e){return this.Consumables.properties[e].active},n.prototype.getCount=function(e){return this.Consumables.properties[e].owned},n.prototype.isAffordable=function(e,t){return t>=this.Consumables.properties[e].price},n.prototype.getPrice=function(e){return this.Consumables.properties[e].price},n.prototype.getName=function(e){return this.Consumables.properties[e].name},n.prototype.buy=function(e,t){this.Consumables.properties[e].price>t||(t-=this.Consumables.properties[e].price,this.storage.setItem('currency',t),this.Consumables.properties[e].owned++,this.storage.setItem('consumable_'+(this.Consumables.properties[e].name+''),this.Consumables.properties[e].owned))},n.prototype.consume=function(e){if(!(0>=this.Consumables.properties[e].owned)){this.Consumables.properties[e].owned--,e!==this.Consumables.LIFE&&(this.Consumables.properties[e].active=!0);var t=this.Consumables.properties[e].name;this.storage.setItem('consumable_'+(t+''),this.Consumables.properties[e].owned),this.game.tracking.enabled&&GameAnalytics('addProgressionEvent','Start','ConsumableUsed',this.getName(e))}},n.prototype.reset=function(){for(var e=0;e<this.CONSUMABLE_TYPE_COUNT;e++)this.Consumables.properties[e].active=!1},t['default']=n},function(e,t,a){var o=a(4),r=a(2).document,n=o(r)&&o(r.createElement);e.exports=function(e){return n?r.createElement(e):{}}},function(e,t,a){var o=a(2),r=a(23),n=a(36),i=a(100),s=a(7).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=n?{}:o.Symbol||{});'_'==e.charAt(0)||e in t||s(t,e,{value:i.f(e)})}},function(e,t,a){var o=a(56)('keys'),r=a(35);e.exports=function(e){return o[e]||(o[e]=r(e))}},function(e){e.exports=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','valueOf']},function(e,t,a){var o=a(2).document;e.exports=o&&o.documentElement},function(e,t,a){var o=a(4),r=a(1),n=function(e,t){if(r(e),!o(t)&&null!==t)throw TypeError(t+': can\'t set as prototype!')};e.exports={set:Object.setPrototypeOf||('__proto__'in{}?function(e,t,o){try{o=a(19)(Function.call,a(16).f(Object.prototype,'__proto__').set,2),o(e,[]),t=!(e instanceof Array)}catch(a){t=!0}return function(e,a){return n(e,a),t?e.__proto__=a:o(e,a),e}}({},!1):void 0),check:n}},function(e){e.exports='\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF'},function(e,t,a){var o=a(4),r=a(76).set;e.exports=function(e,t,a){var n=t.constructor,i;return n!==a&&'function'==typeof n&&(i=n.prototype)!==a.prototype&&o(i)&&r&&r(e,i),e}},function(e,t,a){'use strict';var o=a(26),r=a(25);e.exports=function(e){var t=r(this)+'',a='',i=o(e);if(0>i||i==Infinity)throw RangeError('Count can\'t be negative');for(;0<i;(i>>>=1)&&(t+=t))1&i&&(a+=t);return a}},function(e){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:0>e?-1:1}},function(e){var t=Math.expm1;e.exports=!t||22025.465794806718<t(10)||22025.465794806718>t(10)||-2e-17!=t(-2e-17)?function(e){return 0==(e=+e)?e:-1e-6<e&&1e-6>e?e+e*e/2:Math.exp(e)-1}:t},function(e,t,a){var o=a(26),r=a(25);e.exports=function(e){return function(t,n){var d=r(t)+'',s=o(n),i=d.length,l,a;return 0>s||s>=i?e?'':void 0:(l=d.charCodeAt(s),55296>l||56319<l||s+1===i||56320>(a=d.charCodeAt(s+1))||57343<a?e?d.charAt(s):l:e?d.slice(s,s+2):(l-55296<<10)+(a-56320)+65536)}}},function(e,t,a){'use strict';var o=a(36),r=a(0),n=a(13),i=a(12),s=a(11),l=a(48),d=a(84),p=a(46),c=a(17),u=a(5)('iterator'),y=!([].keys&&'next'in[].keys()),g='keys',m='values',f=function(){return this};e.exports=function(e,t,a,h,b,v,_){d(a,t,h);var x=function(e){return!y&&e in C?C[e]:e===g?function(){return new a(this,e)}:e===m?function(){return new a(this,e)}:function(){return new a(this,e)}},S=t+' Iterator',T=b==m,E=!1,C=e.prototype,k=C[u]||C['@@iterator']||b&&C[b],I=k||x(b),P=b?T?x('entries'):I:void 0,O='Array'==t?C.entries||k:k,w,A,R;if(O&&(R=c(O.call(new e)),R!==Object.prototype&&R.next&&(p(R,S,!0),!o&&!s(R,u)&&i(R,u,f))),T&&k&&k.name!==m&&(E=!0,I=function(){return k.call(this)}),(!o||_)&&(y||E||!C[u])&&i(C,u,I),l[t]=I,l[S]=f,b)if(w={values:T?I:x(m),keys:v?I:x(g),entries:P},_)for(A in w)A in C||n(C,A,w[A]);else r(r.P+r.F*(y||E),t,w);return w}},function(e,t,a){'use strict';var o=a(39),r=a(34),n=a(46),i={};a(12)(i,a(5)('iterator'),function(){return this}),e.exports=function(e,t,a){e.prototype=o(i,{next:r(1,a)}),n(e,t+' Iterator')}},function(e,t,a){var o=a(60),r=a(25);e.exports=function(e,t,a){if(o(t))throw TypeError('String#'+a+' doesn\'t accept regex!');return r(e)+''}},function(e,t,a){var o=a(5)('match');e.exports=function(e){var t=/./;try{'/./'[e](t)}catch(a){try{return t[o]=!1,!'/./'[e](t)}catch(e){}}return!0}},function(e,t,a){var o=a(48),r=a(5)('iterator'),n=Array.prototype;e.exports=function(e){return e!==void 0&&(o.Array===e||n[r]===e)}},function(e,t,a){'use strict';var o=a(7),r=a(34);e.exports=function(e,t,a){t in e?o.f(e,t,r(0,a)):e[t]=a}},function(e,t,a){var o=a(53),r=a(5)('iterator'),n=a(48);e.exports=a(23).getIteratorMethod=function(e){if(e!=void 0)return e[r]||e['@@iterator']||n[o(e)]}},function(e,t,a){var o=a(294);e.exports=function(e,t){return new(o(e))(t)}},function(e,t,a){'use strict';var o=a(9),r=a(38),n=a(8);e.exports=function(e){for(var t=o(this),a=n(t.length),i=arguments.length,s=r(1<i?arguments[1]:void 0,a),l=2<i?arguments[2]:void 0,d=void 0===l?a:r(l,a);d>s;)t[s++]=e;return t}},function(e,t,a){'use strict';var o=a(32),r=a(116),n=a(48),i=a(15);e.exports=a(83)(Array,'Array',function(e,t){this._t=i(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,a=this._i++;return!e||a>=e.length?(this._t=void 0,r(1)):'keys'==t?r(0,a):'values'==t?r(0,e[a]):r(0,[a,e[a]])},'values'),n.Arguments=n.Array,o('keys'),o('values'),o('entries')},function(e,t,a){var o=a(19),r=a(106),n=a(75),i=a(71),s=a(2),l=s.process,d=s.setImmediate,p=s.clearImmediate,c=s.MessageChannel,u=s.Dispatch,y=0,g={},m='onreadystatechange',f=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},h=function(e){f.call(e.data)},b,v,_;d&&p||(d=function(e){for(var t=[],a=1;arguments.length>a;)t.push(arguments[a++]);return g[++y]=function(){r('function'==typeof e?e:Function(e),t)},b(y),y},p=function(e){delete g[e]},'process'==a(20)(l)?b=function(e){l.nextTick(o(f,e,1))}:u&&u.now?b=function(e){u.now(o(f,e,1))}:c?(v=new c,_=v.port2,v.port1.onmessage=h,b=o(_.postMessage,_,1)):s.addEventListener&&'function'==typeof postMessage&&!s.importScripts?(b=function(e){s.postMessage(e+'','*')},s.addEventListener('message',h,!1)):m in i('script')?b=function(e){n.appendChild(i('script'))[m]=function(){n.removeChild(this),f.call(e)}}:b=function(e){setTimeout(o(f,e,1),0)}),e.exports={set:d,clear:p}},function(e,t,a){var o=a(2),r=a(93).set,n=o.MutationObserver||o.WebKitMutationObserver,i=o.process,s=o.Promise,l='process'==a(20)(i);e.exports=function(){var e=function(){var e,o;for(l&&(e=i.domain)&&e.exit();t;){o=t.fn,t=t.next;try{o()}catch(o){throw t?d():a=void 0,o}}a=void 0,e&&e.enter()},t,a,d;if(l)d=function(){i.nextTick(e)};else if(n){var p=!0,c=document.createTextNode('');new n(e).observe(c,{characterData:!0}),d=function(){c.data=p=!p}}else if(s&&s.resolve){var u=s.resolve();d=function(){u.then(e)}}else d=function(){r.call(o,e)};return function(e){var o={fn:e,next:void 0};a&&(a.next=o),t||(t=o,d()),a=o}}},function(e,t,a){'use strict';function o(e){var t,a;this.promise=new e(function(e,o){if(t!==void 0||a!==void 0)throw TypeError('Bad Promise constructor');t=e,a=o}),this.resolve=r(t),this.reject=r(a)}var r=a(10);e.exports.f=function(e){return new o(e)}},function(e,t,a){'use strict';function o(t,a,o){var r=Array(o),n=8*o-a-1,l=(1<<n)-1,d=l>>1,p=23===a?F(2,-24)-F(2,-77):0,u=0,i=0>t||0===t&&0>1/t?1:0,s,y,g;for(t=V(t),t!=t||t===U?(y=t==t?0:1,s=l):(s=z(G(t)/H),1>t*(g=F(2,-s))&&(s--,g*=2),t+=1<=s+d?p/g:p*F(2,1-d),2<=t*g&&(s++,g/=2),s+d>=l?(y=0,s=l):1<=s+d?(y=(t*g-1)*F(2,a),s+=d):(y=t*F(2,d-1)*F(2,a),s=0));8<=a;r[u++]=255&y,y/=256,a-=8);for(s=s<<a|y,n+=a;0<n;r[u++]=255&s,s/=256,n-=8);return r[--u]|=128*i,r}function r(t,a,o){var r=8*o-a-1,n=(1<<r)-1,l=n>>1,d=r-7,p=o-1,i=t[p--],s=127&i,e;for(i>>=7;0<d;s=256*s+t[p],p--,d-=8);for(e=s&(1<<-d)-1,s>>=-d,d+=a;0<d;e=256*e+t[p],p--,d-=8);if(0===s)s=1-l;else{if(s===n)return e?NaN:i?-U:U;e+=F(2,a),s-=l}return(i?-1:1)*e*F(2,s-a)}function n(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function i(e){return[255&e]}function s(e){return[255&e,255&e>>8]}function l(e){return[255&e,255&e>>8,255&e>>16,255&e>>24]}function d(e){return o(e,52,8)}function p(e){return o(e,23,4)}function c(e,t,a){k(e[A],t,{get:function(){return this[a]}})}function u(e,t,a,o){var r=E(+a);if(r+t>e[X])throw M(R);var n=e[J]._b,i=r+e[Z],s=n.slice(i,i+t);return o?s:s.reverse()}function y(e,t,a,o,r,n){var s=E(+a);if(s+t>e[X])throw M(R);for(var l=e[J]._b,d=s+e[Z],p=o(+r),c=0;c<t;c++)l[d+c]=p[n?c:t-c-1]}var g=a(2),m=a(6),f=a(36),h=a(66),b=a(12),v=a(44),_=a(3),x=a(42),S=a(26),T=a(8),E=a(125),C=a(40).f,k=a(7).f,I=a(91),P=a(46),O='ArrayBuffer',w='DataView',A='prototype',R='Wrong index!',L=g[O],D=g[w],N=g.Math,M=g.RangeError,U=g.Infinity,B=L,V=N.abs,F=N.pow,z=N.floor,G=N.log,H=N.LN2,K='buffer',W='byteLength',Y='byteOffset',J=m?'_b':K,X=m?'_l':W,Z=m?'_o':Y;if(!h.ABV)L=function(e){x(this,L,O);var t=E(e);this._b=I.call(Array(t),0),this[X]=t},D=function(e,t,a){x(this,D,w),x(e,L,w);var o=e[X],r=S(t);if(0>r||r>o)throw M('Wrong offset!');if(a=void 0===a?o-r:T(a),r+a>o)throw M('Wrong length!');this[J]=e,this[Z]=r,this[X]=a},m&&(c(L,W,'_l'),c(D,K,'_b'),c(D,W,'_l'),c(D,Y,'_o')),v(D[A],{getInt8:function(e){return u(this,1,e)[0]<<24>>24},getUint8:function(e){return u(this,1,e)[0]},getInt16:function(e){var t=u(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=u(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return n(u(this,4,e,arguments[1]))},getUint32:function(e){return n(u(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return r(u(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return r(u(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){y(this,1,e,i,t)},setUint8:function(e,t){y(this,1,e,i,t)},setInt16:function(e,t){y(this,2,e,s,t,arguments[2])},setUint16:function(e,t){y(this,2,e,s,t,arguments[2])},setInt32:function(e,t){y(this,4,e,l,t,arguments[2])},setUint32:function(e,t){y(this,4,e,l,t,arguments[2])},setFloat32:function(e,t){y(this,4,e,p,t,arguments[2])},setFloat64:function(e,t){y(this,8,e,d,t,arguments[2])}});else{if(!_(function(){L(1)})||!_(function(){new L(-1)})||_(function(){return new L,new L(1.5),new L(NaN),L.name!=O})){L=function(e){return x(this,L),new B(E(e))};for(var q=L[A]=B[A],$=C(B),Q=0,j;$.length>Q;)(j=$[Q++])in L||b(L,j,B[j]);f||(q.constructor=L)}var ee=new D(new L(2)),te=D[A].setInt8;ee.setInt8(0,2147483648),ee.setInt8(1,2147483649),(ee.getInt8(0)||!ee.getInt8(1))&&v(D[A],{setInt8:function(e,t){te.call(this,e,t<<24>>24)},setUint8:function(e,t){te.call(this,e,t<<24>>24)}},!0)}P(L,O),P(D,w),b(D[A],h.VIEW,!0),t[O]=L,t[w]=D},function(e,t,a){function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function r(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function n(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var i=a(54),s=function(e){return e&&e.__esModule?e:{default:e}}(i),l=function(e){function t(e,a,n,i,s){o(this,t);var l=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,0,0,i,s));return l.shui.position.set(a,n),l}return n(t,e),t}((0,s['default'])(Phaser.Text));t['default']=l},function(e,t,a){Object.defineProperty(t,'__esModule',{value:!0});var o=a(18),r=function(e){return e&&e.__esModule?e:{default:e}}(o),n=function(e,t,a,o,r,n,i,s,l,d,p){this.name=e,this.description=t,this.model=a,this.texture=o,this.uiKey=d,this.uiIcon=p,this.price=r,this.preOwned=n,this.driverName=i,this.bPurchasable=s,this.owned=!1,this.storage=l,this.owned=this.storage.getItem('driverSkin_'+(this.name+''),null),null===this.owned&&(this.owned=this.preOwned,this.storage.setItem('driverSkin_'+(this.name+''),this.owned))},s=function(e,t,a,o){this.name=e,this.skins=t,this.spawnSound=a,this.owned=!1,this.storage=o,this.driverSkins=[];for(var r=0;r<this.skins.length;r++)this.driverSkins[r]=new n(this.skins[r].name,this.skins[r].description,this.skins[r].model,this.skins[r].texture,this.skins[r].price,this.skins[r].preOwned,this.name,this.skins[r].purchasable,this.storage,this.skins[r].uiLabel,this.skins[r].uiIcon)},l=function(e,t,a,o,r,n,i,s,l,d,p,c){this.name=e,this.description=t,this.texture=a,this.uiKey=p,this.uiIcon=c,this.fx=o,this.fxTransform=r,this.price=n,this.preOwned=i,this.vehicleName=s,this.bPurchasable=l,this.owned=!1,this.storage=d,this.owned=this.storage.getItem('vehicleSkin_'+(this.name+''),null),null===this.owned&&(this.owned=this.preOwned,this.storage.setItem('vehicleSkin_'+(this.name+''),this.owned))},i=function(e,t,a,o){this.name=e,this.model=t,this.skins=a,this.owned=!1,this.storage=o,this.vehicleSkins=[];for(var r=0;r<this.skins.length;r++)this.vehicleSkins[r]=new l(this.skins[r].name,this.skins[r].description,this.skins[r].texture,this.skins[r].fx,this.skins[r].fxTransform,this.skins[r].price,this.skins[r].preOwned,this.name,this.skins[r].purchasable,this.storage,this.skins[r].uiLabel,this.skins[r].uiIcon)},d=function(e){this.game=e,this.config=this.game.cache.getJSON('config'),this.shopConfig=this.game.cache.getJSON('shop').shop,this.storage=new r['default'].Storage(this.config.storageKey),this.drivers=[],this.vehicles=[],this.DRIVER_COUNT=this.shopConfig.drivers.length,this.VEHICLE_COUNT=this.shopConfig.vehicles.length;for(var t=0;t<this.shopConfig.drivers.length;t++)this.drivers[t]=new s(this.shopConfig.drivers[t].name,this.shopConfig.drivers[t].skins,this.shopConfig.drivers[t].sound.spawnSound,this.storage);for(var a=0;a<this.shopConfig.vehicles.length;a++)this.vehicles[a]=new i(this.shopConfig.vehicles[a].name,this.shopConfig.vehicles[a].model,this.shopConfig.vehicles[a].skins,this.storage)};d.prototype.getDriverSkinCount=function(e){return this.drivers[e].driverSkins.length},d.prototype.getVehicleSkinCount=function(e){return this.vehicles[e].vehicleSkins.length},d.prototype.isDriverOwned=function(e,t){return this.drivers[e].driverSkins[t].owned||this.drivers[e].driverSkins[t].preOwned},d.prototype.isVehicleOwned=function(e,t){return this.vehicles[e].vehicleSkins[t].owned||this.vehicles[e].vehicleSkins[t].preOwned},d.prototype.isDriverAffordable=function(e,t,a){return a>=this.drivers[e].driverSkins[t].price},d.prototype.isVehicleAffordable=function(e,t,a){return a>=this.vehicles[e].vehicleSkins[t].price},d.prototype.getDriverPrice=function(e,t){return this.drivers[e].driverSkins[t].price},d.prototype.getVehiclePrice=function(e,t){return this.vehicles[e].vehicleSkins[t].price},d.prototype.buyDriverSkin=function(e,t,a){this.drivers[e].driverSkins[t].preOwned||this.drivers[e].driverSkins[t].owned||!this.drivers[e].driverSkins[t].bPurchasable||a<this.drivers[e].driverSkins[t].price||(a-=this.drivers[e].driverSkins[t].price,this.storage.setItem('currency',a),this.drivers[e].driverSkins[t].owned=!0,this.storage.setItem('driverSkin_'+(this.drivers[e].driverSkins[t].name+''),!0))},d.prototype.getDriverName=function(e){return this.drivers[e].name},d.prototype.getDriverSkinName=function(e,t){return this.drivers[e].driverSkins[t].name},d.prototype.getDriverSkinDescription=function(e,t){return this.drivers[e].driverSkins[t].description},d.prototype.isDriverSkinPurchasable=function(e,t){return this.drivers[e].driverSkins[t].bPurchasable},d.prototype.getVehicleName=function(e){return this.vehicles[e].name},d.prototype.getVehicleSkinName=function(e,t){return this.vehicles[e].vehicleSkins[t].name},d.prototype.getVehicleSkinDescription=function(e,t){return this.vehicles[e].vehicleSkins[t].description},d.prototype.isVehicleSkinPurchasable=function(e,t){return this.vehicles[e].vehicleSkins[t].bPurchasable},d.prototype.unlockDriverSkin=function(e){for(var t=[],a=0;a<this.drivers.length;a++)for(var o=0;o<this.drivers[a].driverSkins.length;o++)this.drivers[a].driverSkins[o].owned||this.drivers[a].driverSkins[o].bPurchasable||!(e>=this.drivers[a].driverSkins[o].price)||(this.drivers[a].driverSkins[o].owned=!0,this.storage.setItem('driverSkin_'+(this.drivers[a].driverSkins[o].name+''),!0),t.push({driver:a,skin:o}));return t},d.prototype.buyVehicleSkin=function(e,t,a){this.vehicles[e].vehicleSkins[t].preOwned||this.vehicles[e].vehicleSkins[t].owned||!this.vehicles[e].vehicleSkins[t].bPurchasable||a<this.vehicles[e].vehicleSkins[t].price||(a-=this.vehicles[e].vehicleSkins[t].price,this.storage.setItem('currency',a),this.vehicles[e].vehicleSkins[t].owned=!0,this.storage.setItem('vehicleSkin_'+(this.vehicles[e].vehicleSkins[t].name+''),!0))},d.prototype.unlockVehicleSkin=function(e){for(var t=[],a=0;a<this.vehicles.length;a++)for(var o=0;o<this.vehicles[a].vehicleSkins.length;o++)this.vehicles[a].vehicleSkins[o].owned||this.vehicles[a].vehicleSkins[o].bPurchasable||!(e>=this.vehicles[a].vehicleSkins[o].price)||(this.vehicles[a].vehicleSkins[o].owned=!0,this.storage.setItem('vehicleSkin_'+(this.vehicles[a].vehicleSkins[o].name+''),!0),t.push({vehicle:a,skin:o}));return t},d.prototype.getCurrentDriverKeys=function(e,t){return{model:this.drivers[e].driverSkins[t].model,texture:this.drivers[e].driverSkins[t].texture}},d.prototype.getDriverUiKey=function(e,t){return this.drivers[e].driverSkins[t].uiKey},d.prototype.getDriverSkinIconKey=function(e,t){return this.drivers[e].driverSkins[t].uiIcon},d.prototype.getVehicleUiKey=function(e,t){return this.vehicles[e].vehicleSkins[t].uiKey},d.prototype.getVehicleSkinIconKey=function(e,t){return this.vehicles[e].vehicleSkins[t].uiIcon},d.prototype.getCurrentVehicleKeys=function(e,t){return{model:this.vehicles[e].model,texture:this.vehicles[e].vehicleSkins[t].texture}},d.prototype.getCurrentDriverJsonData=function(e,t){return this.drivers[e].driverSkins[t].json},d.prototype.getCurrentDriverTextureData=function(e,t){return this.drivers[e].driverSkins[t].texture},d.prototype.getCurrentDriverSpawnSoundData=function(e){return this.drivers[e].spawnSound},d.prototype.getCurrentVehicleJsonData=function(e){return this.vehicles[e].json},d.prototype.getCurrentVehicleTextureData=function(e,t){return this.vehicles[e].vehicleSkins[t].texture},d.prototype.getCurrentVehicleParticlesData=function(e,t){return this.vehicles[e].vehicleSkins[t].fx},d.prototype.getVehicleParticlesTransform=function(e,t){return this.vehicles[e].vehicleSkins[t].fxTransform},t['default']=d},function(e,t,a){e.exports=!a(6)&&!a(3)(function(){return 7!=Object.defineProperty(a(71)('div'),'a',{get:function(){return 7}}).a})},function(e,t,a){t.f=a(5)},function(e,t,a){var o=a(11),r=a(15),n=a(57)(!1),i=a(73)('IE_PROTO');e.exports=function(e,t){var a=r(e),s=0,l=[],d;for(d in a)d!=i&&o(a,d)&&l.push(d);for(;t.length>s;)o(a,d=t[s++])&&(~n(l,d)||l.push(d));return l}},function(e,t,a){var o=a(7),r=a(1),n=a(37);e.exports=a(6)?Object.defineProperties:function(e,t){r(e);for(var a=n(t),s=a.length,l=0,i;s>l;)o.f(e,i=a[l++],t[i]);return e}},function(e,t,a){var o=a(15),r=a(40).f,n={}.toString,i='object'==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return r(e)}catch(t){return i.slice()}};e.exports.f=function(e){return i&&'[object Window]'==n.call(e)?s(e):r(o(e))}},function(e,t,a){'use strict';var o=a(37),r=a(58),n=a(52),i=a(9),s=a(51),l=Object.assign;e.exports=!l||a(3)(function(){var e={},t={},a=Symbol(),o='abcdefghijklmnopqrst';return e[a]=7,o.split('').forEach(function(e){t[e]=e}),7!=l({},e)[a]||Object.keys(l({},t)).join('')!=o})?function(e){for(var t=i(e),a=arguments.length,l=1,d=r.f,p=n.f;a>l;)for(var c=s(arguments[l++]),u=d?o(c).concat(d(c)):o(c),y=u.length,g=0,m;y>g;)p.call(c,m=u[g++])&&(t[m]=c[m]);return t}:l},function(e,t,a){'use strict';var o=a(10),r=a(4),n=a(106),i=[].slice,s={},l=function(e,t,a){if(!(t in s)){for(var o=[],r=0;r<t;r++)o[r]='a['+r+']';s[t]=Function('F,a','return new F('+o.join(',')+')')}return s[t](e,a)};e.exports=Function.bind||function(e){var t=o(this),a=i.call(arguments,1),s=function(){var o=a.concat(i.call(arguments));return this instanceof s?l(t,o.length,o):n(t,o,e)};return r(t.prototype)&&(s.prototype=t.prototype),s}},function(e){e.exports=function(e,t,a){var o=a===void 0;switch(t.length){case 0:return o?e():e.call(a);case 1:return o?e(t[0]):e.call(a,t[0]);case 2:return o?e(t[0],t[1]):e.call(a,t[0],t[1]);case 3:return o?e(t[0],t[1],t[2]):e.call(a,t[0],t[1],t[2]);case 4:return o?e(t[0],t[1],t[2],t[3]):e.call(a,t[0],t[1],t[2],t[3]);}return e.apply(a,t)}},function(e,t,a){var o=a(2).parseInt,r=a(47).trim,n=a(77),i=/^[-+]?0[xX]/;e.exports=8!==o(n+'08')||22!==o(n+'0x16')?function(e,t){var a=r(e+'',3);return o(a,t>>>0||(i.test(a)?16:10))}:o},function(e,t,a){var o=a(2).parseFloat,r=a(47).trim;e.exports=1/o(a(77)+'-0')==-Infinity?o:function(e){var t=r(e+'',3),a=o(t);return 0===a&&'-'==t.charAt(0)?-0:a}},function(e,t,a){var o=a(20);e.exports=function(e,t){if('number'!=typeof e&&'Number'!=o(e))throw TypeError(t);return+e}},function(e,t,a){var o=a(4),r=Math.floor;e.exports=function(e){return!o(e)&&isFinite(e)&&r(e)===e}},function(e){e.exports=Math.log1p||function(e){return-1e-8<(e=+e)&&1e-8>e?e-e*e/2:Math.log(1+e)}},function(e,t,a){var o=a(80),r=Math.pow,i=r(2,-52),n=r(2,-23),s=r(2,127)*(2-n),l=r(2,-126),d=function(e){return e+1/i-1/i};e.exports=Math.fround||function(e){var t=Math.abs(e),r=o(e),p,a;return t<l?r*d(t/l/n)*l*n:(p=(1+n/i)*t,a=p-(p-t),a>s||a!=a?r*Infinity:r*a)}},function(e,t,a){var o=a(1);e.exports=function(t,e,a,r){try{return r?e(o(a)[0],a[1]):e(a)}catch(a){var n=t['return'];throw void 0!==n&&o(n.call(t)),a}}},function(e,t,a){var o=a(10),r=a(9),n=a(51),s=a(8);e.exports=function(e,t,a,l,d){o(t);var p=r(e),c=n(p),u=s(p.length),y=d?u-1:0,g=d?-1:1;if(2>a)for(;;){if(y in c){l=c[y],y+=g;break}if(y+=g,d?0>y:u<=y)throw TypeError('Reduce of empty array with no initial value')}for(;d?0<=y:u>y;y+=g)y in c&&(l=t(l,c[y],y,p));return l}},function(e,t,a){'use strict';var o=a(9),r=a(38),n=a(8);e.exports=[].copyWithin||function(e,t){var a=o(this),i=n(a.length),s=r(e,i),l=r(t,i),d=2<arguments.length?arguments[2]:void 0,p=Math.min((d===void 0?i:r(d,i))-l,i-s),c=1;for(l<s&&s<l+p&&(c=-1,l+=p-1,s+=p-1);0<p--;)l in a?a[s]=a[l]:delete a[s],s+=c,l+=c;return a}},function(e){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,a){a(6)&&'g'!=/./g.flags&&a(7).f(RegExp.prototype,'flags',{configurable:!0,get:a(62)})},function(e){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},function(e,t,a){var o=a(1),r=a(4),n=a(95);e.exports=function(e,t){if(o(e),r(t)&&t.constructor===e)return t;var a=n.f(e),i=a.resolve;return i(t),a.promise}},function(e,t,a){'use strict';var o=a(121),r=a(49),n='Map';e.exports=a(65)(n,function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{get:function(e){var t=o.getEntry(r(this,n),e);return t&&t.v},set:function(e,t){return o.def(r(this,n),0===e?0:e,t)}},o,!0)},function(e,t,a){'use strict';var o=a(7).f,r=a(39),n=a(44),i=a(19),s=a(42),l=a(43),d=a(83),p=a(116),c=a(41),u=a(6),y=a(31).fastKey,g=a(49),m=u?'_s':'size',f=function(e,t){var a=y(t),o;if('F'!==a)return e._i[a];for(o=e._f;o;o=o.n)if(o.k==t)return o};e.exports={getConstructor:function(e,t,a,d){var p=e(function(e,o){s(e,p,t,'_i'),e._t=t,e._i=r(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=o&&l(o,a,e[d],e)});return n(p.prototype,{clear:function(){for(var e=g(this,t),a=e._i,o=e._f;o;o=o.n)o.r=!0,o.p&&(o.p=o.p.n=void 0),delete a[o.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var a=g(this,t),o=f(a,e);if(o){var r=o.n,n=o.p;delete a._i[o.i],o.r=!0,n&&(n.n=r),r&&(r.p=n),a._f==o&&(a._f=r),a._l==o&&(a._l=n),a[m]--}return!!o},forEach:function(e){g(this,t);for(var a=i(e,1<arguments.length?arguments[1]:void 0,3),o;o=o?o.n:this._f;)for(a(o.v,o.k,this);o&&o.r;)o=o.p},has:function(e){return!!f(g(this,t),e)}}),u&&o(p.prototype,'size',{get:function(){return g(this,t)[m]}}),p},def:function(e,t,a){var o=f(e,t),r,n;return o?o.v=a:(e._l=o={i:n=y(t,!0),k:t,v:a,p:r=e._l,n:void 0,r:!1},!e._f&&(e._f=o),r&&(r.n=o),e[m]++,'F'!==n&&(e._i[n]=o)),e},getEntry:f,setStrong:function(e,t,a){d(e,t,function(e,a){this._t=g(e,t),this._k=a,this._l=void 0},function(){for(var e=this,t=e._k,a=e._l;a&&a.r;)a=a.p;return e._t&&(e._l=a=a?a.n:e._t._f)?'keys'==t?p(0,a.k):'values'==t?p(0,a.v):p(0,[a.k,a.v]):(e._t=void 0,p(1))},a?'entries':'values',!a,!0),c(t)}}},function(e,t,a){'use strict';var o=a(121),r=a(49),n='Set';e.exports=a(65)(n,function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return o.def(r(this,n),e=0===e?0:e,e)}},o)},function(e,t,a){'use strict';var o=a(28)(0),r=a(13),n=a(31),i=a(104),s=a(124),l=a(4),d=a(3),p=a(49),c='WeakMap',u=n.getWeak,y=Object.isExtensible,g=s.ufstore,m={},f=function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},h={get:function(e){if(l(e)){var t=u(e);return!0===t?g(p(this,c)).get(e):t?t[this._i]:void 0}},set:function(e,t){return s.def(p(this,c),e,t)}},b=e.exports=a(65)(c,f,h,s,!0,!0),v;d(function(){return 7!=new b().set((Object.freeze||Object)(m),7).get(m)})&&(v=s.getConstructor(f,c),i(v.prototype,h),n.NEED=!0,o(['delete','has','get','set'],function(e){var t=b.prototype,o=t[e];r(t,e,function(t,a){if(l(t)&&!y(t)){this._f||(this._f=new v);var r=this._f[e](t,a);return'set'==e?this:r}return o.call(this,t,a)})}))},function(e,t,a){'use strict';var o=a(44),r=a(31).getWeak,n=a(1),i=a(4),s=a(42),l=a(43),d=a(28),p=a(11),c=a(49),u=d(5),y=d(6),g=0,m=function(e){return e._l||(e._l=new f)},f=function(){this.a=[]},h=function(e,t){return u(e.a,function(e){return e[0]===t})};f.prototype={get:function(e){var t=h(this,e);if(t)return t[1]},has:function(e){return!!h(this,e)},set:function(e,t){var a=h(this,e);a?a[1]=t:this.a.push([e,t])},delete:function(e){var t=y(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,a,n){var d=e(function(e,o){s(e,d,t,'_i'),e._t=t,e._i=g++,e._l=void 0,void 0!=o&&l(o,a,e[n],e)});return o(d.prototype,{delete:function(e){if(!i(e))return!1;var a=r(e);return!0===a?m(c(this,t))['delete'](e):a&&p(a,this._i)&&delete a[this._i]},has:function(e){if(!i(e))return!1;var a=r(e);return!0===a?m(c(this,t)).has(e):a&&p(a,this._i)}}),d},def:function(e,t,a){var o=r(n(t),!0);return!0===o?m(e).set(t,a):o[e._i]=a,e},ufstore:m}},function(e,t,a){var o=a(26),r=a(8);e.exports=function(e){if(e===void 0)return 0;var t=o(e),a=r(t);if(t!==a)throw RangeError('Wrong length!');return a}},function(e,t,a){var o=a(40),r=a(58),n=a(1),i=a(2).Reflect;e.exports=i&&i.ownKeys||function(e){var t=o.f(n(e)),a=r.f;return a?t.concat(a(e)):t}},function(e,t,a){'use strict';function o(e,t,a,d,p,c,u,y){for(var g=p,m=0,f=!!u&&s(u,y,3),h,b;m<d;){if(m in a){if(h=f?f(a[m],m,t):a[m],b=!1,n(h)&&(b=h[l],b=void 0===b?r(h):!!b),b&&0<c)g=o(e,t,h,i(h.length),g,c-1)-1;else{if(9007199254740991<=g)throw TypeError();e[g]=h}g++}m++}return g}var r=a(59),n=a(4),i=a(8),s=a(19),l=a(5)('isConcatSpreadable');e.exports=o},function(e,t,a){var o=a(8),r=a(79),n=a(25);e.exports=function(e,t,a,i){var s=n(e)+'',l=s.length,d=void 0===a?' ':a+'',p=o(t);if(p<=l||''==d)return s;var c=p-l,u=r.call(d,Math.ceil(c/d.length));return u.length>c&&(u=u.slice(0,c)),i?u+s:s+u}},function(e,t,a){var o=a(37),r=a(15),n=a(52).f;e.exports=function(e){return function(t){for(var a=r(t),s=o(a),l=s.length,d=0,i=[],p;l>d;)n.call(a,p=s[d++])&&i.push(e?[p,a[p]]:a[p]);return i}}},function(e,t,a){var o=a(53),r=a(131);e.exports=function(e){return function(){if(o(this)!=e)throw TypeError(e+'#toJSON isn\'t generic');return r(this)}}},function(e,t,a){var o=a(43);e.exports=function(e,t){var a=[];return o(e,!1,a.push,a,t),a}},function(e){e.exports=Math.scale||function(e,t,a,o,r){return 0===arguments.length||e!=e||t!=t||a!=a||o!=o||r!=r?NaN:e===Infinity||e===-Infinity?e:(e-t)*(r-o)/(a-t)+o}},function(e,t,a){function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function n(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var s=function(){function e(t,a,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(r===void 0){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,a,o)}if('value'in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(o)}return e}(),l=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),d=a(54),p=o(d),c=a(97),u=o(c),y=function(){function e(t,a,o,r,n,s){i(this,e),this.button=t,this.name=a,this.key=o,this.baseFrame=r,this.downFrame=n,this.hoverFrame=s,this.baseText=null,this.downText=null,this.hoverText=null}return l(e,[{key:'setText',value:function(){return function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e;this.baseText=e,this.downText=t,this.hoverText=a}}()}]),e}(),g=function(e){function t(e,a,o,n,s,l,d){i(this,t);var p=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,0,0,n,null,null,d,s,l));'undefined'==typeof Phaser.PointerMode.TOUCH&&console.warn('Phaser.PointerMode.TOUCH is undefined. Patch or upgrade Phaser. @see https://github.com/photonstorm/phaser-ce/issues/392'),p.forceOut=Phaser.PointerMode.CONTACT,p.justReleasedPreventsOver=Phaser.PointerMode.CONTACT,p.shui.position.set(a,o),p.shui.baseText=null,p.shui.downText=null,p.shui.hoverText=null,p.shui.currenText=null,p.shui.states={},p.shui.currentState='default',p.shui.buttonState='base',p.addState('default',n,s,l,d);var c=100;return p.onInputOver.add(p._hoverHandler,p,c),p.onInputOut.add(p._outHandler,p,c),p.onInputDown.add(p._downHandler,p,c),p.onInputUp.add(p._upHandler,p,c),p}return n(t,e),l(t,[{key:'update',value:function(){return function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'update',this).call(this),this.shui.currenText&&this.shui.currenText.position.set(-this.width/this.scale.x*this.anchor.x+this.shui.currenText.shui.position.x,-this.height/this.scale.y*this.anchor.y+this.shui.currenText.shui.position.y)}}()},{key:'addState',value:function(){return function(e,t,a,o,r){this.shui.states[e]=new y(this,e,t,a,o,r),this.shui.currentState===e&&this.useState(e)}}()},{key:'setText',value:function(){function e(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:t;if(e in this.shui.states){for(var r=this.shui.states[e],n=[t,a,o],i=0,s;i<n.length;i++)s=n[i],s&&(s.wordWrap=!0,s.wordWrapWidth=this.width,s.setTextBounds(0,0,this.width,this.height));r.setText(t,a,o)}else return void console.error('Button does not have a state named '+(e+''));this.shui.currentState===e&&this._setStateText()}return e}()},{key:'getStates',value:function(){return function(){return Object.keys(this.shui.states)}}()},{key:'getCurrentState',value:function(){return function(){return this.shui.currentState}}()},{key:'useState',value:function(){function e(e){if(e in this.shui.states){this.shui.currentState=e;var t=this.shui.states[e];switch(this.key!==t.key&&this.loadTexture(t.key),this.setFrames(t.hoverFrame,t.baseFrame,t.downFrame),this.shui.buttonState){case'base':this.changeStateFrame('Out');break;case'down':t.downFrame?this.changeStateFrame('Down'):this.changeStateFrame('Out');break;case'hover':t.hoverFrame?this.changeStateFrame('Over'):this.changeStateFrame('Out');break;default:console.warn('Unknown state in button'),this.changeStateFrame('Out');}this._setStateText()}else console.error('Button does not have a state named '+(e+''))}return e}()},{key:'_setStateText',value:function(){return function(){var e=this.shui.states[this.shui.currentState];this.shui.baseText=e.baseText,this.shui.downText=e.downText,this.shui.hoverText=e.hoverText,this._updateText()}}()},{key:'_updateText',value:function(){return function(){this.shui.currenText&&this.removeChild(this.shui.currenText);var e;switch(this.shui.buttonState){case'down':e=this.shui.downText;break;case'hover':e=this.shui.hoverText;break;default:}e||(e=this.shui.baseText),e&&(this.shui.currenText=e,this.addChild(this.shui.currenText))}}()},{key:'_hoverHandler',value:function(){return function(){this.shui.buttonState='hover',this._updateText()}}()},{key:'_outHandler',value:function(){return function(){this.shui.buttonState='base',this._updateText()}}()},{key:'_upHandler',value:function(){return function(e,t,a){this.shui.buttonState=a&&!0!==this.forceOut&&(this.forceOut&t.pointerMode)!==t.pointerMode?'hover':'base',this._updateText()}}()},{key:'_downHandler',value:function(){return function(){this.shui.buttonState='down',this._updateText()}}()}]),t}((0,p['default'])(Phaser.Button));t['default']=g},function(e,t,a){function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function r(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function n(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var i=a(54),s=function(e){return e&&e.__esModule?e:{default:e}}(i),l=function(e){function t(e,a,n,i,s){o(this,t);var l=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,0,0,i,s));return l.shui.position.set(a,n),l}return n(t,e),t}((0,s['default'])(Phaser.Image));t['default']=l},function(e,t,a){function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function r(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function n(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var i=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),s=function(){function e(t,a,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(r===void 0){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,a,o)}if('value'in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(o)}return e}(),l=a(54),d=function(e){return e&&e.__esModule?e:{default:e}}(l),p=function(e){function t(e,a,n,i){o(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,null));return s.shui.position.set(a,n),s.shui.inputField=new PhaserInput.InputField(e,0,0,i),s.add(s.shui.inputField),s.anchor=new Phaser.Point,s}return n(t,e),i(t,[{key:'update',value:function(){return function(){this.pivot.set(this.width*this.anchor.x,this.height*this.anchor.y),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'update',this).call(this)}}()}]),t}((0,d['default'])(Phaser.Group));t['default']=p},function(e,t,a){e.exports=a.p+'assets/atlas/button_cb6f3c738053b4c28585c60b23fc275e.json'},function(e,t,a){e.exports=a.p+'assets/atlas/fs_generic_3ecc754ef9183d9676d6d3322bd55ad2.json'},function(e,t,a){e.exports=a.p+'assets/atlas/label_090c9c46348fffdf899b5e4950662c51.json'},function(e,t,a){e.exports=a.p+'assets/atlas/ui_59abf3d27c30347bc6e6f50af967fed5.json'},function(e,t,a){e.exports=a.p+'assets/data/basePack_637221dde9a125e5e77d290ccbfba18d.json'},function(e,t,a){e.exports=a.p+'assets/data/config_e0bbc82c89871923d3d383b5e7e2a3c8.json'},function(e,t,a){e.exports=a.p+'assets/data/configDataCollection_eb2ac12e46f3b013f44618b19df4ad20.json'},function(e,t,a){e.exports=a.p+'assets/data/creditsPack_f5cc1b6e641efaf9496a04dc5cca7ab5.json'},function(e,t,a){e.exports=a.p+'assets/data/dataCollectionPack_a5f0a70728e5aba3f2d2970b9f246706.json'},function(e,t,a){e.exports=a.p+'assets/data/gameOverPack_6a3dc8b36b3bef1c66040ac34e1d5bba.json'},function(e,t,a){e.exports=a.p+'assets/data/gamePack_3f56f965fea048855f0126d5a8ff21af.json'},function(e,t,a){e.exports=a.p+'assets/data/highscorePack_e0811568a00feb53327423e968302499.json'},function(e,t,a){e.exports=a.p+'assets/data/instructionsPack_30490c61eaeb79db9321c0078228a425.json'},function(e,t,a){e.exports=a.p+'assets/data/menuPack_7022d0e01d6e169fc2178dbd375a723b.json'},function(e,t,a){e.exports=a.p+'assets/data/nameInputPack_e7e9d73da3a93e5ca3a10f35348e16b7.json'},function(e,t,a){e.exports=a.p+'assets/data/shop_30fef933e9510f39f0ca162bf6b858f3.json'},function(e,t,a){e.exports=a.p+'assets/data/shopPack_9f1a2953576220750924ca5a801c982c.json'},function(e,t,a){e.exports=a.p+'assets/data/text_aa990bf85b7841a74d35dd4ef4bbc19d.json'},function(e){e.exports='../../assets/font/Aero_fc268521547a8adbf3be5130e7de4d85.woff'},function(e){e.exports='../../assets/font/Montserrat-Regular_bab3350a3a88be143be6a4467b24f1ce.woff'},function(e){e.exports='../../assets/font/Roboto-Regular_9f0f74b9d7d1a3eb0d1cac5fbc025e47.woff'},function(e){e.exports='../../assets/font/RobotoCondensed-BoldItalic_e43d3ee19b7895e773d2826287b339c5.woff'},function(e){e.exports='../../assets/font/go3v2_0d7e880a6f41784b2ccdd615dc43ee55.woff'},function(e,t,a){e.exports=a.p+'assets/layout/credits_351de400efe53e47fd857a63d577fcb4.json'},function(e,t,a){e.exports=a.p+'assets/layout/dsgvo_9ddd1038c703ddeeeee28ea503533cd6.json'},function(e,t,a){e.exports=a.p+'assets/layout/end_1c64f0eaaeb0712073ace833677ba504.json'},function(e,t,a){e.exports=a.p+'assets/layout/game_2f94a86fb040ea1c0a43d2e543ad80ab.json'},function(e,t,a){e.exports=a.p+'assets/layout/highscore_9073b6de6dadde1d977f551b70e42ee1.json'},function(e,t,a){e.exports=a.p+'assets/layout/ingame_9cf669d9ed1695f11aceeba3e621afcb.json'},function(e,t,a){e.exports=a.p+'assets/layout/menu_445f8f8d2cbc52ddfd1bf279a19349ad.json'},function(e,t,a){e.exports=a.p+'assets/layout/nameEntry_db0d470a50096e44bca6934cd93c00c9.json'},function(e,t,a){e.exports=a.p+'assets/layout/popupBuy_34f9a4137e00adabd2af6bdbac73dc0c.json'},function(e,t,a){e.exports=a.p+'assets/layout/popupUnlock_c31753291351a92472f5246656ff2349.json'},function(e,t,a){e.exports=a.p+'assets/layout/preload_7399a23fad5b7aa59e94f499808e200e.json'},function(e,t,a){e.exports=a.p+'assets/layout/shop_44344a7db3f259feda902241b16deb7c.json'},function(e,t,a){e.exports=a.p+'assets/layout/start_5122d6dfc5b65a2b53382fb6c341785b.json'},function(e,t,a){e.exports=a.p+'assets/layout/tutorial_9834d538119a1c3d43f7a4cc1f3e31d1.json'},function(e,t,a){e.exports=a.p+'assets/layout/unlock_cf91ce7c8b21fae8717b3a322bb2582a.json'},function(e,t,a){e.exports=a.p+'assets/model/char_01_75da366062b9d4da832c97f0e89c8d24.json'},function(e,t,a){e.exports=a.p+'assets/model/coin_01_62dc1138b7194fb900a088a9d7eaa229.json'},function(e,t,a){e.exports=a.p+'assets/model/coin_02_7eea6ea857ff4097427458e27721297a.json'},function(e,t,a){e.exports=a.p+'assets/model/coin_03_710e2976e9cecd26ee7659431583fbe0.json'},function(e,t,a){e.exports=a.p+'assets/model/collectible_254a4521d366a02a3d18af7c9f0d6b84.json'},function(e,t,a){e.exports=a.p+'assets/model/drivers/driver_01_01_8736f2ed0905fbeda7188c06417057b3.json'},function(e,t,a){e.exports=a.p+'assets/model/drivers/driver_01_02_7a353df0dc0cd74882db4d243dd014ec.json'},function(e,t,a){e.exports=a.p+'assets/model/drivers/driver_01_03_f402a27abe6c8a979beaaab90ae7adf5.json'},function(e,t,a){e.exports=a.p+'assets/model/drivers/driver_02_01_451630d89f84708a5388aa4aa054e47f.json'},function(e,t,a){e.exports=a.p+'assets/model/drivers/driver_02_02_b9b21aac6b9e73e5e054e59d54d205e6.json'},function(e,t,a){e.exports=a.p+'assets/model/drivers/driver_02_03_00e1adcb45a73dc5d1b664c4494609f1.json'},function(e,t,a){e.exports=a.p+'assets/model/drivers/driver_03_01_f839d620c701946e47300405f5c188c5.json'},function(e,t,a){e.exports=a.p+'assets/model/drivers/driver_03_02_e9a568bbc67d72b627fd82db37967cc2.json'},function(e,t,a){e.exports=a.p+'assets/model/drivers/driver_03_03_c6da65b74633ac85c02cbb9f3f94e578.json'},function(e,t,a){e.exports=a.p+'assets/model/sky_7cebc33a0a41358b58df110539cc9d50.json'},function(e,t,a){e.exports=a.p+'assets/model/tracks_f47efccdebe20f87920827a140308ded.json'},function(e,t,a){e.exports=a.p+'assets/model/vehicles/vehicle_01_00fc5b721b83986980e334cb5e0c9da4.json'},function(e,t,a){e.exports=a.p+'assets/model/vehicles/vehicle_02_b283c501d74a6ecfcc82dfbad75ee00b.json'},function(e,t,a){e.exports=a.p+'assets/model/vehicles/vehicle_03_77568266c2ab71f6425119c59fde8f23.json'},function(e,t,a){e.exports=a.p+'assets/particles/magnet_b4e82130fb938614bc59abbdaf5c7be6.json'},function(e,t,a){e.exports=a.p+'assets/particles/toonCloudEffect_c9efaa976cab946f36671473c2c61d07.json'},function(e,t,a){e.exports=a.p+'assets/particles/vehicle_01_6ad3bd9c8dd0dade45f08f5238f09d73.json'},function(e,t,a){e.exports=a.p+'assets/particles/vehicle_02_03_40691955b3045cffc6177ed1d1083ef2.json'},function(e,t,a){e.exports=a.p+'assets/particles/vehicle_03_01_00acf6b80816d8f60dd70aa40cc8d1ae.json'},function(e,t,a){e.exports=a.p+'assets/particles/vehicle_03_02_a80ac9344d42110f1961def306f8eb2b.json'},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});var a=t.NONE=0,o=t.SCALING_ENABLED_MOBILE=1,r=t.SCALING_ENABLED_DESKTOP=2,n=t.SCALING_ENABLED_IFRAME=4,i=t.LOCK_ORIENTATION_MOBILE=2,s=t.LOCK_ORIENTATION_DESKTOP=4,l=t.FULLSCREEN_MOBILE=2,d=t.FULLSCREEN_DESKTOP=4},function(e,t,a){Object.defineProperty(t,'__esModule',{value:!0});var o=a(70),r=function(e){return e&&e.__esModule?e:{default:e}}(o),n=function(e,t){this.game=e,this.config=this.game.cache.getJSON('config'),this.consumables=t?t:new r['default'](this.game),this.CurrencyTypes={COIN_01:0,COIN_02:1,COIN_03:2,properties:{0:{name:'copper',json:'coin_01',dropRate:{default:0,powerup:0},value:1,affectedBy:this.consumables.Consumables.CURRENCY},1:{name:'silver',json:'coin_02',dropRate:{default:0,powerup:0},value:5,affectedBy:this.consumables.Consumables.CURRENCY},2:{name:'gold',json:'coin_03',dropRate:{default:0,powerup:0},value:10,affectedBy:this.consumables.Consumables.CURRENCY}}},this.CollectableTypes={MAGNET:0,properties:{0:{name:'magnet',json:'collectable_01',dropRate:{default:0,powerup:0},affectedBy:this.consumables.Consumables.MAGNET,count:0}}},this.PickupType={CURRENCY:0,COLLECTABLE:1},this.CURRENCY_TYPE_COUNT=Object.keys(this.CurrencyTypes.properties).length,this.COLLECTABLE_TYPE_COUNT=Object.keys(this.CollectableTypes.properties).length,this.dropList=[],this.initializeDropRates();for(var a=0,o;a<this.CURRENCY_TYPE_COUNT;a++)o=this.CurrencyTypes.properties[a].name,this.CurrencyTypes.properties[a].value=this.config.currencyValues[o]};n.prototype.populateDropList=function(){this.dropList=[];for(var e=0,t=0;t<this.CURRENCY_TYPE_COUNT;t++){e=this.consumables.isActive(this.CurrencyTypes.properties[t].affectedBy)?this.CurrencyTypes.properties[t].dropRate.powerup:this.CurrencyTypes.properties[t].dropRate['default'];for(var a=0;a<e;a++)this.dropList.push({pickupType:this.PickupType.CURRENCY,subType:t})}for(var o=0;o<this.COLLECTABLE_TYPE_COUNT;o++){e=this.consumables.isActive(this.CollectableTypes.properties[o].affectedBy)?this.CollectableTypes.properties[o].dropRate.powerup:this.CollectableTypes.properties[o].dropRate['default'];for(var r=0;r<e;r++)this.dropList.push({pickupType:this.PickupType.COLLECTABLE,subType:o})}this.dropList=this.shuffleArray(this.dropList)},n.prototype.popDropList=function(){return 0===this.dropList.length&&this.populateDropList(),this.dropList.pop()},n.prototype.initializeDropRates=function(){for(var e=0;e<this.CURRENCY_TYPE_COUNT;e++)this.CurrencyTypes.properties[e].dropRate['default']=this.config.dropRates.currency[this.CurrencyTypes.properties[e].name]['default'],this.CurrencyTypes.properties[e].dropRate.powerup=this.config.dropRates.currency[this.CurrencyTypes.properties[e].name].powerup;for(var t=0;t<this.COLLECTABLE_TYPE_COUNT;t++)this.CollectableTypes.properties[t].dropRate['default']=this.config.dropRates.collectables[this.CollectableTypes.properties[t].name]['default'],this.CollectableTypes.properties[t].dropRate.powerup=this.config.dropRates.collectables[this.CollectableTypes.properties[t].name].powerup},n.prototype.incrementCollectableCount=function(e){this.CollectableTypes.properties[e].count++},n.prototype.getCollectableCount=function(e){return this.CollectableTypes.properties[e].count},n.prototype.shuffleArray=function(e){for(var t=e.length,a,o;0!==t;)o=Math.floor(Math.random()*t),t-=1,a=e[t],e[t]=e[o],e[o]=a;return e},n.prototype.getCurrencyValue=function(e){return this.CurrencyTypes.properties[e].value},t['default']=n},function(e,t,a){a(202),e.exports=a(404)},function(e,t,a){'use strict';(function(e){function t(e,t,a){e[t]||Object[o](e,t,{writable:!0,configurable:!0,value:a})}if(a(203),a(400),a(401),e._babelPolyfill)throw new Error('only one instance of babel-polyfill is allowed');e._babelPolyfill=!0;var o='defineProperty';t(String.prototype,'padLeft',''.padStart),t(String.prototype,'padRight',''.padEnd),['pop','reverse','shift','keys','values','entries','indexOf','every','some','forEach','map','filter','find','findIndex','includes','join','slice','concat','push','splice','unshift','sort','lastIndexOf','reduce','reduceRight','copyWithin','fill'].forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(t,a(45))},function(e,t,a){a(204),a(206),a(207),a(208),a(209),a(210),a(211),a(212),a(213),a(214),a(215),a(216),a(217),a(218),a(219),a(220),a(222),a(223),a(224),a(225),a(226),a(227),a(228),a(229),a(230),a(231),a(232),a(233),a(234),a(235),a(236),a(237),a(238),a(239),a(240),a(241),a(242),a(243),a(244),a(245),a(246),a(247),a(248),a(249),a(250),a(251),a(252),a(253),a(254),a(255),a(256),a(257),a(258),a(259),a(260),a(261),a(262),a(263),a(264),a(265),a(266),a(267),a(268),a(269),a(270),a(271),a(272),a(273),a(274),a(275),a(276),a(277),a(278),a(279),a(280),a(281),a(282),a(284),a(285),a(287),a(288),a(289),a(290),a(291),a(292),a(293),a(295),a(296),a(297),a(298),a(299),a(300),a(301),a(302),a(303),a(304),a(305),a(306),a(307),a(92),a(308),a(309),a(117),a(310),a(311),a(312),a(313),a(314),a(120),a(122),a(123),a(315),a(316),a(317),a(318),a(319),a(320),a(321),a(322),a(323),a(324),a(325),a(326),a(327),a(328),a(329),a(330),a(331),a(332),a(333),a(334),a(335),a(336),a(337),a(338),a(339),a(340),a(341),a(342),a(343),a(344),a(345),a(346),a(347),a(348),a(349),a(350),a(351),a(352),a(353),a(354),a(355),a(356),a(357),a(358),a(359),a(360),a(361),a(362),a(363),a(364),a(365),a(366),a(367),a(368),a(369),a(370),a(371),a(372),a(373),a(374),a(375),a(376),a(377),a(378),a(379),a(380),a(381),a(382),a(383),a(384),a(385),a(386),a(387),a(388),a(389),a(390),a(391),a(392),a(393),a(394),a(395),a(396),a(397),a(398),a(399),e.exports=a(23)},function(e,t,a){'use strict';var o=a(2),r=a(11),n=a(6),i=a(0),s=a(13),l=a(31).KEY,d=a(3),p=a(56),c=a(46),u=a(35),y=a(5),g=a(100),m=a(72),f=a(205),h=a(59),b=a(1),v=a(15),_=a(24),x=a(34),S=a(39),T=a(103),E=a(16),C=a(7),I=a(37),P=E.f,O=C.f,w=T.f,A=o.Symbol,R=o.JSON,L=R&&R.stringify,D='prototype',N=y('_hidden'),M=y('toPrimitive'),U={}.propertyIsEnumerable,B=p('symbol-registry'),V=p('symbols'),F=p('op-symbols'),z=Object[D],G='function'==typeof A,H=o.QObject,K=!H||!H[D]||!H[D].findChild,W=n&&d(function(){return 7!=S(O({},'a',{get:function(){return O(this,'a',{value:7}).a}})).a})?function(e,t,a){var o=P(z,t);o&&delete z[t],O(e,t,a),o&&e!==z&&O(z,t,o)}:O,Y=function(e){var t=V[e]=S(A[D]);return t._k=e,t},J=G&&'symbol'==typeof A.iterator?function(e){return'symbol'==typeof e}:function(e){return e instanceof A},X=function(e,t,a){return e===z&&X(F,t,a),b(e),t=_(t,!0),b(a),r(V,t)?(a.enumerable?(r(e,N)&&e[N][t]&&(e[N][t]=!1),a=S(a,{enumerable:x(0,!1)})):(!r(e,N)&&O(e,N,x(1,{})),e[N][t]=!0),W(e,t,a)):O(e,t,a)},Z=function(e,t){b(e);for(var a=f(t=v(t)),o=0,r=a.length,n;r>o;)X(e,n=a[o++],t[n]);return e},q=function(e){var t=U.call(this,e=_(e,!0));return(this!==z||!r(V,e)||r(F,e))&&(!(t||!r(this,e)||!r(V,e)||r(this,N)&&this[N][e])||t)},$=function(e,t){if(e=v(e),t=_(t,!0),e!==z||!r(V,t)||r(F,t)){var a=P(e,t);return a&&r(V,t)&&!(r(e,N)&&e[N][t])&&(a.enumerable=!0),a}},Q=function(e){for(var t=w(v(e)),a=[],o=0,n;t.length>o;)r(V,n=t[o++])||n==N||n==l||a.push(n);return a},ee=function(e){for(var t=e===z,a=w(t?F:v(e)),o=[],n=0,i;a.length>n;)r(V,i=a[n++])&&(!t||r(z,i))&&o.push(V[i]);return o};G||(A=function(){if(this instanceof A)throw TypeError('Symbol is not a constructor!');var e=u(0<arguments.length?arguments[0]:void 0),t=function(a){this===z&&t.call(F,a),r(this,N)&&r(this[N],e)&&(this[N][e]=!1),W(this,e,x(1,a))};return n&&K&&W(z,e,{configurable:!0,set:t}),Y(e)},s(A[D],'toString',function(){return this._k}),E.f=$,C.f=X,a(40).f=T.f=Q,a(52).f=q,a(58).f=ee,n&&!a(36)&&s(z,'propertyIsEnumerable',q,!0),g.f=function(e){return Y(y(e))}),i(i.G+i.W+i.F*!G,{Symbol:A});for(var te=['hasInstance','isConcatSpreadable','iterator','match','replace','search','species','split','toPrimitive','toStringTag','unscopables'],ae=0;te.length>ae;)y(te[ae++]);for(var j=I(y.store),oe=0;j.length>oe;)m(j[oe++]);i(i.S+i.F*!G,'Symbol',{for:function(e){return r(B,e+='')?B[e]:B[e]=A(e)},keyFor:function(e){if(!J(e))throw TypeError(e+' is not a symbol!');for(var t in B)if(B[t]===e)return t},useSetter:function(){K=!0},useSimple:function(){K=!1}}),i(i.S+i.F*!G,'Object',{create:function(e,t){return t===void 0?S(e):Z(S(e),t)},defineProperty:X,defineProperties:Z,getOwnPropertyDescriptor:$,getOwnPropertyNames:Q,getOwnPropertySymbols:ee}),R&&i(i.S+i.F*(!G||d(function(){var e=A();return'[null]'!=L([e])||'{}'!=L({a:e})||'{}'!=L(Object(e))})),'JSON',{stringify:function(e){if(!(void 0===e||J(e))){for(var t=[e],a=1,o,r;arguments.length>a;)t.push(arguments[a++]);return o=t[1],'function'==typeof o&&(r=o),(r||!h(o))&&(o=function(e,t){if(r&&(t=r.call(this,e,t)),!J(t))return t}),t[1]=o,L.apply(R,t)}}}),A[D][M]||a(12)(A[D],M,A[D].valueOf),c(A,'Symbol'),c(Math,'Math',!0),c(o.JSON,'JSON',!0)},function(e,t,a){var o=a(37),r=a(58),n=a(52);e.exports=function(e){var t=o(e),a=r.f;if(a)for(var s=a(e),l=n.f,d=0,i;s.length>d;)l.call(e,i=s[d++])&&t.push(i);return t}},function(e,t,a){var o=a(0);o(o.S,'Object',{create:a(39)})},function(e,t,a){var o=a(0);o(o.S+o.F*!a(6),'Object',{defineProperty:a(7).f})},function(e,t,a){var o=a(0);o(o.S+o.F*!a(6),'Object',{defineProperties:a(102)})},function(e,t,a){var o=a(15),r=a(16).f;a(27)('getOwnPropertyDescriptor',function(){return function(e,t){return r(o(e),t)}})},function(e,t,a){var o=a(9),r=a(17);a(27)('getPrototypeOf',function(){return function(e){return r(o(e))}})},function(e,t,a){var o=a(9),r=a(37);a(27)('keys',function(){return function(e){return r(o(e))}})},function(e,t,a){a(27)('getOwnPropertyNames',function(){return a(103).f})},function(e,t,a){var o=a(4),r=a(31).onFreeze;a(27)('freeze',function(e){return function(t){return e&&o(t)?e(r(t)):t}})},function(e,t,a){var o=a(4),r=a(31).onFreeze;a(27)('seal',function(e){return function(t){return e&&o(t)?e(r(t)):t}})},function(e,t,a){var o=a(4),r=a(31).onFreeze;a(27)('preventExtensions',function(e){return function(t){return e&&o(t)?e(r(t)):t}})},function(e,t,a){var o=a(4);a(27)('isFrozen',function(e){return function(t){return!o(t)||!!e&&e(t)}})},function(e,t,a){var o=a(4);a(27)('isSealed',function(e){return function(t){return!o(t)||!!e&&e(t)}})},function(e,t,a){var o=a(4);a(27)('isExtensible',function(e){return function(t){return!!o(t)&&(!e||e(t))}})},function(e,t,a){var o=a(0);o(o.S+o.F,'Object',{assign:a(104)})},function(e,t,a){var o=a(0);o(o.S,'Object',{is:a(221)})},function(e){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,a){var o=a(0);o(o.S,'Object',{setPrototypeOf:a(76).set})},function(e,t,a){'use strict';var o=a(53);({})[a(5)('toStringTag')]='z',a(13)(Object.prototype,'toString',function(){return'[object '+o(this)+']'},!0)},function(e,t,a){var o=a(0);o(o.P,'Function',{bind:a(105)})},function(e,t,a){var o=a(7).f,r=Function.prototype,n=/^\s*function ([^ (]*)/,i='name';i in r||a(6)&&o(r,i,{configurable:!0,get:function(){try{return(''+this).match(n)[1]}catch(t){return''}}})},function(e,t,a){'use strict';var o=a(4),r=a(17),n=a(5)('hasInstance'),i=Function.prototype;n in i||a(7).f(i,n,{value:function(e){if('function'!=typeof this||!o(e))return!1;if(!o(this.prototype))return e instanceof this;for(;e=r(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,a){var o=a(0),r=a(107);o(o.G+o.F*(parseInt!=r),{parseInt:r})},function(e,t,a){var o=a(0),r=a(108);o(o.G+o.F*(parseFloat!=r),{parseFloat:r})},function(e,t,a){'use strict';var o=a(2),r=a(11),n=a(20),i=a(78),s=a(24),l=a(3),d=a(40).f,p=a(16).f,c=a(7).f,u=a(47).trim,y='Number',g=o[y],m=g,f=g.prototype,h=n(a(39)(f))==y,b='trim'in String.prototype,v=function(e){var t=s(e,!1);if('string'==typeof t&&2<t.length){t=b?t.trim():u(t,3);var a=t.charCodeAt(0),o,r,n;if(43===a||45===a){if(o=t.charCodeAt(2),88===o||120===o)return NaN;}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+t;}for(var d=t.slice(2),p=0,i=d.length,l;p<i;p++)if(l=d.charCodeAt(p),48>l||l>n)return NaN;return parseInt(d,r)}}return+t};if(!g(' 0o1')||!g('0b1')||g('+0x1')){g=function(e){var t=1>arguments.length?0:e,a=this;return a instanceof g&&(h?l(function(){f.valueOf.call(a)}):n(a)!=y)?i(new m(v(t)),a,g):v(t)};for(var _=a(6)?d(m):'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'.split(','),x=0,S;_.length>x;x++)r(m,S=_[x])&&!r(g,S)&&c(g,S,p(m,S));g.prototype=f,f.constructor=g,a(13)(o,y,g)}},function(e,t,a){'use strict';var o=a(0),r=a(26),n=a(109),l=a(79),i=1 .toFixed,s=Math.floor,d=[0,0,0,0,0,0],p='Number.toFixed: incorrect invocation!',c='0',u=function(e,t){for(var a=-1,o=t;6>++a;)o+=e*d[a],d[a]=o%1e7,o=s(o/1e7)},y=function(e){for(var t=6,a=0;0<=--t;)a+=d[t],d[t]=s(a/e),a=1e7*(a%e)},g=function(){for(var e=6,a='';0<=--e;)if(''!==a||0===e||0!==d[e]){var o=d[e]+'';a=''===a?o:a+l.call(c,7-o.length)+o}return a},h=function(e,t,a){return 0===t?a:1==t%2?h(e,t-1,a*e):h(e*e,t/2,a)},b=function(e){for(var t=0,a=e;4096<=a;)t+=12,a/=4096;for(;2<=a;)t+=1,a/=2;return t};o(o.P+o.F*('0.000'!==8e-5.toFixed(3)||'1'!==.9.toFixed(0)||'1.25'!==1.255.toFixed(2)||'1000000000000000128'!==1000000000000000100 .toFixed(0)||!a(3)(function(){i.call({})})),'Number',{toFixed:function(t){var a=n(this,p),o=r(t),i='',s=c,d,m,f,v;if(0>o||20<o)throw RangeError(p);if(a!=a)return'NaN';if(-1e21>=a||1e21<=a)return a+'';if(0>a&&(i='-',a=-a),1e-21<a)if(d=b(a*h(2,69,1))-69,m=0>d?a*h(2,-d,1):a/h(2,d,1),m*=4503599627370496,d=52-d,0<d){for(u(0,m),f=o;7<=f;)u(1e7,0),f-=7;for(u(h(10,f,1),0),f=d-1;23<=f;)y(8388608),f-=23;y(1<<f),u(1,1),y(2),s=g()}else u(0,m),u(1<<-d,0),s=g()+l.call(c,o);return 0<o?(v=s.length,s=i+(v<=o?'0.'+l.call(c,o-v)+s:s.slice(0,v-o)+'.'+s.slice(v-o))):s=i+s,s}})},function(e,t,a){'use strict';var o=a(0),r=a(3),n=a(109),i=1 .toPrecision;o(o.P+o.F*(r(function(){return'1'!==i.call(1,void 0)})||!r(function(){i.call({})})),'Number',{toPrecision:function(e){var t=n(this,'Number#toPrecision: incorrect invocation!');return e===void 0?i.call(t):i.call(t,e)}})},function(e,t,a){var o=a(0);o(o.S,'Number',{EPSILON:2.220446049250313e-16})},function(e,t,a){var o=a(0),r=a(2).isFinite;o(o.S,'Number',{isFinite:function(e){return'number'==typeof e&&r(e)}})},function(e,t,a){var o=a(0);o(o.S,'Number',{isInteger:a(110)})},function(e,t,a){var o=a(0);o(o.S,'Number',{isNaN:function(e){return e!=e}})},function(e,t,a){var o=a(0),r=a(110),n=Math.abs;o(o.S,'Number',{isSafeInteger:function(e){return r(e)&&9007199254740991>=n(e)}})},function(e,t,a){var o=a(0);o(o.S,'Number',{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,a){var o=a(0);o(o.S,'Number',{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,a){var o=a(0),r=a(108);o(o.S+o.F*(Number.parseFloat!=r),'Number',{parseFloat:r})},function(e,t,a){var o=a(0),r=a(107);o(o.S+o.F*(Number.parseInt!=r),'Number',{parseInt:r})},function(e,t,a){var o=a(0),r=a(111),n=Math.sqrt,i=Math.acosh;o(o.S+o.F*!(i&&710==Math.floor(i(Number.MAX_VALUE))&&i(Infinity)==Infinity),'Math',{acosh:function(e){return 1>(e=+e)?NaN:94906265.62425156<e?Math.log(e)+Math.LN2:r(e-1+n(e-1)*n(e+1))}})},function(e,t,a){function o(e){return isFinite(e=+e)&&0!=e?0>e?-o(-e):Math.log(e+Math.sqrt(e*e+1)):e}var r=a(0),n=Math.asinh;r(r.S+r.F*!(n&&0<1/n(0)),'Math',{asinh:o})},function(e,t,a){var o=a(0),r=Math.atanh;o(o.S+o.F*!(r&&0>1/r(-0)),'Math',{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,a){var o=a(0),r=a(80);o(o.S,'Math',{cbrt:function(e){return r(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,a){var o=a(0);o(o.S,'Math',{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,a){var o=a(0),r=Math.exp;o(o.S,'Math',{cosh:function(e){return(r(e=+e)+r(-e))/2}})},function(e,t,a){var o=a(0),r=a(81);o(o.S+o.F*(r!=Math.expm1),'Math',{expm1:r})},function(e,t,a){var o=a(0);o(o.S,'Math',{fround:a(112)})},function(e,t,a){var o=a(0),r=Math.abs;o(o.S,'Math',{hypot:function(){for(var e=0,t=0,a=arguments.length,o=0,n,i;t<a;)n=r(arguments[t++]),o<n?(i=o/n,e=e*i*i+1,o=n):0<n?(i=n/o,e+=i*i):e+=n;return o==Infinity?Infinity:o*Math.sqrt(e)}})},function(e,t,a){var o=a(0),r=Math.imul;o(o.S+o.F*a(3)(function(){return-5!=r(4294967295,5)||2!=r.length}),'Math',{imul:function(e,t){var a=65535,o=+e,r=+t,n=a&o,i=a&r;return 0|n*i+((a&o>>>16)*i+n*(a&r>>>16)<<16>>>0)}})},function(e,t,a){var o=a(0);o(o.S,'Math',{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,a){var o=a(0);o(o.S,'Math',{log1p:a(111)})},function(e,t,a){var o=a(0);o(o.S,'Math',{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,a){var o=a(0);o(o.S,'Math',{sign:a(80)})},function(e,t,a){var o=a(0),r=a(81),n=Math.exp;o(o.S+o.F*a(3)(function(){return!0}),'Math',{sinh:function(e){return 1>Math.abs(e=+e)?(r(e)-r(-e))/2:(n(e-1)-n(-e-1))*(Math.E/2)}})},function(e,t,a){var o=a(0),r=a(81),n=Math.exp;o(o.S,'Math',{tanh:function(e){var t=r(e=+e),a=r(-e);return t==Infinity?1:a==Infinity?-1:(t-a)/(n(e)+n(-e))}})},function(e,t,a){var o=a(0);o(o.S,'Math',{trunc:function(e){return(0<e?Math.floor:Math.ceil)(e)}})},function(e,t,a){var o=a(0),r=a(38),n=String.fromCharCode,i=String.fromCodePoint;o(o.S+o.F*(!!i&&1!=i.length),'String',{fromCodePoint:function(){for(var e=[],t=arguments.length,a=0,o;t>a;){if(o=+arguments[a++],r(o,1114111)!==o)throw RangeError(o+' is not a valid code point');e.push(65536>o?n(o):n(((o-=65536)>>10)+55296,o%1024+56320))}return e.join('')}})},function(e,t,a){var o=a(0),r=a(15),n=a(8);o(o.S,'String',{raw:function(e){for(var t=r(e.raw),a=n(t.length),o=arguments.length,s=[],l=0;a>l;)s.push(t[l++]+''),l<o&&s.push(arguments[l]+'');return s.join('')}})},function(e,t,a){'use strict';a(47)('trim',function(e){return function(){return e(this,3)}})},function(e,t,a){'use strict';var o=a(82)(!0);a(83)(String,'String',function(e){this._t=e+'',this._i=0},function(){var e=this._t,t=this._i,a;return t>=e.length?{value:void 0,done:!0}:(a=o(e,t),this._i+=a.length,{value:a,done:!1})})},function(e,t,a){'use strict';var o=a(0),r=a(82)(!1);o(o.P,'String',{codePointAt:function(e){return r(this,e)}})},function(e,t,a){'use strict';var o=a(0),r=a(8),n=a(85),i='endsWith',s=''[i];o(o.P+o.F*a(86)(i),'String',{endsWith:function(e){var t=n(this,e,i),a=1<arguments.length?arguments[1]:void 0,o=r(t.length),s=a===void 0?o:Math.min(r(a),o),l=e+'';return t.slice(s-l.length,s)===l}})},function(e,t,a){'use strict';var o=a(0),r=a(85),n='includes';o(o.P+o.F*a(86)(n),'String',{includes:function(e){return!!~r(this,e,n).indexOf(e,1<arguments.length?arguments[1]:void 0)}})},function(e,t,a){var o=a(0);o(o.P,'String',{repeat:a(79)})},function(e,t,a){'use strict';var o=a(0),r=a(8),n=a(85),i='startsWith',s=''[i];o(o.P+o.F*a(86)(i),'String',{startsWith:function(e){var t=n(this,e,i),a=r(Math.min(1<arguments.length?arguments[1]:void 0,t.length)),o=e+'';return t.slice(a,a+o.length)===o}})},function(e,t,a){'use strict';a(14)('anchor',function(e){return function(t){return e(this,'a','name',t)}})},function(e,t,a){'use strict';a(14)('big',function(e){return function(){return e(this,'big','','')}})},function(e,t,a){'use strict';a(14)('blink',function(e){return function(){return e(this,'blink','','')}})},function(e,t,a){'use strict';a(14)('bold',function(e){return function(){return e(this,'b','','')}})},function(e,t,a){'use strict';a(14)('fixed',function(e){return function(){return e(this,'tt','','')}})},function(e,t,a){'use strict';a(14)('fontcolor',function(e){return function(t){return e(this,'font','color',t)}})},function(e,t,a){'use strict';a(14)('fontsize',function(e){return function(t){return e(this,'font','size',t)}})},function(e,t,a){'use strict';a(14)('italics',function(e){return function(){return e(this,'i','','')}})},function(e,t,a){'use strict';a(14)('link',function(e){return function(t){return e(this,'a','href',t)}})},function(e,t,a){'use strict';a(14)('small',function(e){return function(){return e(this,'small','','')}})},function(e,t,a){'use strict';a(14)('strike',function(e){return function(){return e(this,'strike','','')}})},function(e,t,a){'use strict';a(14)('sub',function(e){return function(){return e(this,'sub','','')}})},function(e,t,a){'use strict';a(14)('sup',function(e){return function(){return e(this,'sup','','')}})},function(e,t,a){var o=a(0);o(o.S,'Date',{now:function(){return new Date().getTime()}})},function(e,t,a){'use strict';var o=a(0),r=a(9),n=a(24);o(o.P+o.F*a(3)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),'Date',{toJSON:function(){var e=r(this),t=n(e);return'number'!=typeof t||isFinite(t)?e.toISOString():null}})},function(e,t,a){var o=a(0),r=a(283);o(o.P+o.F*(Date.prototype.toISOString!==r),'Date',{toISOString:r})},function(e,t,a){'use strict';var o=a(3),r=Date.prototype.getTime,n=Date.prototype.toISOString,i=function(e){return 9<e?e:'0'+e};e.exports=o(function(){return'0385-07-25T07:06:39.999Z'!=n.call(new Date(-50000000000001))})||!o(function(){n.call(new Date(NaN))})?function(){if(!isFinite(r.call(this)))throw RangeError('Invalid time value');var e=this,t=e.getUTCFullYear(),a=e.getUTCMilliseconds(),o=0>t?'-':9999<t?'+':'';return o+('00000'+Math.abs(t)).slice(o?-6:-4)+'-'+i(e.getUTCMonth()+1)+'-'+i(e.getUTCDate())+'T'+i(e.getUTCHours())+':'+i(e.getUTCMinutes())+':'+i(e.getUTCSeconds())+'.'+(99<a?a:'0'+i(a))+'Z'}:n},function(e,t,a){var o=Date.prototype,r='Invalid Date',n='toString',i=o[n],s=o.getTime;new Date(NaN)+''!=r&&a(13)(o,n,function(){var e=s.call(this);return e===e?i.call(this):r})},function(e,t,a){var o=a(5)('toPrimitive'),r=Date.prototype;o in r||a(12)(r,o,a(286))},function(e,t,a){'use strict';var o=a(1),r=a(24),n='number';e.exports=function(e){if('string'!==e&&e!==n&&'default'!==e)throw TypeError('Incorrect hint');return r(o(this),e!=n)}},function(e,t,a){var o=a(0);o(o.S,'Array',{isArray:a(59)})},function(e,t,a){'use strict';var o=a(19),r=a(0),n=a(9),i=a(113),s=a(87),l=a(8),d=a(88),p=a(89);r(r.S+r.F*!a(61)(function(e){Array.from(e)}),'Array',{from:function(e){var t=n(e),a='function'==typeof this?this:Array,r=arguments.length,c=1<r?arguments[1]:void 0,u=void 0!==c,y=0,g=p(t),m,f,h,b;if(u&&(c=o(c,2<r?arguments[2]:void 0,2)),void 0!=g&&!(a==Array&&s(g)))for(b=g.call(t),f=new a;!(h=b.next()).done;y++)d(f,y,u?i(b,c,[h.value,y],!0):h.value);else for(m=l(t.length),f=new a(m);m>y;y++)d(f,y,u?c(t[y],y):t[y]);return f.length=y,f}})},function(e,t,a){'use strict';var o=a(0),r=a(88);o(o.S+o.F*a(3)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),'Array',{of:function(){for(var e=0,t=arguments.length,a=new('function'==typeof this?this:Array)(t);t>e;)r(a,e,arguments[e++]);return a.length=t,a}})},function(e,t,a){'use strict';var o=a(0),r=a(15),n=[].join;o(o.P+o.F*(a(51)!=Object||!a(21)(n)),'Array',{join:function(e){return n.call(r(this),e===void 0?',':e)}})},function(e,t,a){'use strict';var o=a(0),r=a(75),n=a(20),s=a(38),l=a(8),d=[].slice;o(o.P+o.F*a(3)(function(){r&&d.call(r)}),'Array',{slice:function(e,t){var a=l(this.length),o=n(this);if(t=void 0===t?a:t,'Array'==o)return d.call(this,e,t);for(var r=s(e,a),p=s(t,a),c=l(p-r),u=Array(c),y=0;y<c;y++)u[y]='String'==o?this.charAt(r+y):this[r+y];return u}})},function(e,t,a){'use strict';var o=a(0),r=a(10),n=a(9),i=a(3),s=[].sort,l=[1,2,3];o(o.P+o.F*(i(function(){l.sort(void 0)})||!i(function(){l.sort(null)})||!a(21)(s)),'Array',{sort:function(e){return e===void 0?s.call(n(this)):s.call(n(this),r(e))}})},function(e,t,a){'use strict';var o=a(0),r=a(28)(0),n=a(21)([].forEach,!0);o(o.P+o.F*!n,'Array',{forEach:function(e){return r(this,e,arguments[1])}})},function(e,t,a){var o=a(4),r=a(59),n=a(5)('species');e.exports=function(e){var t;return r(e)&&(t=e.constructor,'function'==typeof t&&(t===Array||r(t.prototype))&&(t=void 0),o(t)&&(t=t[n],null===t&&(t=void 0))),void 0===t?Array:t}},function(e,t,a){'use strict';var o=a(0),r=a(28)(1);o(o.P+o.F*!a(21)([].map,!0),'Array',{map:function(e){return r(this,e,arguments[1])}})},function(e,t,a){'use strict';var o=a(0),r=a(28)(2);o(o.P+o.F*!a(21)([].filter,!0),'Array',{filter:function(e){return r(this,e,arguments[1])}})},function(e,t,a){'use strict';var o=a(0),r=a(28)(3);o(o.P+o.F*!a(21)([].some,!0),'Array',{some:function(e){return r(this,e,arguments[1])}})},function(e,t,a){'use strict';var o=a(0),r=a(28)(4);o(o.P+o.F*!a(21)([].every,!0),'Array',{every:function(e){return r(this,e,arguments[1])}})},function(e,t,a){'use strict';var o=a(0),r=a(114);o(o.P+o.F*!a(21)([].reduce,!0),'Array',{reduce:function(e){return r(this,e,arguments.length,arguments[1],!1)}})},function(e,t,a){'use strict';var o=a(0),r=a(114);o(o.P+o.F*!a(21)([].reduceRight,!0),'Array',{reduceRight:function(e){return r(this,e,arguments.length,arguments[1],!0)}})},function(e,t,a){'use strict';var o=a(0),r=a(57)(!1),n=[].indexOf,i=!!n&&0>1/[1].indexOf(1,-0);o(o.P+o.F*(i||!a(21)(n)),'Array',{indexOf:function(e){return i?n.apply(this,arguments)||0:r(this,e,arguments[1])}})},function(e,t,a){'use strict';var o=a(0),r=a(15),n=a(26),i=a(8),s=[].lastIndexOf,l=!!s&&0>1/[1].lastIndexOf(1,-0);o(o.P+o.F*(l||!a(21)(s)),'Array',{lastIndexOf:function(e){if(l)return s.apply(this,arguments)||0;var t=r(this),a=i(t.length),o=a-1;for(1<arguments.length&&(o=Math.min(o,n(arguments[1]))),0>o&&(o=a+o);0<=o;o--)if(o in t&&t[o]===e)return o||0;return-1}})},function(e,t,a){var o=a(0);o(o.P,'Array',{copyWithin:a(115)}),a(32)('copyWithin')},function(e,t,a){var o=a(0);o(o.P,'Array',{fill:a(91)}),a(32)('fill')},function(e,t,a){'use strict';var o=a(0),r=a(28)(5),n='find',i=!0;n in[]&&[,][n](function(){i=!1}),o(o.P+o.F*i,'Array',{find:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}}),a(32)(n)},function(e,t,a){'use strict';var o=a(0),r=a(28)(6),n='findIndex',i=!0;n in[]&&[,][n](function(){i=!1}),o(o.P+o.F*i,'Array',{findIndex:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}}),a(32)(n)},function(e,t,a){a(41)('Array')},function(e,t,a){var o=a(2),r=a(78),n=a(7).f,s=a(40).f,l=a(60),d=a(62),c=o.RegExp,u=c,y=c.prototype,p=/a/g,g=/a/g,m=new c(p)!==p;if(a(6)&&(!m||a(3)(function(){return g[a(5)('match')]=!1,c(p)!=p||c(g)==g||'/a/i'!=c(p,'i')}))){c=function(e,t){var a=this instanceof c,o=l(e),n=t===void 0;return!a&&o&&e.constructor===c&&n?e:r(m?new u(o&&!n?e.source:e,t):u((o=e instanceof c)?e.source:e,o&&n?d.call(e):t),a?this:y,c)};for(var f=function(e){(e in c)||n(c,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},h=s(u),b=0;h.length>b;)f(h[b++]);y.constructor=c,c.prototype=y,a(13)(o,'RegExp',c)}a(41)('RegExp')},function(e,t,a){'use strict';a(117);var o=a(1),r=a(62),n=a(6),i='toString',s=/./[i],l=function(e){a(13)(RegExp.prototype,i,e,!0)};a(3)(function(){return'/a/b'!=s.call({source:'a',flags:'b'})})?l(function(){var e=o(this);return'/'.concat(e.source,'/','flags'in e?e.flags:!n&&e instanceof RegExp?r.call(e):void 0)}):s.name!=i&&l(function(){return s.call(this)})},function(e,t,a){a(63)('match',1,function(e,t,a){return[function(a){'use strict';var o=e(this),r=a==void 0?void 0:a[t];return r===void 0?new RegExp(a)[t](o+''):r.call(a,o)},a]})},function(e,t,a){a(63)('replace',2,function(e,t,a){return[function(o,r){'use strict';var n=e(this),i=o==void 0?void 0:o[t];return i===void 0?a.call(n+'',o,r):i.call(o,n,r)},a]})},function(e,t,a){a(63)('search',1,function(e,t,a){return[function(a){'use strict';var o=e(this),r=a==void 0?void 0:a[t];return r===void 0?new RegExp(a)[t](o+''):r.call(a,o)},a]})},function(e,t,a){a(63)('split',2,function(e,t,o){'use strict';var r=a(60),n=o,s=[].push,i='split',l='length',d='lastIndex';if('c'=='abbc'[i](/(b)*/)[1]||4!='test'[i](/(?:)/,-1)[l]||2!='ab'[i](/(?:ab)*/)[l]||4!='.'[i](/(.?)(.?)/)[l]||1<'.'[i](/()()/)[l]||''[i](/.?/)[l]){var p=/()??/.exec('')[1]===void 0;o=function(e,t){var a=this+'';if(void 0===e&&0===t)return[];if(!r(e))return n.call(a,e,t);var o=[],c=(e.ignoreCase?'i':'')+(e.multiline?'m':'')+(e.unicode?'u':'')+(e.sticky?'y':''),u=0,y=void 0===t?4294967295:t>>>0,g=new RegExp(e.source,c+'g'),m,f,h,b,v;for(p||(m=new RegExp('^'+g.source+'$(?!\\s)',c));(f=g.exec(a))&&(h=f.index+f[0][l],!(h>u&&(o.push(a.slice(u,f.index)),!p&&1<f[l]&&f[0].replace(m,function(){for(v=1;v<arguments[l]-2;v++)void 0===arguments[v]&&(f[v]=void 0)}),1<f[l]&&f.index<a[l]&&s.apply(o,f.slice(1)),b=f[0][l],u=h,o[l]>=y)));)g[d]===f.index&&g[d]++;return u===a[l]?(b||!g.test(''))&&o.push(''):o.push(a.slice(u)),o[l]>y?o.slice(0,y):o}}else'0'[i](void 0,0)[l]&&(o=function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)});return[function(a,r){var n=e(this),i=a==void 0?void 0:a[t];return i===void 0?o.call(n+'',a,r):i.call(a,n,r)},o]})},function(e,t,a){'use strict';var o=a(36),r=a(2),n=a(19),i=a(53),s=a(0),l=a(4),d=a(10),p=a(42),c=a(43),u=a(64),y=a(93).set,g=a(94)(),m=a(95),f=a(118),h=a(119),b='Promise',v=r.TypeError,_=r.process,S=r[b],x='process'==i(_),T=function(){},E=D=m.f,C=!!function(){try{var e=S.resolve(1),t=(e.constructor={})[a(5)('species')]=function(e){e(T,T)};return(x||'function'==typeof PromiseRejectionEvent)&&e.then(T)instanceof t}catch(t){}}(),k=function(e){var t;return!!(l(e)&&'function'==typeof(t=e.then))&&t},I=function(e,t){if(!e._n){e._n=!0;var a=e._c;g(function(){for(var o=e._v,r=1==e._s,n=0,i=function(t){var a=r?t.ok:t.fail,n=t.resolve,i=t.reject,s=t.domain,l,d;try{a?(!r&&(2==e._h&&w(e),e._h=1),!0===a?l=o:(s&&s.enter(),l=a(o),s&&s.exit()),l===t.promise?i(v('Promise-chain cycle')):(d=k(l))?d.call(l,n,i):n(l)):i(o)}catch(t){i(t)}};a.length>n;)i(a[n++]);e._c=[],e._n=!1,t&&!e._h&&P(e)})}},P=function(e){y.call(r,function(){var t=e._v,a=O(e),o,n,i;if(a&&(o=f(function(){x?_.emit('unhandledRejection',t,e):(n=r.onunhandledrejection)?n({promise:e,reason:t}):(i=r.console)&&i.error&&i.error('Unhandled promise rejection',t)}),e._h=x||O(e)?2:1),e._a=void 0,a&&o.e)throw o.v})},O=function(e){if(1==e._h)return!1;for(var t=e._a||e._c,a=0,o;t.length>a;)if(o=t[a++],o.fail||!O(o.promise))return!1;return!0},w=function(e){y.call(r,function(){var t;x?_.emit('rejectionHandled',e):(t=r.onrejectionhandled)&&t({promise:e,reason:e._v})})},A=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,!t._a&&(t._a=t._c.slice()),I(t,!0))},R=function(e){var t=this,a;if(!t._d){t._d=!0,t=t._w||t;try{if(t===e)throw v('Promise can\'t be resolved itself');(a=k(e))?g(function(){var o={_w:t,_d:!1};try{a.call(e,n(R,o,1),n(A,o,1))}catch(t){A.call(o,t)}}):(t._v=e,t._s=1,I(t,!1))}catch(a){A.call({_w:t,_d:!1},a)}}},L,D,N,M;C||(S=function(e){p(this,S,b,'_h'),d(e),L.call(this);try{e(n(R,this,1),n(A,this,1))}catch(e){A.call(this,e)}},L=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},L.prototype=a(44)(S.prototype,{then:function(e,t){var a=E(u(this,S));return a.ok='function'!=typeof e||e,a.fail='function'==typeof t&&t,a.domain=x?_.domain:void 0,this._c.push(a),this._a&&this._a.push(a),this._s&&I(this,!1),a.promise},catch:function(e){return this.then(void 0,e)}}),N=function(){var e=new L;this.promise=e,this.resolve=n(R,e,1),this.reject=n(A,e,1)},m.f=E=function(e){return e===S||e===M?new N(e):D(e)}),s(s.G+s.W+s.F*!C,{Promise:S}),a(46)(S,b),a(41)(b),M=a(23)[b],s(s.S+s.F*!C,b,{reject:function(e){var t=E(this),a=t.reject;return a(e),t.promise}}),s(s.S+s.F*(o||!C),b,{resolve:function(e){return h(o&&this===M?S:this,e)}}),s(s.S+s.F*!(C&&a(61)(function(e){S.all(e)['catch'](T)})),b,{all:function(e){var t=this,a=E(t),o=a.resolve,r=a.reject,n=f(function(){var a=[],n=0,i=1;c(e,!1,function(e){var s=n++,l=!1;a.push(void 0),i++,t.resolve(e).then(function(e){l||(l=!0,a[s]=e,--i||o(a))},r)}),--i||o(a)});return n.e&&r(n.v),a.promise},race:function(e){var t=this,a=E(t),o=a.reject,r=f(function(){c(e,!1,function(e){t.resolve(e).then(a.resolve,o)})});return r.e&&o(r.v),a.promise}})},function(e,t,a){'use strict';var o=a(124),r=a(49),n='WeakSet';a(65)(n,function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return o.def(r(this,n),e,!0)}},o,!1,!0)},function(e,t,a){'use strict';var o=a(0),r=a(66),n=a(96),i=a(1),s=a(38),l=a(8),d=a(4),p=a(2).ArrayBuffer,c=a(64),u=n.ArrayBuffer,y=n.DataView,g=r.ABV&&p.isView,m=u.prototype.slice,f=r.VIEW,h='ArrayBuffer';o(o.G+o.W+o.F*(p!==u),{ArrayBuffer:u}),o(o.S+o.F*!r.CONSTR,h,{isView:function(e){return g&&g(e)||d(e)&&f in e}}),o(o.P+o.U+o.F*a(3)(function(){return!new u(2).slice(1,void 0).byteLength}),h,{slice:function(e,t){if(m!==void 0&&t===void 0)return m.call(i(this),e);for(var a=i(this).byteLength,o=s(e,a),r=s(void 0===t?a:t,a),n=new(c(this,u))(l(r-o)),d=new y(this),p=new y(n),g=0;o<r;)p.setUint8(g++,d.getUint8(o++));return n}}),a(41)(h)},function(e,t,a){var o=a(0);o(o.G+o.W+o.F*!a(66).ABV,{DataView:a(96).DataView})},function(e,t,a){a(29)('Int8',1,function(e){return function(t,a,o){return e(this,t,a,o)}})},function(e,t,a){a(29)('Uint8',1,function(e){return function(t,a,o){return e(this,t,a,o)}})},function(e,t,a){a(29)('Uint8',1,function(e){return function(t,a,o){return e(this,t,a,o)}},!0)},function(e,t,a){a(29)('Int16',2,function(e){return function(t,a,o){return e(this,t,a,o)}})},function(e,t,a){a(29)('Uint16',2,function(e){return function(t,a,o){return e(this,t,a,o)}})},function(e,t,a){a(29)('Int32',4,function(e){return function(t,a,o){return e(this,t,a,o)}})},function(e,t,a){a(29)('Uint32',4,function(e){return function(t,a,o){return e(this,t,a,o)}})},function(e,t,a){a(29)('Float32',4,function(e){return function(t,a,o){return e(this,t,a,o)}})},function(e,t,a){a(29)('Float64',8,function(e){return function(t,a,o){return e(this,t,a,o)}})},function(e,t,a){var o=a(0),r=a(10),n=a(1),i=(a(2).Reflect||{}).apply,s=Function.apply;o(o.S+o.F*!a(3)(function(){i(function(){})}),'Reflect',{apply:function(e,t,a){var o=r(e),l=n(a);return i?i(o,t,l):s.call(o,t,l)}})},function(e,t,a){var o=a(0),r=a(39),n=a(10),i=a(1),s=a(4),l=a(3),d=a(105),p=(a(2).Reflect||{}).construct,c=l(function(){function e(){}return!(p(function(){},[],e)instanceof e)}),u=!l(function(){p(function(){})});o(o.S+o.F*(c||u),'Reflect',{construct:function(e,t){n(e),i(t);var a=3>arguments.length?e:n(arguments[2]);if(u&&!c)return p(e,t,a);if(e==a){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);}var o=[null];return o.push.apply(o,t),new(d.apply(e,o))}var l=a.prototype,y=r(s(l)?l:Object.prototype),g=Function.apply.call(e,y,t);return s(g)?g:y}})},function(e,t,a){var o=a(7),r=a(0),n=a(1),i=a(24);r(r.S+r.F*a(3)(function(){Reflect.defineProperty(o.f({},1,{value:1}),1,{value:2})}),'Reflect',{defineProperty:function(e,t,a){n(e),t=i(t,!0),n(a);try{return o.f(e,t,a),!0}catch(t){return!1}}})},function(e,t,a){var o=a(0),r=a(16).f,n=a(1);o(o.S,'Reflect',{deleteProperty:function(e,t){var a=r(n(e),t);return(!a||a.configurable)&&delete e[t]}})},function(e,t,a){'use strict';var o=a(0),r=a(1),n=function(e){this._t=r(e),this._i=0;var t=this._k=[],a;for(a in e)t.push(a)};a(84)(n,'Object',function(){var e=this,t=e._k,a;do if(e._i>=t.length)return{value:void 0,done:!0};while(!((a=t[e._i++])in e._t));return{value:a,done:!1}}),o(o.S,'Reflect',{enumerate:function(e){return new n(e)}})},function(e,t,a){function o(e,t){var a=3>arguments.length?e:arguments[2],s,p;return d(e)===a?e[t]:(s=r.f(e,t))?i(s,'value')?s.value:void 0===s.get?void 0:s.get.call(a):l(p=n(e))?o(p,t,a):void 0}var r=a(16),n=a(17),i=a(11),s=a(0),l=a(4),d=a(1);s(s.S,'Reflect',{get:o})},function(e,t,a){var o=a(16),r=a(0),n=a(1);r(r.S,'Reflect',{getOwnPropertyDescriptor:function(e,t){return o.f(n(e),t)}})},function(e,t,a){var o=a(0),r=a(17),n=a(1);o(o.S,'Reflect',{getPrototypeOf:function(e){return r(n(e))}})},function(e,t,a){var o=a(0);o(o.S,'Reflect',{has:function(e,t){return t in e}})},function(e,t,a){var o=a(0),r=a(1),n=Object.isExtensible;o(o.S,'Reflect',{isExtensible:function(e){return r(e),!n||n(e)}})},function(e,t,a){var o=a(0);o(o.S,'Reflect',{ownKeys:a(126)})},function(e,t,a){var o=a(0),r=a(1),n=Object.preventExtensions;o(o.S,'Reflect',{preventExtensions:function(e){r(e);try{return n&&n(e),!0}catch(t){return!1}}})},function(e,t,a){function o(e,t,a){var l=4>arguments.length?e:arguments[3],u=n.f(p(e),t),y,g;if(!u){if(c(g=i(e)))return o(g,t,a,l);u=d(0)}return s(u,'value')?!!(!1!==u.writable&&c(l))&&(y=n.f(l,t)||d(0),y.value=a,r.f(l,t,y),!0):void 0!==u.set&&(u.set.call(l,a),!0)}var r=a(7),n=a(16),i=a(17),s=a(11),l=a(0),d=a(34),p=a(1),c=a(4);l(l.S,'Reflect',{set:o})},function(e,t,a){var o=a(0),r=a(76);r&&o(o.S,'Reflect',{setPrototypeOf:function(e,t){r.check(e,t);try{return r.set(e,t),!0}catch(t){return!1}}})},function(e,t,a){'use strict';var o=a(0),r=a(57)(!0);o(o.P,'Array',{includes:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}}),a(32)('includes')},function(e,t,a){'use strict';var o=a(0),r=a(127),n=a(9),i=a(8),s=a(10),l=a(90);o(o.P,'Array',{flatMap:function(e){var t=n(this),a,o;return s(e),a=i(t.length),o=l(t,0),r(o,t,t,a,0,1,e,arguments[1]),o}}),a(32)('flatMap')},function(e,t,a){'use strict';var o=a(0),r=a(127),n=a(9),i=a(8),s=a(26),l=a(90);o(o.P,'Array',{flatten:function(){var e=arguments[0],t=n(this),a=i(t.length),o=l(t,0);return r(o,t,t,a,0,void 0===e?1:s(e)),o}}),a(32)('flatten')},function(e,t,a){'use strict';var o=a(0),r=a(82)(!0);o(o.P,'String',{at:function(e){return r(this,e)}})},function(e,t,a){'use strict';var o=a(0),r=a(128);o(o.P,'String',{padStart:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0,!0)}})},function(e,t,a){'use strict';var o=a(0),r=a(128);o(o.P,'String',{padEnd:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0,!1)}})},function(e,t,a){'use strict';a(47)('trimLeft',function(e){return function(){return e(this,1)}},'trimStart')},function(e,t,a){'use strict';a(47)('trimRight',function(e){return function(){return e(this,2)}},'trimEnd')},function(e,t,a){'use strict';var o=a(0),r=a(25),n=a(8),i=a(60),s=a(62),l=RegExp.prototype,d=function(e,t){this._r=e,this._s=t};a(84)(d,'RegExp String',function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),o(o.P,'String',{matchAll:function(e){if(r(this),!i(e))throw TypeError(e+' is not a regexp!');var t=this+'',a='flags'in l?e.flags+'':s.call(e),o=new RegExp(e.source,~a.indexOf('g')?a:'g'+a);return o.lastIndex=n(e.lastIndex),new d(o,t)}})},function(e,t,a){a(72)('asyncIterator')},function(e,t,a){a(72)('observable')},function(e,t,a){var o=a(0),r=a(126),n=a(15),s=a(16),l=a(88);o(o.S,'Object',{getOwnPropertyDescriptors:function(e){for(var t=n(e),a=s.f,o=r(t),d={},p=0,i,c;o.length>p;)c=a(t,i=o[p++]),void 0!==c&&l(d,i,c);return d}})},function(e,t,a){var o=a(0),r=a(129)(!1);o(o.S,'Object',{values:function(e){return r(e)}})},function(e,t,a){var o=a(0),r=a(129)(!0);o(o.S,'Object',{entries:function(e){return r(e)}})},function(e,t,a){'use strict';var o=a(0),r=a(9),n=a(10),i=a(7);a(6)&&o(o.P+a(67),'Object',{__defineGetter__:function(e,t){i.f(r(this),e,{get:n(t),enumerable:!0,configurable:!0})}})},function(e,t,a){'use strict';var o=a(0),r=a(9),n=a(10),i=a(7);a(6)&&o(o.P+a(67),'Object',{__defineSetter__:function(e,t){i.f(r(this),e,{set:n(t),enumerable:!0,configurable:!0})}})},function(e,t,a){'use strict';var o=a(0),r=a(9),n=a(24),i=a(17),s=a(16).f;a(6)&&o(o.P+a(67),'Object',{__lookupGetter__:function(e){var t=r(this),a=n(e,!0),o;do if(o=s(t,a))return o.get;while(t=i(t))}})},function(e,t,a){'use strict';var o=a(0),r=a(9),n=a(24),i=a(17),s=a(16).f;a(6)&&o(o.P+a(67),'Object',{__lookupSetter__:function(e){var t=r(this),a=n(e,!0),o;do if(o=s(t,a))return o.set;while(t=i(t))}})},function(e,t,a){var o=a(0);o(o.P+o.R,'Map',{toJSON:a(130)('Map')})},function(e,t,a){var o=a(0);o(o.P+o.R,'Set',{toJSON:a(130)('Set')})},function(e,t,a){a(68)('Map')},function(e,t,a){a(68)('Set')},function(e,t,a){a(68)('WeakMap')},function(e,t,a){a(68)('WeakSet')},function(e,t,a){a(69)('Map')},function(e,t,a){a(69)('Set')},function(e,t,a){a(69)('WeakMap')},function(e,t,a){a(69)('WeakSet')},function(e,t,a){var o=a(0);o(o.G,{global:a(2)})},function(e,t,a){var o=a(0);o(o.S,'System',{global:a(2)})},function(e,t,a){var o=a(0),r=a(20);o(o.S,'Error',{isError:function(e){return'Error'===r(e)}})},function(e,t,a){var o=a(0);o(o.S,'Math',{clamp:function(e,t,a){return Math.min(a,Math.max(t,e))}})},function(e,t,a){var o=a(0);o(o.S,'Math',{DEG_PER_RAD:Math.PI/180})},function(e,t,a){var o=a(0),r=180/Math.PI;o(o.S,'Math',{degrees:function(e){return e*r}})},function(e,t,a){var o=a(0),r=a(132),n=a(112);o(o.S,'Math',{fscale:function(e,t,a,o,i){return n(r(e,t,a,o,i))}})},function(e,t,a){var o=a(0);o(o.S,'Math',{iaddh:function(e,t,a,o){var r=e>>>0,n=a>>>0;return 0|(t>>>0)+(o>>>0)+((r&n|(r|n)&~(r+n>>>0))>>>31)}})},function(e,t,a){var o=a(0);o(o.S,'Math',{isubh:function(e,t,a,o){var r=e>>>0,n=a>>>0;return 0|(t>>>0)-(o>>>0)-((~r&n|~(r^n)&r-n>>>0)>>>31)}})},function(e,t,a){var o=a(0);o(o.S,'Math',{imulh:function(e,a){var o=65535,r=+e,n=+a,i=r&o,s=n&o,l=r>>16,d=n>>16,p=(l*s>>>0)+(i*s>>>16);return l*d+(p>>16)+((i*d>>>0)+(p&o)>>16)}})},function(e,t,a){var o=a(0);o(o.S,'Math',{RAD_PER_DEG:180/Math.PI})},function(e,t,a){var o=a(0),r=Math.PI/180;o(o.S,'Math',{radians:function(e){return e*r}})},function(e,t,a){var o=a(0);o(o.S,'Math',{scale:a(132)})},function(e,t,a){var o=a(0);o(o.S,'Math',{umulh:function(e,a){var o=65535,r=+e,n=+a,i=r&o,s=n&o,l=r>>>16,d=n>>>16,p=(l*s>>>0)+(i*s>>>16);return l*d+(p>>>16)+((i*d>>>0)+(p&o)>>>16)}})},function(e,t,a){var o=a(0);o(o.S,'Math',{signbit:function(e){return(e=+e)==e?0==e?1/e==Infinity:0<e:e}})},function(e,t,a){'use strict';var o=a(0),r=a(23),n=a(2),i=a(64),s=a(119);o(o.P+o.R,'Promise',{finally:function(t){var a=i(this,r.Promise||n.Promise),e='function'==typeof t;return this.then(e?function(e){return s(a,t()).then(function(){return e})}:t,e?function(o){return s(a,t()).then(function(){throw o})}:t)}})},function(e,t,a){'use strict';var o=a(0),r=a(95),n=a(118);o(o.S,'Promise',{try:function(e){var t=r.f(this),a=n(e);return(a.e?t.reject:t.resolve)(a.v),t.promise}})},function(e,t,a){var o=a(30),r=a(1),n=o.key,i=o.set;o.exp({defineMetadata:function(e,t,a,o){i(e,t,r(a),n(o))}})},function(e,t,a){var o=a(30),r=a(1),n=o.key,i=o.map,s=o.store;o.exp({deleteMetadata:function(e,t){var a=3>arguments.length?void 0:n(arguments[2]),o=i(r(t),a,!1);if(void 0===o||!o['delete'](e))return!1;if(o.size)return!0;var l=s.get(t);return l['delete'](a),!!l.size||s['delete'](t)}})},function(e,t,a){var o=a(30),r=a(1),n=a(17),i=o.has,s=o.get,l=o.key,d=function(e,t,a){var o=i(e,t,a);if(o)return s(e,t,a);var r=n(t);return null===r?void 0:d(e,r,a)};o.exp({getMetadata:function(e,t){return d(e,r(t),3>arguments.length?void 0:l(arguments[2]))}})},function(e,t,a){var o=a(122),r=a(131),n=a(30),i=a(1),s=a(17),l=n.keys,d=n.key,p=function(e,t){var a=l(e,t),n=s(e);if(null===n)return a;var i=p(n,t);return i.length?a.length?r(new o(a.concat(i))):i:a};n.exp({getMetadataKeys:function(e){return p(i(e),2>arguments.length?void 0:d(arguments[1]))}})},function(e,t,a){var o=a(30),r=a(1),n=o.get,i=o.key;o.exp({getOwnMetadata:function(e,t){return n(e,r(t),3>arguments.length?void 0:i(arguments[2]))}})},function(e,t,a){var o=a(30),r=a(1),n=o.keys,i=o.key;o.exp({getOwnMetadataKeys:function(e){return n(r(e),2>arguments.length?void 0:i(arguments[1]))}})},function(e,t,a){var o=a(30),r=a(1),n=a(17),i=o.has,s=o.key,l=function(e,t,a){var o=i(e,t,a);if(o)return!0;var r=n(t);return null!==r&&l(e,r,a)};o.exp({hasMetadata:function(e,t){return l(e,r(t),3>arguments.length?void 0:s(arguments[2]))}})},function(e,t,a){var o=a(30),r=a(1),n=o.has,i=o.key;o.exp({hasOwnMetadata:function(e,t){return n(e,r(t),3>arguments.length?void 0:i(arguments[2]))}})},function(e,t,a){var o=a(30),r=a(1),n=a(10),i=o.key,s=o.set;o.exp({metadata:function(e,t){return function(a,o){s(e,t,(o===void 0?n:r)(a),i(o))}}})},function(e,t,a){var o=a(0),r=a(94)(),n=a(2).process,i='process'==a(20)(n);o(o.G,{asap:function(e){var t=i&&n.domain;r(t?t.bind(e):e)}})},function(e,t,a){'use strict';var o=a(0),r=a(2),n=a(23),i=a(94)(),s=a(5)('observable'),l=a(10),d=a(1),p=a(42),c=a(44),u=a(12),y=a(43),g=y.RETURN,f=function(e){return null==e?void 0:l(e)},h=function(e){var t=e._c;t&&(e._c=void 0,t())},b=function(e){return e._o===void 0},m=function(e){b(e)||(e._o=void 0,h(e))},v=function(t,e){d(t),this._c=void 0,this._o=t,t=new _(this);try{var a=e(t),o=a;null!=a&&('function'==typeof a.unsubscribe?a=function(){o.unsubscribe()}:l(a),this._c=a)}catch(a){return void t.error(a)}b(this)&&h(this)};v.prototype=c({},{unsubscribe:function(){m(this)}});var _=function(e){this._s=e};_.prototype=c({},{next:function(e){var t=this._s;if(!b(t)){var a=t._o;try{var o=f(a.next);if(o)return o.call(a,e)}catch(a){try{m(t)}finally{throw a}}}},error:function(e){var t=this._s;if(b(t))throw e;var a=t._o;t._o=void 0;try{var o=f(a.error);if(!o)throw e;e=o.call(a,e)}catch(a){try{h(t)}finally{throw a}}return h(t),e},complete:function(e){var t=this._s;if(!b(t)){var a=t._o;t._o=void 0;try{var o=f(a.complete);e=o?o.call(a,e):void 0}catch(a){try{h(t)}finally{throw a}}return h(t),e}}});var S=function(e){p(this,S,'Observable','_f')._f=l(e)};c(S.prototype,{subscribe:function(e){return new v(e,this._f)},forEach:function(e){var t=this;return new(n.Promise||r.Promise)(function(a,o){l(e);var r=t.subscribe({next:function(t){try{return e(t)}catch(t){o(t),r.unsubscribe()}},error:o,complete:a})})}}),c(S,{from:function(e){var t='function'==typeof this?this:S,a=f(d(e)[s]);if(a){var o=d(a.call(e));return o.constructor===t?o:new t(function(e){return o.subscribe(e)})}return new t(function(t){var a=!1;return i(function(){if(!a){try{if(y(e,!1,function(e){if(t.next(e),a)return g})===g)return}catch(o){if(a)throw o;return void t.error(o)}t.complete()}}),function(){a=!0}})},of:function(){for(var e=0,t=arguments.length,a=Array(t);e<t;)a[e]=arguments[e++];return new('function'==typeof this?this:S)(function(e){var t=!1;return i(function(){if(!t){for(var o=0;o<a.length;++o)if(e.next(a[o]),t)return;e.complete()}}),function(){t=!0}})}}),u(S.prototype,s,function(){return this}),o(o.G,{Observable:S}),a(41)('Observable')},function(e,t,a){var o=a(2),r=a(0),n=o.navigator,i=[].slice,s=!!n&&/MSIE .\./.test(n.userAgent),l=function(e){return function(t,a){var o=2<arguments.length,r=!!o&&i.call(arguments,2);return e(o?function(){('function'==typeof t?t:Function(t)).apply(this,r)}:t,a)}};r(r.G+r.B+r.F*s,{setTimeout:l(o.setTimeout),setInterval:l(o.setInterval)})},function(e,t,a){var o=a(0),r=a(93);o(o.G+o.B,{setImmediate:r.set,clearImmediate:r.clear})},function(e,t,a){for(var o=a(92),r=a(37),n=a(13),s=a(2),l=a(12),d=a(48),p=a(5),c=p('iterator'),u=p('toStringTag'),y=d.Array,g={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=r(g),f=0;f<m.length;f++){var i=m[f],h=g[i],b=s[i],v=b&&b.prototype,_;if(v&&(v[c]||l(v,c,y),v[u]||l(v,u,i),d[i]=y,h))for(_ in o)v[_]||n(v,_,o[_],!0)}},function(e,t,a){(function(t){!function(t){'use strict';function a(e,t,a,o){var n=t&&t.prototype instanceof r?t:r,i=Object.create(n.prototype),s=new y(o||[]);return i._invoke=d(e,a,s),i}function o(e,t,a){try{return{type:'normal',arg:e.call(t,a)}}catch(e){return{type:'throw',arg:e}}}function r(){}function n(){}function i(){}function s(e){['next','throw','return'].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function l(e){function a(t,r,n,i){var s=o(e[t],e,r);if('throw'===s.type)i(s.arg);else{var l=s.arg,d=l.value;return d&&'object'==typeof d&&h.call(d,'__await')?Promise.resolve(d.__await).then(function(e){a('next',e,n,i)},function(e){a('throw',e,n,i)}):Promise.resolve(d).then(function(e){l.value=e,n(l)},i)}}function r(e,t){function o(){return new Promise(function(o,r){a(e,t,o,r)})}return n=n?n.then(o,o):o()}'object'==typeof t.process&&t.process.domain&&(a=t.process.domain.bind(a));var n;this._invoke=r}function d(e,t,a){var r=E;return function(n,i){if(r===k)throw new Error('Generator is already running');if(r===I){if('throw'===n)throw i;return m()}for(a.method=n,a.arg=i;;){var s=a.delegate;if(s){var l=p(s,a);if(l){if(l===P)continue;return l}}if('next'===a.method)a.sent=a._sent=a.arg;else if('throw'===a.method){if(r===E)throw r=I,a.arg;a.dispatchException(a.arg)}else'return'===a.method&&a.abrupt('return',a.arg);r=k;var d=o(e,t,a);if('normal'===d.type){if(r=a.done?I:C,d.arg===P)continue;return{value:d.arg,done:a.done}}'throw'===d.type&&(r=I,a.method='throw',a.arg=d.arg)}}}function p(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,'throw'===t.method){if(e.iterator.return&&(t.method='return',t.arg=void 0,p(e,t),'throw'===t.method))return P;t.method='throw',t.arg=new TypeError('The iterator does not provide a \'throw\' method')}return P}var r=o(a,e.iterator,t.arg);if('throw'===r.type)return t.method='throw',t.arg=r.arg,t.delegate=null,P;var n=r.arg;if(!n)return t.method='throw',t.arg=new TypeError('iterator result is not an object'),t.delegate=null,P;if(n.done)t[e.resultName]=n.value,t.next=e.nextLoc,'return'!==t.method&&(t.method='next',t.arg=void 0);else return n;return t.delegate=null,P}function c(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function u(e){var t=e.completion||{};t.type='normal',delete t.arg,e.completion=t}function y(e){this.tryEntries=[{tryLoc:'root'}],e.forEach(c,this),this.reset(!0)}function g(e){if(e){var t=e[v];if(t)return t.call(e);if('function'==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(h.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:m}}function m(){return{value:void 0,done:!0}}var f=Object.prototype,h=f.hasOwnProperty,b='function'==typeof Symbol?Symbol:{},v=b.iterator||'@@iterator',_=b.asyncIterator||'@@asyncIterator',x=b.toStringTag||'@@toStringTag',S='object'==typeof e,T=t.regeneratorRuntime;if(T)return void(S&&(e.exports=T));T=t.regeneratorRuntime=S?e.exports:{},T.wrap=a;var E='suspendedStart',C='suspendedYield',k='executing',I='completed',P={},O={};O[v]=function(){return this};var w=Object.getPrototypeOf,A=w&&w(w(g([])));A&&A!==f&&h.call(A,v)&&(O=A);var R=i.prototype=r.prototype=Object.create(O);n.prototype=R.constructor=i,i.constructor=n,i[x]=n.displayName='GeneratorFunction',T.isGeneratorFunction=function(e){var t='function'==typeof e&&e.constructor;return!!t&&(t===n||'GeneratorFunction'===(t.displayName||t.name))},T.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,!(x in e)&&(e[x]='GeneratorFunction')),e.prototype=Object.create(R),e},T.awrap=function(e){return{__await:e}},s(l.prototype),l.prototype[_]=function(){return this},T.AsyncIterator=l,T.async=function(e,t,o,r){var n=new l(a(e,t,o,r));return T.isGeneratorFunction(t)?n:n.next().then(function(e){return e.done?e.value:n.next()})},s(R),R[x]='Generator',R[v]=function(){return this},R.toString=function(){return'[object Generator]'},T.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var o=t.pop();if(o in e)return a.value=o,a.done=!1,a}return a.done=!0,a}},T.values=g,y.prototype={constructor:y,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method='next',this.arg=void 0,this.tryEntries.forEach(u),!e)for(var t in this)'t'===t.charAt(0)&&h.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if('throw'===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,o){return n.type='throw',n.arg=e,a.next=t,o&&(a.method='next',a.arg=void 0),!!o}if(this.done)throw e;for(var a=this,o=this.tryEntries.length-1;0<=o;--o){var r=this.tryEntries[o],n=r.completion;if('root'===r.tryLoc)return t('end');if(r.tryLoc<=this.prev){var i=h.call(r,'catchLoc'),s=h.call(r,'finallyLoc');if(i&&s){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);}else if(!s)throw new Error('try statement without catch or finally');else if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1,o;0<=a;--a)if(o=this.tryEntries[a],o.tryLoc<=this.prev&&h.call(o,'finallyLoc')&&this.prev<o.finallyLoc){var r=o;break}r&&('break'===e||'continue'===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var n=r?r.completion:{};return n.type=e,n.arg=t,r?(this.method='next',this.next=r.finallyLoc,P):this.complete(n)},complete:function(e,t){if('throw'===e.type)throw e.arg;return'break'===e.type||'continue'===e.type?this.next=e.arg:'return'===e.type?(this.rval=this.arg=e.arg,this.method='return',this.next='end'):'normal'===e.type&&t&&(this.next=t),P},finish:function(e){for(var t=this.tryEntries.length-1,a;0<=t;--t)if(a=this.tryEntries[t],a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),u(a),P},catch:function(e){for(var t=this.tryEntries.length-1,a;0<=t;--t)if(a=this.tryEntries[t],a.tryLoc===e){var o=a.completion;if('throw'===o.type){var r=o.arg;u(a)}return r}throw new Error('illegal catch attempt')},delegateYield:function(e,t,a){return this.delegate={iterator:g(e),resultName:t,nextLoc:a},'next'===this.method&&(this.arg=void 0),P}}}('object'==typeof t?t:'object'==typeof window?window:'object'==typeof self?self:this)}).call(t,a(45))},function(e,t,a){a(402),e.exports=a(23).RegExp.escape},function(e,t,a){var o=a(0),r=a(403)(/[\\^$*+?.()|[\]{}]/g,'\\$&');o(o.S,'RegExp',{escape:function(e){return r(e)}})},function(e){e.exports=function(e,t){var a=t===Object(t)?function(e){return t[e]}:t;return function(t){return(t+'').replace(e,a)}}},function(e,t,a){function o(e){return e&&e.__esModule?e:{default:e}}var r=a(18),n=o(r),i=a(494),s=o(i),l=a(495),d=o(l),p=a(498),c=o(p),u=a(508),y=o(u),g=a(509),m=o(g),f=a(510),h=o(f),b=a(512),v=o(b),_=a(513),x=o(_),S=a(514),T=o(S);a(515);var E=new n['default'].Game({width:720,height:1280,three:!0,phaserParameters:{disableVisibilityChange:!1},threeParameters:{antialias:!0},enableDebug:!1});E.state.add('boot',new s['default']),E.state.add('menu',new d['default']),E.state.add('game',new c['default']),E.state.add('credits',new y['default']),E.state.add('instructions',new m['default']),E.state.add('shop',new h['default']),E.state.add('highscore',new v['default']),E.state.add('gameOver',new x['default']),E.state.add('nameInput',new T['default']),E.state.start('boot',!0,!1,'menu',[],{key:'base',url:'data/basePack.json'})},function(e,t,a){a(406),a(415),a(488),a(489),'undefined'==typeof Phaser.PointerMode.TOUCH&&(Phaser.PointerMode.TOUCH=Phaser.PointerMode.CONTACT)},function(e,t,a){var o=function(){function e(e,t){var a=[],o=!0,r=!1,n;try{for(var i=e[Symbol.iterator](),s;!(o=(s=i.next()).done)&&(a.push(s.value),!(t&&a.length===t));o=!0);}catch(e){r=!0,n=e}finally{try{!o&&i['return']&&i['return']()}finally{if(r)throw n}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}();a(407);var r=a(408),n=a(409),i=a(410),s=a(411),l=a(412),d=a(413),p=a(414),c=[r.indices,n.indices,i.indices,s.indices,l.indices,d.indices,p.indices],u=Phaser.Cache;Phaser.Cache=function(){function e(e){u.call(this,e);var t=!0,a=!1,o;try{for(var r=c[Symbol.iterator](),n,i;!(t=(n=r.next()).done);t=!0){if(i=n.value,i.string in this._cache||i.number in this._cacheMap){console.error('duplicate entry in cache tables, ignoring! ('+(i.string+':')+(i.number+')'));continue}this._cache[i.string]={},this._cacheMap[i.number]=this._cache[i.string]}}catch(e){a=!0,o=e}finally{try{!t&&r['return']&&r['return']()}finally{if(a)throw o}}}return e}(),Phaser.Cache.prototype=u.prototype;var y=!0,g=!1,m;try{for(var f=Object.entries(u)[Symbol.iterator](),h;!(y=(h=f.next()).done);y=!0){var b=h.value,v=o(b,2),_=v[0],x=v[1];Phaser.Cache[_]=x}}catch(e){g=!0,m=e}finally{try{!y&&f['return']&&f['return']()}finally{if(g)throw m}}},function(){var e=32;Phaser.Cache.LAYOUT=e,e++,Phaser.Cache.PRELOAD_PACK=e,e++,Phaser.Cache.THREE_CUBE_TEXTURE=e,e++,Phaser.Cache.THREE_JSON=e,e++,Phaser.Cache.THREE_OBJECT=e,e++,Phaser.Cache.THREE_TEXTURE=e,e++,Phaser.Cache.WEBFONT=e,e++},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});var a=t.indices={number:Phaser.Cache.LAYOUT,string:'layout'};Phaser.Cache.prototype.addLayout=function(){return function(e,t,o){this._cache[a.string][e]=o}}(),Phaser.Cache.prototype.checkLayoutKey=function(){return function(e){return this.checkKey(a.number,e)}}(),Phaser.Cache.prototype.getLayout=function(){return function(e){return this.getItem(e,a.number,'getLayout')}}(),Phaser.Cache.prototype.removeLayout=function(){return function(e){delete this._cache[a.string][e]}}()},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});var a=t.indices={number:Phaser.Cache.PRELOAD_PACK,string:'preloadPack'};Phaser.Cache.prototype.addPreloadPack=function(){return function(e,t,o){this._cache[a.string][e]=o}}(),Phaser.Cache.prototype.checkPreloadPackKey=function(){return function(e){return this.checkKey(a.number,e)}}(),Phaser.Cache.prototype.getPreloadPack=function(){return function(e){return this.getItem(e,a.number,'getPreloadPack')}}(),Phaser.Cache.prototype.removePreloadPack=function(){return function(e){delete this._cache[a.string][e]}}()},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});var a=t.indices={number:Phaser.Cache.THREE_CUBE_TEXTURE,string:'threeCubeTexture'};Phaser.Cache.prototype.addThreeCubeTexture=function(){return function(e,t,o){this._cache[a.string][e]=o}}(),Phaser.Cache.prototype.checkThreeCubeTextureKey=function(){return function(e){return this.checkKey(a.number,e)}}(),Phaser.Cache.prototype.getThreeCubeTexture=function(){return function(e){return this.getItem(e,a.number,'getThreeCubeTexture')}}(),Phaser.Cache.prototype.removeThreeCubeTexture=function(){return function(e){delete this._cache[a.string][e]}}()},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});var a=t.indices={number:Phaser.Cache.THREE_JSON,string:'threeJson'};Phaser.Cache.prototype.addThreeJson=function(){return function(e,t,o){this._cache[a.string][e]=o}}(),Phaser.Cache.prototype.checkThreeJsonKey=function(){return function(e){return this.checkKey(a.number,e)}}(),Phaser.Cache.prototype.getThreeJson=function(){return function(e){return this.getItem(e,a.number,'getThreeJson')}}(),Phaser.Cache.prototype.removeThreeJson=function(){return function(e){delete this._cache[a.string][e]}}()},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});var a=t.indices={number:Phaser.Cache.THREE_OBJECT,string:'threeObject'};Phaser.Cache.prototype.addThreeObject=function(){return function(e,t,o){this._cache[a.string][e]=o}}(),Phaser.Cache.prototype.checkThreeObjectKey=function(){return function(e){return this.checkKey(a.number,e)}}(),Phaser.Cache.prototype.getThreeObject=function(){return function(e){return this.getItem(e,a.number,'getThreeObject')}}(),Phaser.Cache.prototype.removeThreeObject=function(){return function(e){delete this._cache[a.string][e]}}()},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});var a=t.indices={number:Phaser.Cache.THREE_TEXTURE,string:'threeTexture'};Phaser.Cache.prototype.addThreeTexture=function(){return function(e,t,o){this._cache[a.string][e]=o}}(),Phaser.Cache.prototype.checkThreeTextureKey=function(){return function(e){return this.checkKey(a.number,e)}}(),Phaser.Cache.prototype.getThreeTexture=function(){return function(e){return this.getItem(e,a.number,'getThreeTexture')}}(),Phaser.Cache.prototype.removeThreeTexture=function(){return function(e){delete this._cache[a.string][e]}}()},function(e,t){Object.defineProperty(t,'__esModule',{value:!0});var a=t.indices={number:Phaser.Cache.WEBFONT,string:'webFont'};Phaser.Cache.prototype.addWebFont=function(){return function(e){this._cache[a.string][e]=!0}}(),Phaser.Cache.prototype.checkWebFontKey=function(){return function(e){return this.checkKey(a.number,e)}}(),Phaser.Cache.prototype.getWebFont=function(){return function(e){return this.getItem(e,a.number,'getWebFont')}}(),Phaser.Cache.prototype.removeWebFont=function(){return function(e){delete this._cache[a.string][e]}}()},function(e,t,a){function o(e){return e&&e.__esModule?e:{default:e}}var r=a(416),n=o(r),i=a(50),s=a(22),l=o(s),d=a(55),p=o(d),c=new i.CubeTextureLoader,u=new i.JSONLoader,y=new i.ObjectLoader,g=new i.TextureLoader,m=Phaser.Loader.prototype.addToFileList,f=Phaser.Loader.prototype.loadFile,h=Phaser.Loader.prototype.pack,b=Phaser.Loader.prototype.processPack,v={layout:Phaser.Cache.LAYOUT,threeCubeTexture:Phaser.Cache.THREE_CUBE_TEXTURE,threeJson:Phaser.Cache.THREE_JSON,threeObject:Phaser.Cache.THREE_OBJECT,threeTexture:Phaser.Cache.THREE_TEXTURE,webFont:Phaser.Cache.WEBFONT,image:Phaser.Cache.IMAGE,text:Phaser.Cache.TEXT,json:Phaser.Cache.JSON,xml:Phaser.Cache.XML,binary:Phaser.Cache.BINARY,spritesheet:Phaser.Cache.SPRITE_SHEET,video:Phaser.Cache.VIDEO,audio:Phaser.Cache.SOUND,audiosprite:Phaser.Cache.SOUND,tilemap:Phaser.Cache.TILEMAP,physics:Phaser.Cache.PHYSICS,bitmapfont:Phaser.Cache.BITMAPFONT,textureatlas:Phaser.Cache.IMAGE,shader:Phaser.Cache.SHADER};Phaser.Loader.prototype.addToFileList=function(){function e(e,t,a,o,r,n){e in v||console.error(e+''+' is not in caches! File SHEEPCORE bug!');var i=this.game.cache.checkKey(v[e],t);return i?this:m.call(this,e,t,a,o,r,n)}return e}(),Phaser.Loader.prototype.loadFile=function(){return function(e){var t=this;switch(e.type){case'layout':this.xhrLoad(e,this.transformUrl(e.url,e),'text',this.layoutLoadComplete);break;case'threeCubeTexture':c.load(e.urls,function(a){t.game.cache.addThreeCubeTexture(e.key,e.url,a),t.asyncComplete(e)},null,function(){t.asyncComplete(e,'Error loading three.js texture')});break;case'threeJson':u.load(e.url,function(a){t.game.cache.addThreeJson(e.key,e.url,a),t.asyncComplete(e)},function(){},function(){t.asyncComplete(e,'Error loading three.js json')});break;case'threeObject':y.load(e.url,function(a){t.game.cache.addThreeObject(e.key,e.url,a),t.asyncComplete(e)},function(){},function(){t.asyncComplete(e,'Error loading three.js object')});break;case'threeTexture':g.load(e.url,function(a){t.game.cache.addThreeTexture(e.key,e.url,a),t.asyncComplete(e)},null,function(){t.asyncComplete(e,'Error loading three.js texture')});break;case'webFont':{var a=e.families.slice(),o=!1;n['default'].load({classes:!1,custom:{families:e.families,urls:e.urls},fontactive:function(t){var r=a.indexOf(t);-1<r&&a.splice(r,1),0===a.length&&(o?this.asyncComplete(e,'Error loading WebFont'):this.asyncComplete(e))}.bind(this),fontinactive:function(){function t(t){var r=a.indexOf(t);-1<r&&a.splice(r,1),o=!0,console.log(a,o),0===a.length&&(o?this.asyncComplete(e,'Error loading WebFont'):(this.game.cache.addWebFont(e.key),this.asyncComplete(e)))}return t}().bind(this)});break}default:f.call(this,e);}}}(),Phaser.Loader.prototype.pack=function(){return function(e,t,a,o){return this.cache.checkPreloadPackKey(e)?this:h.call(this,e,t,a,o)}}(),Phaser.Loader.prototype.processPack=function(){function e(e){var t=e.data[e.key];if(!t)return void console.warn('Phaser.Loader - '+(e.key+': pack has data, but not for pack key'));for(var a=0,o;a<t.length;a++)switch(o=t[a],o.type){case'layout':this.layout(o.key,p['default'].getAssetUrl(o.url),o.overwrite);break;case'threeCubeTexture':o.urls=o.urls.map(function(e){return p['default'].getAssetUrl(e)}),this.threeCubeTexture(o.key,o.urls);break;case'threeJson':this.threeJson(o.key,p['default'].getAssetUrl(o.url),o.overwrite);break;case'threeObject':this.threeObject(o.key,p['default'].getAssetUrl(o.url),o.overwrite);break;case'threeTexture':this.threeTexture(o.key,p['default'].getAssetUrl(o.url),o.overwrite);break;case'webFont':o.urls=o.urls.map(function(e){return p['default'].getAssetUrl(e)}),this.webFont(o.key,o.urls,o.families,o.overwrite);break;default:'url'in o&&(o.url=p['default'].getAssetUrl(o.url)),'textureURL'in o&&(o.textureURL=p['default'].getAssetUrl(o.textureURL)),'atlasURL'in o&&(o.atlasURL=p['default'].getAssetUrl(o.atlasURL)),'jsonURL'in o&&(o.jsonURL=p['default'].getAssetUrl(o.jsonURL)),'urls'in o&&(o.urls=o.urls.map(function(e){return p['default'].getAssetUrl(e)}));}b.call(this,e),this.cache.addPreloadPack(e.key,e.url,t)}return e}(),Phaser.Loader.prototype.layoutLoadComplete=function(){return function(e,t){var a=JSON.parse(t.responseText);this.cache.addLayout(e.key,e.url,a);var o=new l['default'].Layout(this.game,a),r=o.getPackData(),n=Object.getOwnPropertyNames(r);2<n.length&&console.warn('More than one key found in layout resources.');var i=n.reduce(function(e,t){return'meta'===t?e:t});this.pack(i,e.url,r),this.asyncComplete(e)}}(),Phaser.Loader.prototype.layout=function(){return function(e,t,a){return this.addToFileList('layout',e,t,a,'.json')}}(),Phaser.Loader.prototype.threeCubeTexture=function(){return function(e,t,a){return this.addToFileList('threeCubeTexture',e,t[0],{urls:t},a,'.png')}}(),Phaser.Loader.prototype.threeJson=function(){return function(e,t,a){return this.addToFileList('threeJson',e,t,{},a,'.json')}}(),Phaser.Loader.prototype.threeObject=function(){return function(e,t,a){return this.addToFileList('threeObject',e,t,{},a,'.json')}}(),Phaser.Loader.prototype.threeTexture=function(){return function(e,t,a){return this.addToFileList('threeTexture',e,t,{},a,'.png')}}(),Phaser.Loader.prototype.webFont=function(){return function(e,t,a,o){return this.addToFileList('webFont',e,t[0],{urls:t,families:a},o,'.css')}}()},function(e,a,o){var r;(function(){function n(e){return e.call.apply(e.bind,arguments)}function i(e,t){if(!e)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,o),e.apply(t,a)}}return function(){return e.apply(t,arguments)}}function s(){return s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf('native code')?n:i,s.apply(null,arguments)}function l(e,t){this.a=e,this.o=t||e,this.c=this.o.document}function p(t,a,o,r){if(a=t.c.createElement(a),o)for(var n in o)o.hasOwnProperty(n)&&('style'==n?a.style.cssText=o[n]:a.setAttribute(n,o[n]));return r&&a.appendChild(t.c.createTextNode(r)),a}function t(e,t,a){e=e.c.getElementsByTagName(t)[0],e||(e=document.documentElement),e.insertBefore(a,e.lastChild)}function d(e){e.parentNode&&e.parentNode.removeChild(e)}function u(t,a,o){a=a||[],o=o||[];for(var r=t.className.split(/\s+/),n=0;n<a.length;n+=1){for(var e=!1,i=0;i<r.length;i+=1)if(a[n]===r[i]){e=!0;break}e||r.push(a[n])}for(a=[],n=0;n<r.length;n+=1){for(e=!1,i=0;i<o.length;i+=1)if(r[n]===o[i]){e=!0;break}e||a.push(r[n])}t.className=a.join(' ').replace(/\s+/g,' ').replace(/^\s+|\s+$/,'')}function g(t,a){for(var o=t.className.split(/\s+/),r=0,n=o.length;r<n;r++)if(o[r]==a)return!0;return!1}function y(e){return e.o.location.hostname||e.a.location.hostname}function m(o,a,r){function n(){l&&i&&e&&(l(s),l=null)}a=p(o,'link',{rel:'stylesheet',href:a,media:'all'});var i=!1,e=!0,s=null,l=r||null;q?(a.onload=function(){i=!0,n()},a.onerror=function(){i=!0,s=Error('Stylesheet failed to load'),n()}):setTimeout(function(){i=!0,n()},0),t(o,'head',a)}function h(t,a,o,r){var n=t.c.getElementsByTagName('head')[0];if(n){var e=p(t,'script',{src:a}),i=!1;return e.onload=e.onreadystatechange=function(){i||this.readyState&&'loaded'!=this.readyState&&'complete'!=this.readyState||(i=!0,o&&o(null),e.onload=e.onreadystatechange=null,'HEAD'==e.parentNode.tagName&&n.removeChild(e))},n.appendChild(e),setTimeout(function(){i||(i=!0,o&&o(Error('Script load timeout')))},r||5E3),e}return null}function v(){this.a=0,this.c=null}function _(e){return e.a++,function(){e.a--,c(e)}}function x(e,t){e.c=t,c(e)}function c(e){0==e.a&&e.c&&(e.c(),e.c=null)}function f(e){this.a=e||'-'}function E(e,t){this.c=e,this.f=4,this.a='n';var a=(t||'n4').match(/^([nio])([1-9])$/i);a&&(this.a=a[1],this.f=parseInt(a[2],10))}function C(e){return k(e)+' '+(e.f+'00 300px ')+b(e.c)}function b(e){var t=[];e=e.split(/,\s*/);for(var a=0,o;a<e.length;a++)o=e[a].replace(/['"]/g,''),-1!=o.indexOf(' ')||/^\d/.test(o)?t.push('\''+o+'\''):t.push(o);return t.join(',')}function I(e){return e.a+e.f}function k(e){var t='normal';return'o'===e.a?t='oblique':'i'===e.a&&(t='italic'),t}function w(e){var t=4,a='n',o=null;return e&&((o=e.match(/(normal|oblique|italic)/i))&&o[1]&&(a=o[1].substr(0,1).toLowerCase()),(o=e.match(/([1-9]00|normal|bold)/i))&&o[1]&&(/bold/i.test(o[1])?t=7:/[1-9]00/.test(o[1])&&(t=parseInt(o[1].substr(0,1),10)))),a+t}function A(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new f('-'),this.j=!1!==t.events,this.g=!1!==t.classes}function D(e){e.g&&u(e.f,[e.a.c('wf','loading')]),L(e,'loading')}function B(e){if(e.g){var t=g(e.f,e.a.c('wf','active')),a=[],o=[e.a.c('wf','loading')];t||a.push(e.a.c('wf','inactive')),u(e.f,a,o)}L(e,'inactive')}function L(e,t,a){e.j&&e.h[t]&&(a?e.h[t](a.c,I(a)):e.h[t]())}function j(){this.c={}}function F(t,a,o){var r=[],n;for(n in a)if(a.hasOwnProperty(n)){var e=t.c[n];e&&r.push(e(a[n],o))}return r}function z(e,t){this.c=e,this.f=t,this.a=p(this.c,'span',{"aria-hidden":'true'},this.f)}function M(e){t(e.c,'body',e.a)}function N(e){return'display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:'+b(e.c)+';'+('font-style:'+k(e)+';font-weight:'+(e.f+'00;'))}function O(t,a,o,r,n,e){this.g=t,this.j=a,this.a=r,this.c=o,this.f=n||3E3,this.h=e||void 0}function P(t,a,o,r,n,e,i){this.v=t,this.B=a,this.c=o,this.a=r,this.s=i||'BESbswy',this.f={},this.w=n||3E3,this.u=e||null,this.m=this.j=this.h=this.g=null,this.g=new z(this.c,this.s),this.h=new z(this.c,this.s),this.j=new z(this.c,this.s),this.m=new z(this.c,this.s),t=new E(this.a.c+',serif',I(this.a)),t=N(t),this.g.a.style.cssText=t,t=new E(this.a.c+',sans-serif',I(this.a)),t=N(t),this.h.a.style.cssText=t,t=new E('serif',I(this.a)),t=N(t),this.j.a.style.cssText=t,t=new E('sans-serif',I(this.a)),t=N(t),this.m.a.style.cssText=t,M(this.g),M(this.h),M(this.j),M(this.m)}function G(){if(null===R){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);R=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))}return R}function T(e,t,a){for(var o in ce)if(ce.hasOwnProperty(o)&&t===e.f[ce[o]]&&a===e.f[ce[o]])return!0;return!1}function H(e){var t=e.g.a.offsetWidth,a=e.h.a.offsetWidth,o;(o=t===e.f.serif&&a===e.f['sans-serif'])||(o=G()&&T(e,t,a)),o?pe()-e.A>=e.w?G()&&T(e,t,a)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?K(e,e.v):K(e,e.B):U(e):K(e,e.v)}function U(e){setTimeout(s(function(){H(this)},e),50)}function K(e,t){setTimeout(s(function(){d(this.g.a),d(this.h.a),d(this.j.a),d(this.m.a),t(this.a)},e),0)}function V(e,t,a){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=a}function W(e){0==--e.f&&e.j&&(e.m?(e=e.a,e.g&&u(e.f,[e.a.c('wf','active')],[e.a.c('wf','loading'),e.a.c('wf','inactive')]),L(e,'active')):B(e.a))}function J(e){this.j=e,this.a=new j,this.h=0,this.f=this.g=!0}function $(t,a,o,i,d){var e=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=i||null||{};if(0===o.length&&e)B(a.a);else{a.f+=o.length,e&&(a.j=e);var p=[],l;for(l=0;l<o.length;l++){var c=o[l],y=t[c.c],n=a.a,r=c;if(n.g&&u(n.f,[n.a.c('wf',r.c,I(r).toString(),'loading')]),L(n,'fontloading',r),n=null,null===S)if(window.FontFace){var r=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),g=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);S=r?42<parseInt(r[1],10):!g}else S=!1;n=S?new O(s(a.g,a),s(a.h,a),a.c,c,a.s,y):new P(s(a.g,a),s(a.h,a),a.c,c,a.s,d||null,y),p.push(n)}for(l=0;l<p.length;l++)p[l].start()}},0)}function Q(t,a,o){var r=[],n=o.timeout;D(a);var r=F(t.a,o,t.c),e=new V(t.c,a,n);for(t.h=r.length,a=0,o=r.length;a<o;a++)r[a].load(function(a,o,r){$(t,e,a,o,r)})}function ee(e,t){this.c=e,this.a=t}function te(e,t){this.c=e,this.a=t}function ae(e,t){this.c=e?e:X,this.a=[],this.f=[],this.g=t||''}function oe(t,a){for(var o=a.length,r=0,n;r<o;r++){n=a[r].split(':'),3==n.length&&t.f.push(n.pop());var e='';2==n.length&&''!=n[1]&&(e=':'),t.a.push(n.join(e))}}function re(e){if(0==e.a.length)throw Error('No fonts to load!');if(-1!=e.c.indexOf('kit='))return e.c;for(var t=e.a.length,a=[],o=0;o<t;o++)a.push(e.a[o].replace(/ /g,'+'));return t=e.c+'?family='+a.join('%7C'),0<e.f.length&&(t+='&subset='+e.f.join(',')),0<e.g.length&&(t+='&text='+encodeURIComponent(e.g)),t}function ne(e){this.f=e,this.a=[],this.c={}}function ie(t){for(var a=t.f.length,o=0;o<a;o++){var i=t.f[o].split(':'),s=i[0].replace(/\+/g,' '),e=['n4'];if(2<=i.length){var d=i[1],p;if(p=[],d)for(var d=d.split(','),c=d.length,u=0;u<c;u++){var l;if(l=d[u],l.match(/^[\w-]+$/)){var y=me.exec(l.toLowerCase());if(null==y)l='';else{if(l=y[2],l=null==l||''==l?'n':ge[l],y=y[1],null==y||''==y)y='4';else var n=ye[y],y=n?n:isNaN(y)?'4':y.substr(0,1);l=[l,y].join('')}}else l='';l&&p.push(l)}0<p.length&&(e=p),3==i.length&&(i=i[2],p=[],i=i?i.split(','):p,0<i.length&&(i=ue[i[0]])&&(t.c[s]=i))}for(t.c[s]||(i=ue[s])&&(t.c[s]=i),i=0;i<e.length;i+=1)t.a.push(new E(s,e[i]))}}function se(e,t){this.c=e,this.a=t}function le(e,t){this.c=e,this.a=t}function de(e,t){this.c=e,this.f=t,this.a=[]}var pe=Date.now||function(){return+new Date},q=!!window.FontFace;f.prototype.c=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t].replace(/[\W_]+/g,'').toLowerCase());return e.join(this.a)};O.prototype.start=function(){var t=this.c.o.document,o=this,a=pe(),r=new Promise(function(r,n){function e(){pe()-a>=o.f?n():t.fonts.load(C(o.a),o.h).then(function(t){1<=t.length?r():setTimeout(e,25)},function(){n()})}e()}),n=null,e=new Promise(function(e,t){n=setTimeout(t,o.f)});Promise.race([e,r]).then(function(){n&&(clearTimeout(n),n=null),o.g(o.a)},function(){o.j(o.a)})};var ce={D:'serif',C:'sans-serif'},R=null;P.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f['sans-serif']=this.m.a.offsetWidth,this.A=pe(),H(this)};var S=null;V.prototype.g=function(e){var t=this.a;t.g&&u(t.f,[t.a.c('wf',e.c,I(e).toString(),'active')],[t.a.c('wf',e.c,I(e).toString(),'loading'),t.a.c('wf',e.c,I(e).toString(),'inactive')]),L(t,'fontactive',e),this.m=!0,W(this)},V.prototype.h=function(t){var a=this.a;if(a.g){var o=g(a.f,a.a.c('wf',t.c,I(t).toString(),'active')),r=[],n=[a.a.c('wf',t.c,I(t).toString(),'loading')];o||r.push(a.a.c('wf',t.c,I(t).toString(),'inactive')),u(a.f,r,n)}L(a,'fontinactive',t),W(this)};J.prototype.load=function(e){this.c=new l(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,Q(this,new A(this.c,e),e)};ee.prototype.load=function(t){function a(){if(i['__mti_fntLst'+r]){var o=i['__mti_fntLst'+r](),n=[],e;if(o)for(var s=0,l;s<o.length;s++)l=o[s].fontfamily,void 0!=o[s].fontStyle&&void 0!=o[s].fontWeight?(e=o[s].fontStyle+o[s].fontWeight,n.push(new E(l,e))):n.push(new E(l));t(n)}else setTimeout(function(){a()},50)}var o=this,r=o.a.projectId,n=o.a.version;if(r){var i=o.c.o;h(this.c,(o.a.api||'https://fast.fonts.net/jsapi')+'/'+r+'.js'+(n?'?v='+n:''),function(n){n?t([]):(i['__MonotypeConfiguration__'+r]=function(){return o.a},a())}).id='__MonotypeAPIScript__'+r}else t([])},te.prototype.load=function(t){var a=this.a.urls||[],o=this.a.families||[],e=this.a.testStrings||{},r=new v,n,i;for(n=0,i=a.length;n<i;n++)m(this.c,a[n],_(r));var s=[];for(n=0,i=o.length;n<i;n++)if(a=o[n].split(':'),a[1])for(var d=a[1].split(','),p=0;p<d.length;p+=1)s.push(new E(a[0],d[p]));else s.push(new E(a[0]));x(r,function(){t(s,e)})};var X='https://fonts.googleapis.com/css';var ue={latin:'BESbswy',"latin-ext":'\xE7\xF6\xFC\u011F\u015F',cyrillic:'\u0439\u044F\u0416',greek:'\u03B1\u03B2\u03A3',khmer:'\u1780\u1781\u1782',Hanuman:'\u1780\u1781\u1782'},ye={thin:'1',extralight:'2',"extra-light":'2',ultralight:'2',"ultra-light":'2',light:'3',regular:'4',book:'4',medium:'5',"semi-bold":'6',semibold:'6',"demi-bold":'6',demibold:'6',bold:'7',"extra-bold":'8',extrabold:'8',"ultra-bold":'8',ultrabold:'8',black:'9',heavy:'9',l:'3',r:'4',b:'7'},ge={i:'i',italic:'i',n:'n',normal:'n'},me=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;var fe={Arimo:!0,Cousine:!0,Tinos:!0};se.prototype.load=function(t){var a=new v,o=this.c,r=new ae(this.a.api,this.a.text),n=this.a.families;oe(r,n);var e=new ne(n);ie(e),m(o,re(r),_(a)),x(a,function(){t(e.a,e.c,fe)})},le.prototype.load=function(t){var e=this.a.id,a=this.c.o;e?h(this.c,(this.a.api||'https://use.typekit.net')+'/'+e+'.js',function(o){if(o)t([]);else if(a.Typekit&&a.Typekit.config&&a.Typekit.config.fn){o=a.Typekit.config.fn;for(var r=[],e=0;e<o.length;e+=2)for(var n=o[e],i=o[e+1],s=0;s<i.length;s++)r.push(new E(n,i[s]));try{a.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}t(r)}},2E3):t([])},de.prototype.load=function(e){var t=this.f.id,a=this.c.o,o=this;t?(a.__webfontfontdeckmodule__||(a.__webfontfontdeckmodule__={}),a.__webfontfontdeckmodule__[t]=function(t,a){for(var r=0,n=a.fonts.length,i;r<n;++r)i=a.fonts[r],o.a.push(new E(i.name,w('font-weight:'+i.weight+';font-style:'+i.style)));e(o.a)},h(this.c,(this.f.api||'https://f.fontdeck.com/s/css/js/')+y(this.c)+'/'+t+'.js',function(t){t&&e([])})):e([])};var he=new J(window);he.a.c.custom=function(e,t){return new te(t,e)},he.a.c.fontdeck=function(e,t){return new de(t,e)},he.a.c.monotype=function(e,t){return new ee(t,e)},he.a.c.typekit=function(e,t){return new le(t,e)},he.a.c.google=function(e,t){return new se(t,e)};var Y={load:s(he.load,he)};r=function(){return Y}.call(a,o,a,e),!(r!==void 0&&(e.exports=r))})()},function(e,t,a){function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var s=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=function(){function e(t,a,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(r===void 0){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,a,o)}if('value'in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(o)}return e}(),d=a(134),p=o(d),c=a(135),u=o(c),y=a(133),g=o(y),m=a(97),f=o(m),h=function(e){function t(e,a){r(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,null,a.name));return o.config=a,o.game=e,o.shui={},o.intendedWitdh=o.config.size.width,o.intendedHeight=o.config.size.height,o._childIdMap={},o}return i(t,e),s(t,[{key:'add',value:function(){return function(e,a,o){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'add',this).call(this,e,a,o),this._addChildToMap(e),e}}()},{key:'remove',value:function(){return function(e,a,o){var r=e.name;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'remove',this).call(this,e,a,o),delete this._childIdMap[r]}}()},{key:'getPackData',value:function(){return function(){return this.config.resources}}()},{key:'setup',value:function(){return function(){this._addChildren(this,this.config.children)}}()},{key:'clear',value:function(){return function(){this.removeAll(!0),this._childIdMap={}}}()},{key:'getElementById',value:function(){function e(e){return e in this._childIdMap?this._childIdMap[e]:null}return e}()},{key:'_addChildToMap',value:function(){function e(e){var t=e.name;return 0===t.length?void console.warn('Adding child w/o "name" to layout "'+(this.config.name+'".')):void(t in this._childIdMap&&console.warn('Duplicate id "'+(t+'" in layout "')+(this.config.name+'".')),this._childIdMap[t]=e)}return e}()},{key:'_addChildren',value:function(){return function(e,t){var a=!0,o=!1,r;try{for(var n=t[Symbol.iterator](),i,s;!(a=(i=n.next()).done);a=!0)s=i.value,this._addChild(e,s)}catch(e){o=!0,r=e}finally{try{!a&&n['return']&&n['return']()}finally{if(o)throw r}}}}()},{key:'_addChild',value:function(){function e(e,t){var a=null;switch(t.type){case'image':case'sprite':a=this._createImage(t);break;case'button':a=this._createButton(t);break;case'text':a=this._createText(t);break;case'group':a=this._createGroup(t);break;case'input':a=this._createInput(t);break;default:console.warn('Unsupported type "'+(t.type+'" in layout "')+(this.config.name+'".'));}'angle'in t&&(a.angle=t.angle),null!==a&&(a.name=t.id,'anchor'in a&&a.anchor.set(t.anchor.x,t.anchor.y),'shui'in a&&a.shui.align.set(t.align.x,t.align.y),e.add(a),!('shui'in e)&&this._addChildToMap(a),'children'in t&&this._addChildren(a,t.children))}return e}()},{key:'_createImage',value:function(){return function(e){return new p['default'](this.game,e.position.x,e.position.y,e.key,e.frame)}}()},{key:'_createButton',value:function(){function e(e){var t=e.key,a=new g['default'](this.game,e.position.x,e.position.y),o=!0,r=!1,n;try{for(var i=e.states[Symbol.iterator](),s,l;!(o=(s=i.next()).done);o=!0){l=s.value,a.addState(l.name,'key'in l?l.key:t,l.baseFrame,l.downFrame,l.hoverFrame);for(var d=[],p=['baseText','downText','hoverText'],c=0;c<p.length;c++){var u=p[c],y=null;l[u]&&(y=this._createText(l[u])),d.push(y)}a.setText.apply(a,[l.name].concat(d))}}catch(e){r=!0,n=e}finally{try{!o&&i['return']&&i['return']()}finally{if(r)throw n}}return a}return e}()},{key:'_createText',value:function(){function e(e){var t=new f['default'](this.game,e.position.x,e.position.y,e.text,e.style);return t.lineSpacing=e.lineSpacing,'padding'in e&&(t.padding.set(e.padding.x,e.padding.y),t.updateText()),t}return e}()},{key:'_createGroup',value:function(){return function(e){var t=new Phaser.Group(this.game,null,e.id);return t.position.set(e.position.x,e.position.y),t}}()},{key:'_createInput',value:function(){return function(e){console.log(e);var t=new u['default'](this.game,e.position.x,e.position.y,e.options);return t}}()}]),t}(Phaser.Group);t['default']=h},function(e,t,a){function o(e){return a(r(e))}function r(e){var t=n[e];if(!(t+1))throw new Error('Cannot find module \''+e+'\'.');return t}var n={"./atlas/button":136,"./atlas/button.json":136,"./atlas/button.png":419,"./atlas/fs_generic":137,"./atlas/fs_generic.json":137,"./atlas/fs_generic.png":420,"./atlas/label":138,"./atlas/label.json":138,"./atlas/label.png":421,"./atlas/ui":139,"./atlas/ui.json":139,"./atlas/ui.png":422,"./data/basePack":140,"./data/basePack.json":140,"./data/config":141,"./data/config.json":141,"./data/configDataCollection":142,"./data/configDataCollection.json":142,"./data/creditsPack":143,"./data/creditsPack.json":143,"./data/dataCollectionPack":144,"./data/dataCollectionPack.json":144,"./data/gameOverPack":145,"./data/gameOverPack.json":145,"./data/gamePack":146,"./data/gamePack.json":146,"./data/highscorePack":147,"./data/highscorePack.json":147,"./data/instructionsPack":148,"./data/instructionsPack.json":148,"./data/menuPack":149,"./data/menuPack.json":149,"./data/nameInputPack":150,"./data/nameInputPack.json":150,"./data/shop":151,"./data/shop.json":151,"./data/shopPack":152,"./data/shopPack.json":152,"./data/text":153,"./data/text.json":153,"./font/Aero.css":423,"./font/Aero.woff":154,"./font/Montserrat-Regular.css":424,"./font/Montserrat-Regular.woff":155,"./font/Roboto-Regular.css":425,"./font/Roboto-Regular.woff":156,"./font/RobotoCondensed-BoldItalic.css":426,"./font/RobotoCondensed-BoldItalic.woff":157,"./font/go3v2.css":427,"./font/go3v2.woff":158,"./image/bgStart.png":428,"./image/default.png":429,"./image/loading.png":430,"./image/loadingBG.jpg":431,"./image/logo.png":432,"./layout/credits":159,"./layout/credits.json":159,"./layout/dsgvo":160,"./layout/dsgvo.json":160,"./layout/end":161,"./layout/end.json":161,"./layout/game":162,"./layout/game.json":162,"./layout/highscore":163,"./layout/highscore.json":163,"./layout/ingame":164,"./layout/ingame.json":164,"./layout/menu":165,"./layout/menu.json":165,"./layout/nameEntry":166,"./layout/nameEntry.json":166,"./layout/popupBuy":167,"./layout/popupBuy.json":167,"./layout/popupUnlock":168,"./layout/popupUnlock.json":168,"./layout/preload":169,"./layout/preload.json":169,"./layout/shop":170,"./layout/shop.json":170,"./layout/start":171,"./layout/start.json":171,"./layout/tutorial":172,"./layout/tutorial.json":172,"./layout/unlock":173,"./layout/unlock.json":173,"./model/char_01":174,"./model/char_01.json":174,"./model/char_01_tex.png":433,"./model/cloud.png":434,"./model/coin_01":175,"./model/coin_01.json":175,"./model/coin_02":176,"./model/coin_02.json":176,"./model/coin_03":177,"./model/coin_03.json":177,"./model/collectible":178,"./model/collectible.json":178,"./model/drivers/driver_01_01":179,"./model/drivers/driver_01_01.json":179,"./model/drivers/driver_01_01.png":435,"./model/drivers/driver_01_02":180,"./model/drivers/driver_01_02.json":180,"./model/drivers/driver_01_02.png":436,"./model/drivers/driver_01_03":181,"./model/drivers/driver_01_03.json":181,"./model/drivers/driver_01_03.png":437,"./model/drivers/driver_02_01":182,"./model/drivers/driver_02_01.json":182,"./model/drivers/driver_02_01.png":438,"./model/drivers/driver_02_02":183,"./model/drivers/driver_02_02.json":183,"./model/drivers/driver_02_02.png":439,"./model/drivers/driver_02_03":184,"./model/drivers/driver_02_03.json":184,"./model/drivers/driver_02_03.png":440,"./model/drivers/driver_03_01":185,"./model/drivers/driver_03_01.json":185,"./model/drivers/driver_03_01.png":441,"./model/drivers/driver_03_02":186,"./model/drivers/driver_03_02.json":186,"./model/drivers/driver_03_02.png":442,"./model/drivers/driver_03_03":187,"./model/drivers/driver_03_03.json":187,"./model/drivers/driver_03_03.png":443,"./model/env_atlas.png":444,"./model/sky":188,"./model/sky.json":188,"./model/skyplane.png":445,"./model/smoke.png":446,"./model/tex_aura.png":447,"./model/tracks":189,"./model/tracks.json":189,"./model/vehicles/vehicle_01":190,"./model/vehicles/vehicle_01.json":190,"./model/vehicles/vehicle_01_01.png":448,"./model/vehicles/vehicle_01_02.png":449,"./model/vehicles/vehicle_01_03.png":450,"./model/vehicles/vehicle_01_04.png":451,"./model/vehicles/vehicle_01_05.png":452,"./model/vehicles/vehicle_01_06.png":453,"./model/vehicles/vehicle_02":191,"./model/vehicles/vehicle_02.json":191,"./model/vehicles/vehicle_02_01.png":454,"./model/vehicles/vehicle_02_02.png":455,"./model/vehicles/vehicle_03":192,"./model/vehicles/vehicle_03.json":192,"./model/vehicles/vehicle_03_01.png":456,"./model/vehicles/vehicle_03_02.png":457,"./particles/magnet":193,"./particles/magnet.json":193,"./particles/toonCloudEffect":194,"./particles/toonCloudEffect.json":194,"./particles/vehicle_01":195,"./particles/vehicle_01.json":195,"./particles/vehicle_02_03":196,"./particles/vehicle_02_03.json":196,"./particles/vehicle_03_01":197,"./particles/vehicle_03_01.json":197,"./particles/vehicle_03_02":198,"./particles/vehicle_03_02.json":198,"./snd/char1.m4a":458,"./snd/char1.ogg":459,"./snd/char2.m4a":460,"./snd/char2.ogg":461,"./snd/click.m4a":462,"./snd/click.ogg":463,"./snd/countdown.m4a":464,"./snd/countdown.ogg":465,"./snd/crash.m4a":466,"./snd/crash.ogg":467,"./snd/duck.m4a":468,"./snd/duck.ogg":469,"./snd/gameover.m4a":470,"./snd/gameover.ogg":471,"./snd/highscore.m4a":472,"./snd/highscore.ogg":473,"./snd/jump.m4a":474,"./snd/jump.ogg":475,"./snd/magnet.m4a":476,"./snd/magnet.ogg":477,"./snd/music01.m4a":478,"./snd/music01.ogg":479,"./snd/pickup.m4a":480,"./snd/pickup.ogg":481,"./snd/screenchange.m4a":482,"./snd/screenchange.ogg":483,"./snd/switch.m4a":484,"./snd/switch.ogg":485,"./snd/wind.m4a":486,"./snd/wind.ogg":487};o.keys=function(){return Object.keys(n)},o.resolve=r,e.exports=o,o.id=418},function(e,t,a){e.exports=a.p+'assets/atlas/button_bad26a6b2e880803290e71dbf5c6eb75.png'},function(e,t,a){e.exports=a.p+'assets/atlas/fs_generic_189952c710b324dce920d0eab7719b02.png'},function(e,t,a){e.exports=a.p+'assets/atlas/label_85f3698e5fe9b3ef5734739dd5c8d3dc.png'},function(e,t,a){e.exports=a.p+'assets/atlas/ui_306952fa89231a1313fe9fc06e994a9d.png'},function(e,t,a){e.exports=a.p+'assets/font/Aero_a61abbb1982e8cde977d1826541796e9.css'},function(e,t,a){e.exports=a.p+'assets/font/Montserrat-Regular_a0226baf11467913aad5e7282d826d67.css'},function(e,t,a){e.exports=a.p+'assets/font/Roboto-Regular_2f2a2096fec12db0e111f569a1509088.css'},function(e,t,a){e.exports=a.p+'assets/font/RobotoCondensed-BoldItalic_a4be93454d9105849893356718f4ed39.css'},function(e,t,a){e.exports=a.p+'assets/font/go3v2_9a42a4e80c35fc671b707d3aed16765f.css'},function(e,t,a){e.exports=a.p+'assets/image/bgStart_30fddb822280a920c08f88db3310c531.png'},function(e,t,a){e.exports=a.p+'assets/image/default_a93bad6981d8aa1ccd112d7208b06e15.png'},function(e,t,a){e.exports=a.p+'assets/image/loading_03894db76074564e90aff77cb9076697.png'},function(e,t,a){e.exports=a.p+'assets/image/loadingBG_1adc209d823066ae7aaeae77a6081cc0.jpg'},function(e,t,a){e.exports=a.p+'assets/image/logo_5838bfcc2cf17a8432049c986f185159.png'},function(e,t,a){e.exports=a.p+'assets/model/char_01_tex_0afe805bcace5d798c8be7379f53b395.png'},function(e,t,a){e.exports=a.p+'assets/model/cloud_c7d0729d3cfae8f27a65d4a039b461dd.png'},function(e,t,a){e.exports=a.p+'assets/model/drivers/driver_01_01_b66f7073a878cfa0923e3cecf118c763.png'},function(e,t,a){e.exports=a.p+'assets/model/drivers/driver_01_02_fef0d86b00ec236d4937053e06f8b135.png'},function(e,t,a){e.exports=a.p+'assets/model/drivers/driver_01_03_bc5133cc2fa80d0cb5b562193edd1104.png'},function(e,t,a){e.exports=a.p+'assets/model/drivers/driver_02_01_33b6c66036d1011921452afaca9d104b.png'},function(e,t,a){e.exports=a.p+'assets/model/drivers/driver_02_02_41d14ea01e8d74b4f61f028ef200d13a.png'},function(e,t,a){e.exports=a.p+'assets/model/drivers/driver_02_03_bf6fccbfe8eda7fa4671e19b9cd05d82.png'},function(e,t,a){e.exports=a.p+'assets/model/drivers/driver_03_01_b561b74e750533482a131b8f7f01973f.png'},function(e,t,a){e.exports=a.p+'assets/model/drivers/driver_03_02_1dabdd30d5fdbb26be2449d5c4e1bde2.png'},function(e,t,a){e.exports=a.p+'assets/model/drivers/driver_03_03_78a1a032c3a2fd1f8fb158c039c1bda1.png'},function(e,t,a){e.exports=a.p+'assets/model/env_atlas_3415fd5e18d9bf76689fc8c80a88f336.png'},function(e,t,a){e.exports=a.p+'assets/model/skyplane_9a99f1c4fd506293349863948293a108.png'},function(e,t,a){e.exports=a.p+'assets/model/smoke_9bd308cbc2c7177c2cb925d04be13115.png'},function(e,t,a){e.exports=a.p+'assets/model/tex_aura_92ec8b87392b19e0bb0185f8572876a9.png'},function(e,t,a){e.exports=a.p+'assets/model/vehicles/vehicle_01_01_52970ce71bb41f5a58449d6bd58d01ba.png'},function(e,t,a){e.exports=a.p+'assets/model/vehicles/vehicle_01_02_b088d409a677815c7a542fded45f2a1e.png'},function(e,t,a){e.exports=a.p+'assets/model/vehicles/vehicle_01_03_562dfc17a7573e7cd51ff5c8d8a3d17a.png'},function(e,t,a){e.exports=a.p+'assets/model/vehicles/vehicle_01_04_50199d4ff71e35d2cac9cbeb79df8922.png'},function(e,t,a){e.exports=a.p+'assets/model/vehicles/vehicle_01_05_e7e1cfd6a69cabcd121e9a0a0c43bd45.png'},function(e,t,a){e.exports=a.p+'assets/model/vehicles/vehicle_01_06_67fe1e54144cf8e8309b2bf1db6db3e1.png'},function(e,t,a){e.exports=a.p+'assets/model/vehicles/vehicle_02_01_befb6000363fdb5275a3da6d7b7f45fd.png'},function(e,t,a){e.exports=a.p+'assets/model/vehicles/vehicle_02_02_98292a08e8c2d6d63e9f65fc60463950.png'},function(e,t,a){e.exports=a.p+'assets/model/vehicles/vehicle_03_01_a34add72d0389d7463afc729507059e7.png'},function(e,t,a){e.exports=a.p+'assets/model/vehicles/vehicle_03_02_effb3bba4617f669dad201715540bfd3.png'},function(e,t,a){e.exports=a.p+'assets/snd/char1_9755db74fded2025e5afbf28d7ff316f.m4a'},function(e,t,a){e.exports=a.p+'assets/snd/char1_9040dd1d59451c02f152297b0dab0a46.ogg'},function(e,t,a){e.exports=a.p+'assets/snd/char2_42e68f6e8b0899837fd6c4c5ab017c11.m4a'},function(e,t,a){e.exports=a.p+'assets/snd/char2_f9c364ed5f252044ecd059d61c05b133.ogg'},function(e,t,a){e.exports=a.p+'assets/snd/click_cd603f1a23829fe7f4a9895044bef474.m4a'},function(e,t,a){e.exports=a.p+'assets/snd/click_ad8f44d0420bc7a384aa9f974983b77e.ogg'},function(e,t,a){e.exports=a.p+'assets/snd/countdown_e8663d025928559eeac5f914e4a94337.m4a'},function(e,t,a){e.exports=a.p+'assets/snd/countdown_278aba62df0b1fb17f086765ac7e6129.ogg'},function(e,t,a){e.exports=a.p+'assets/snd/crash_2f0aa84027fc14647bd0430895a0e3c4.m4a'},function(e,t,a){e.exports=a.p+'assets/snd/crash_31c834462e1223265f94dabed3f8bead.ogg'},function(e,t,a){e.exports=a.p+'assets/snd/duck_3a198b6b6143f6aa2220623d748e14d9.m4a'},function(e,t,a){e.exports=a.p+'assets/snd/duck_4741238aff07a20295cf18c15477fa2b.ogg'},function(e,t,a){e.exports=a.p+'assets/snd/gameover_69247eab6fb69d3bfcf63c6ddd6302f2.m4a'},function(e,t,a){e.exports=a.p+'assets/snd/gameover_8231761043f690a198b6529262b8aa2a.ogg'},function(e,t,a){e.exports=a.p+'assets/snd/highscore_6e2a792faa6f0d6afff99b533182396e.m4a'},function(e,t,a){e.exports=a.p+'assets/snd/highscore_9085d2c956b482fd5572e37b4cbd464a.ogg'},function(e,t,a){e.exports=a.p+'assets/snd/jump_3da12237104703dbf62c60ff6c8236bb.m4a'},function(e,t,a){e.exports=a.p+'assets/snd/jump_ed454e04496dcb89c44970632aaafd61.ogg'},function(e,t,a){e.exports=a.p+'assets/snd/magnet_7a8c2d9a85320e3d773a7054b5d6678a.m4a'},function(e,t,a){e.exports=a.p+'assets/snd/magnet_86e4e13336f6227579379e85ab0033f0.ogg'},function(e,t,a){e.exports=a.p+'assets/snd/music01_891c45c1f04176bd7d12ec6918908bb7.m4a'},function(e,t,a){e.exports=a.p+'assets/snd/music01_8393112d0e471105e1a081cf4125a000.ogg'},function(e,t,a){e.exports=a.p+'assets/snd/pickup_485d33f130ef084e1927e765197a960c.m4a'},function(e,t,a){e.exports=a.p+'assets/snd/pickup_04ba9295e2a3852c082bff6017e26aad.ogg'},function(e,t,a){e.exports=a.p+'assets/snd/screenchange_0e226b719b49ebe3feb12477ecfe55f3.m4a'},function(e,t,a){e.exports=a.p+'assets/snd/screenchange_a186934600fffcfbd7fcb071b4ad78b6.ogg'},function(e,t,a){e.exports=a.p+'assets/snd/switch_23cd23aa89087d5c56d06a9b10715027.m4a'},function(e,t,a){e.exports=a.p+'assets/snd/switch_a2aa2617346d13d12a40da873158c3db.ogg'},function(e,t,a){e.exports=a.p+'assets/snd/wind_e13ab69c88e77f848cfaa1e81c824cb2.m4a'},function(e,t,a){e.exports=a.p+'assets/snd/wind_01d6508a49d25c8c2af5347a312eb91f.ogg'},function(){Phaser.Pointer.prototype.move=function(){return function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],a=this.game.input;if(!a.pollLocked){void 0===t&&(t=!1),void 0!==e.button&&(this.button=e.button),this.isMouse&&this.updateButtons(e),this.clientX=e.clientX,this.clientY=e.clientY,this.pageX=e.pageX,this.pageY=e.pageY,this.screenX=e.screenX,this.screenY=e.screenY,this.isMouse&&a.mouse.locked&&!t&&(this.rawMovementX=e.movementX||e.mozMovementX||e.webkitMovementX||0,this.rawMovementY=e.movementY||e.mozMovementY||e.webkitMovementY||0,this.movementX+=this.rawMovementX,this.movementY+=this.rawMovementY);var o=this.game.fsGameRotated,r;-90===o?(r=(this.pageY-this.game.scale.offset.x)*a.scale.x,this.x=this.game.width-this.game.width*(r/this.game.width),this.y=(this.pageX-this.game.scale.offset.y)*a.scale.y):90===o?(this.x=(this.pageY-this.game.scale.offset.x)*a.scale.x,r=(this.pageX-this.game.scale.offset.y)*a.scale.y,this.y=this.game.height-this.game.height*(r/this.game.height)):(this.x=(this.pageX-this.game.scale.offset.x)*a.scale.x,this.y=(this.pageY-this.game.scale.offset.y)*a.scale.y),this.position.setTo(this.x,this.y),this.circle.x=this.x,this.circle.y=this.y,(a.multiInputOverride===Phaser.Input.MOUSE_OVERRIDES_TOUCH||a.multiInputOverride===Phaser.Input.MOUSE_TOUCH_COMBINE||a.multiInputOverride===Phaser.Input.TOUCH_OVERRIDES_MOUSE&&0===a.totalActivePointers)&&(a.activePointer=this,a.x=this.x,a.y=this.y,a.position.setTo(a.x,a.y),a.circle.x=a.x,a.circle.y=a.y),this.withinGame=0===o?this.game.scale.bounds.contains(this.pageX,this.pageY):this.game.scale.bounds.contains(this.pageY,this.pageX);for(var n=a.moveCallbacks.length;n--;)a.moveCallbacks[n].callback.call(a.moveCallbacks[n].context,this,this.x,this.y,t);return null!==this.targetObject&&(!this.game.paused||this.targetObject.noPause)&&!0===this.targetObject.isDragged?!1===this.targetObject.update(this)&&(this.targetObject=null):0<a.interactiveItems.total&&this.processInteractiveObjects(t),this}}}()},function(e,t,a){var o=a(55),r=function(e){return e&&e.__esModule?e:{default:e}}(o),n=Phaser.ScaleManager.prototype.resetCanvas,i=Phaser.ScaleManager.prototype.getParentBounds;Phaser.ScaleManager.prototype.resetCanvas=function(){return function(e,t){var a=this.game.canvas.style.display;if(this.game.canvas.style.display='none',this.game.three&&(this.game.three.renderer.domElement.style.display='none'),0!==this.game.fsGameRotated){var o=r['default'].getViewportSize();this.game.canvas.style.width=o.height+'px',this.game.canvas.style.height=o.width+'px';var i=this.game.fsGameRotated,s=0,l='';switch(i){case-90:s=-o.height,l='top right';break;case 90:s=-o.width,l='top left';break;default:}this.game.canvas.style.transform='rotate('+(i+'deg) translateY(')+s+'px)',this.game.canvas.style.transformOrigin=l}else{if(Phaser.Device.mobileSafari&&r['default'].isIFrame()){var d=r['default'].getViewportSize();e=d.width+'px',t=d.height+'px'}n.call(this,e,t),this.game.canvas.style.transform='',this.game.canvas.style.transformOrigin=''}this.game.canvas.style.display=a}}(),Phaser.ScaleManager.prototype.getParentBounds=function(){return function(e){var t=i.call(this,e);if(0!==this.game.fsGameRotated){var a=t.width;t.width=t.height,t.height=a}return t}}()},function(e,t,a){function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Math.round,l=Math.floor;Object.defineProperty(t,'__esModule',{value:!0});var d=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),p=a(491),c=o(p),u=a(55),y=o(u),g=a(199),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t['default']=e,t}(g),f=function(e){function t(e){r(this,t);var a={width:720,height:1280,responsive:m.SCALING_ENABLED_MOBILE|m.SCALING_ENABLED_IFRAME,lockOrientation:m.LOCK_ORIENTATION_MOBILE,fullscreen:m.FULLSCREEN_MOBILE,three:!1,container2D:'container-2d',container3D:'container-3d',enableDebug:!0,showHeader:!0,disableContextMenu:!0,antialias:'auto',threeParameters:{},phaserParameters:{renderer:Phaser.CANVAS,enableDebug:!0,roundPixels:!0}};Phaser.Utils.mixin(e,a),a.phaserParameters.enableDebug=a.enableDebug;var o,i;Phaser.Device.onInitialized.add(function(){Phaser.Device.mspointer=!1,'auto'===a.antialias?(o=!Phaser.Device.iOS,i=Phaser.Device.desktop):(o=a.antialias,i=a.antialias),s.antialias=o,a.threeParameters.antialias=i,a.showHeader&&s._showHeader(a.enableDebug)}),a.phaserParameters.parent=a.container2D,a.phaserParameters.width=a.width,a.phaserParameters.height=a.height,a.phaserParameters.transparent=a.three;var s=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a.phaserParameters));return s.fsConf=a,s.three=null,s.fsGameRotated=0,s.device.whenReady(function(){s._setupThree(),s._setupScaling(),s._setupDebug(),s._applyCommonWorkarounds()}),s}return i(t,e),d(t,[{key:'_setupThree',value:function(){return function(){this.fsConf.three&&(this.device.webGL?this.three=new c['default'](this):(console.error('WebGL not supported'),this._showWebGlError()))}}()},{key:'_setupScaling',value:function(){return function(){var t=this,e=this.isResponsiveEnabled();return this.scale.compatibility.noMargins=e,this.device.mobileSafari||(this.scale.pageAlignVertically=!0),this.scale.pageAlignHorizontally=!0,this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.isFullscreenEnabled()&&(this.scale.fullScreenScaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.onFullScreenError.add(function(a){console.error('can\'t enter fullscreen',a.event),t.scale.fullScreenTarget=null,t.fsConf.fullscreen=m.NONE})),e?void this.scale.setResizeCallback(function(){var e=y['default'].getViewportSize(),a=t.fsConf.width/t.fsConf.height,o=e.width/e.height,r=1,n=t.fsConf.width,i=t.fsConf.height;if(t.fsGameRotated=0,t.isLockOrientationEnabled()){var s=t.fsConf.width>t.fsConf.height,d=t.fsConf.height>t.fsConf.width;if(y['default'].isFullScreen()&&y['default'].canLockScreen()){if(y['default'].isIFrame()){var p=window.frameElement;try{p.sandbox?!/allow-orientation-lock/.test(p.sandbox)&&(p.sandbox+=' allow-orientation-lock'):p.sandbox='allow-orientation-lock'}catch(t){console.warn('can\'t make iframe to allow orientation lock',t)}}var c='portrait';s&&(c='landscape'),window.screen.orientation.lock(c)['catch'](function(a){t.debug.isDisabled||console.warn('orientation lock failed',a)})}var u=e.width>e.height,g=e.height>e.width;if(s!=u||d!=g){o=e.height/e.width;var m=y['default'].getScreenOrientation();d&&'landscape-primary'===m?t.fsGameRotated=-90:d&&'landscape-secondary'===m?t.fsGameRotated=90:s&&'portrait-primary'===m?t.fsGameRotated=90:s&&'portrait-secondary'===m&&(t.fsGameRotated=-90)}}a<o?(r=o/a,n=l(n*r)):a>o&&(r=a/o,i=l(i*r)),(n!==t.width||i!==t.height)&&(t.scale.setGameSize(n,i),t.scale.refresh(),t.three&&t.three.resize());var f=t.state.getCurrentState();f&&'resize'in f&&f.resize()}):(this.scale.maxWidth=this.fsConf.width,void(this.scale.maxHeight=this.fsConf.height))}}()},{key:'_setupDebug',value:function(){return function(){var e=this;if(!this.debug.isDisabled){this.time.advancedTiming=!0;var t=500,a=0,o=new Phaser.Text(this,0,0,'',{font:'bold 24px monospace',fill:'#ffffff',stroke:'#000000',backgroundColor:'rgba(0, 0, 0, 0.5)',strokeThickness:4});o.lineSpacing=-12,this.stage.addChild(o),this.debug.extraText=null,o.update=function(){if(a+=e.time.elapsedMS,a>t){if(a-=t,o.text=e.time.fps+'/'+(e.time.suggestedFps+' fps ')+(y['default'].getScreenOrientation()+'\nDisplay: ')+(e.canvas.clientWidth+'x')+(e.canvas.clientHeight+'@')+(window.devicePixelRatio.toFixed(2)+'\nPhaser:  ')+(e.width+'x')+(e.height+'@')+(e.scale.scaleFactorInversed.x.toFixed(2)+''),e.three){var r=e.three.renderer,n=r.info,i=r.getDrawingBufferSize();o.text+='\nThree:   '+(i.width+'x')+(i.height+'\n== Memory ========\nPrograms:   ')+(n.programs.length+'\nGeometries: ')+(n.memory.geometries+'\nTextures:   ')+(n.memory.textures+'\n== Render ========\nCalls:      ')+(n.render.calls+'\nVertices:   ')+(n.render.vertices+'\nFaces:      ')+(n.render.faces+'\nPoints:     ')+(n.render.points+'')}e.debug.extraText&&(o.text+='\n'+(e.debug.extraText+''))}},window.fsDebug={game:this}}}}()},{key:'_applyCommonWorkarounds',value:function(){return function(){var e=this;this.input.keyboard.addKeyCapture(Phaser.Keyboard.UP),this.input.keyboard.addKeyCapture(Phaser.Keyboard.DOWN),this.input.keyboard.addKeyCapture(Phaser.Keyboard.LEFT),this.input.keyboard.addKeyCapture(Phaser.Keyboard.RIGHT),this.input.keyboard.addKeyCapture(Phaser.Keyboard.SPACEBAR),this.onBlur.add(function(){e.input.reset()});var t=y['default'].isIFrame();if(this.device.iOS&&t&&(this.stage.disableVisibilityChange=!0),t){var a=document.createElement('input');document.body.appendChild(a),a.focus(),document.body.removeChild(a)}this.three&&this.device.iOS&&(this.three.renderer.capabilities.floatVertexTextures=!1),this.fsConf.disableContextMenu&&document.body.addEventListener('contextmenu',function(t){t.preventDefault()})}}()},{key:'_showHeader',value:function(){function e(){var e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];this.device.ie?console.log('A game by Flying Sheep Studios https://flying-sheep.com'):console.log('%c  A game by  %c Flying Sheep Studios %c  %c https://flying-sheep.com','line-height: 1.5; font-size: 100%; background: #474747; color: #fff;','line-height: 1.5; font-size: 150%; background: #33b3f2; color: #fff;','line-height: 1.5; font-size: 100%; background: #474747;','line-height: 1.5; font-size: 100%; background: #fff;'),e&&'fsVersion'in window&&console.log(window.fsVersion)}return e}()},{key:'_showWebGlError',value:function(){return function(){var e=this,t=new Phaser.Graphics(this);t.beginFill(0),t.drawRect(0,0,this.width,this.height),t.endFill(),t.inputEnabled=!0;var a=new Phaser.Text(this,this.width/2,this.height/2,'WebGL is not supported',{font:'bold 128px sans-serif',fill:'#ff0000',align:'center',wordWrap:!0,wordWrapWidth:s(.8*this.width)});a.anchor.set(.5,.5),this.stage.addChild(t),this.stage.addChild(a),this.scale.onSizeChange.add(function(){t.beginFill(0),t.drawRect(0,0,e.width,e.height),t.endFill(),a.position.set(e.width/2,e.height/2),a.wordWrapWidth=s(.8*e.width)})}}()},{key:'startFullscreen',value:function(){return function(){if(!y['default'].isFullScreen()&&this.isFullscreenEnabled()){if(!y['default'].isIFrame())this.scale.fullScreenTarget=document.body;else if(window.frameElement)try{window.frameElement.allowfullscreen=!0,this.scale.fullScreenTarget=window.frameElement}catch(t){console.warn('cant set allowfullscreen on iframe, fullscreen disabled'),this.fsConf.fullscreen=m.NONE,this.scale.fullScreenTarget=null}else console.warn('cant access frameElement, fullscreen disabled'),this.fsConf.fullscreen=m.NONE,this.scale.fullScreenTarget=null;this.scale.fullScreenTarget&&this.scale.startFullScreen()}}}()},{key:'isResponsiveEnabled',value:function(){return function(){return 0<(this.fsConf.responsive&m.SCALING_ENABLED_MOBILE)&&!this.device.desktop||0<(this.fsConf.responsive&m.SCALING_ENABLED_DESKTOP)&&this.device.desktop||0<(this.fsConf.responsive&m.SCALING_ENABLED_IFRAME)&&y['default'].isIFrame()}}()},{key:'isLockOrientationEnabled',value:function(){return function(){var e=0<(this.fsConf.lockOrientation&m.LOCK_ORIENTATION_MOBILE)&&!this.device.desktop||0<(this.fsConf.lockOrientation&m.LOCK_ORIENTATION_DESKTOP)&&this.device.desktop;return e&&this.isResponsiveEnabled()}}()},{key:'isFullscreenEnabled',value:function(){return function(){var e=0<(this.fsConf.fullscreen&m.FULLSCREEN_MOBILE)&&!this.device.desktop||0<(this.fsConf.fullscreen&m.FULLSCREEN_DESKTOP)&&this.device.desktop;return e&&this.device.fullscreen&&this.isResponsiveEnabled()}}()}]),t}(Phaser.Game);t['default']=f},function(e,t,a){function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),n=a(50),i=function(){function e(t){var a=this;o(this,e),this.game=t,this.renderer=new n.WebGLRenderer(t.fsConf.threeParameters),this.renderer.setSize(this.game.width,this.game.height,!1),this.renderer.domElement.style.display='none';var r=document.getElementById(t.fsConf.container3D);r.appendChild(this.renderer.domElement),this.styleObserver=new MutationObserver(function(){a._copyPhaserStyles()})}return r(e,[{key:'show',value:function(){return function(){this._copyPhaserStyles(),this.styleObserver.observe(this.game.canvas,{attributes:!0,attributeFilter:['style']})}}()},{key:'hide',value:function(){return function(){this.styleObserver.disconnect(),this.renderer.domElement.style.display='none'}}()},{key:'resize',value:function(){return function(){this.renderer.setSize(this.game.width,this.game.height,!1)}}()},{key:'_copyPhaserStyles',value:function(){return function(){this.renderer.domElement.style.cssText=this.game.canvas.style.cssText}}()}]),e}();t['default']=i},function(e,t,a){function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function r(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function n(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var i=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),s=a(55),l=function(e){return e&&e.__esModule?e:{default:e}}(s),d=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.createOnceRun=!1,e}return n(t,e),i(t,[{key:'init',value:function(){return function(){this.game.debug.isDisabled||(window.fsDebug.state=this);for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];0<t.length&&(this.packs=t),this.game.isFullscreenEnabled()&&this.input.onUp.add(this.game.startFullscreen,this.game)}}()},{key:'preload',value:function(){return function(){var e=this;this.previousDisableVisibilityChange=this.game.stage.disableVisibilityChange,this.game.stage.disableVisibilityChange=!0,this.packs&&(this.game.preloadLayout&&(this.game.preloadLayout.setup(),this.game.world.add(this.game.preloadLayout)),this.packs.forEach(function(t){e.game.load.pack(t.key,t.url?l['default'].getAssetUrl(t.url):null,t.data)}))}}()},{key:'createOnce',value:function(){return function(){this.createOnceRun=!0}}()},{key:'create',value:function(){return function(){this.game.preloadLayout&&(this.game.world.remove(this.game.preloadLayout),this.game.preloadLayout.clear()),this.game.stage.disableVisibilityChange=this.previousDisableVisibilityChange,this.createOnceRun||this.createOnce()}}()}]),t}(Phaser.State);t['default']=d},function(e,t){function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}var o=Math.round;Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),n=function(){function e(){a(this,e),this._store={}}return r(e,[{key:'getItem',value:function(){function e(e){return e in this._store?this._store[e]:null}return e}()},{key:'setItem',value:function(){return function(e,t){this._store[e]=t.toString()}}()}]),e}(),i=function(){function e(t){var o=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];a(this,e),this._prefix=t,this._storage=null,this.localStorageAvailable=!1,this.sessionStorageAvailable=!1,this._testStorage(),this._storage=!o&&this.localStorageAvailable?window.localStorage:this.sessionStorageAvailable?window.sessionStorage:new n}return r(e,[{key:'getItem',value:function(){return function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,a;try{a=this._storage.getItem(this._prefix+e),a=JSON.parse(a)}catch(o){a=t}return null===a?t:a}}()},{key:'setItem',value:function(){return function(e,t){try{this._storage.setItem(this._prefix+e,JSON.stringify(t))}catch(t){console.error(t)}}}()},{key:'_testStorage',value:function(){return function(){var e='test_'+(o(1e6*Math.random()).toString()+''),t='value_'+(o(1e6*Math.random()).toString()+''),a=this._storage,r;this._storage=window.localStorage,this.setItem(e,t),r=this.getItem(e),this.localStorageAvailable=r===t,this._storage.removeItem(this._prefix+e),this._storage=window.sessionStorage,this.setItem(e,t),r=this.getItem(e),this.sessionStorageAvailable=r===t,this._storage.removeItem(this._prefix+e),this._storage=a}}()}]),e}();t['default']=i},function(e,t,a){function o(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function i(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function s(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var l=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),d=function(){function e(t,a,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(r===void 0){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,a,o)}if('value'in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(o)}return e}(),p=a(18),c=o(p),u=a(22),y=o(u),g=function(e){function t(){n(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.nextState=null,e.nextStateParams=[],e}return s(t,e),l(t,[{key:'init',value:function(){return function(e,a){for(var o=arguments.length,r=Array(2<o?o-2:0),n=2,i;n<o;n++)r[n-2]=arguments[n];(i=d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'init',this)).call.apply(i,[this].concat(r)),this.nextState=e,this.nextStateParams=a}}()},{key:'create',value:function(){return function(){var e;d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'create',this).call(this);var a=this.game.cache.getJSON('config');this.game.storageKey=a.storageKey,this.game.tracking={enabled:!1,debug:!1};var o=a.playFab;this.game.playFab={titleId:o.titleId},this.game.cache.checkLayoutKey('layout_preload')&&(this.game.preloadLayout=new y['default'].Layout(this.game,this.game.cache.getLayout('layout_preload')));var n=[this.nextState,!0,!1].concat(this.nextStateParams);(e=this.game.state).start.apply(e,r(n))}}()}]),t}(c['default'].State.Base);t['default']=g},function(e,t,a){function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var s=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=function(){function e(t,a,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(r===void 0){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,a,o)}if('value'in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(o)}return e}(),d=a(18),p=o(d),c=a(22),u=o(c),y=a(496),g=o(y),m=a(33),f=o(m),h=a(497),b=o(h),v=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:'init',value:function(){return function(){for(var e={key:'menuState',url:'data/menuPack.json'},a={key:'dataCollectionState',url:'data/dataCollectionPack.json'},o=arguments.length,r=Array(o),n=0,i;n<o;n++)r[n]=arguments[n];(i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'init',this)).call.apply(i,[this,e,a].concat(r))}}()},{key:'createOnce',value:function(){return function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'createOnce',this).call(this),this.config=this.game.cache.getJSON('config'),this.storage=new p['default'].Storage(this.config.storageKey),this.sndClick=this.game.add.audio('click'),this.sndMusic=this.game.add.audio('music',1,!0),this.sndMusic.play()}}()},{key:'create',value:function(){return function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'create',this).call(this),this.game.tracking.enabled&&GameAnalytics('addDesignEvent','Menu'),this.createUI(),this.dataCollectionPopup=new g['default'](this.game,this.config.storageKey,function(){b['default'].includeGameAnalytics(function(){e.game.tracking.enabled=!0;var t=e.config.tracking.browser;GameAnalytics('setEnabledInfoLog',e.game.tracking.debug),GameAnalytics('configureBuild','1.0.0'),GameAnalytics('initialize',t.gameKey,t.secretKey),GameAnalytics('addDesignEvent','Menu')}),b['default'].includePlayFab()}),this.game.config.enableDebug}}()},{key:'createUI',value:function(){return function(){var e=this;this.layout=new u['default'].Layout(this.game,this.game.cache.getLayout('layout_menu')),this.layout.setup(),this.game.world.add(this.layout);var t=this.layout.getElementById('buttonStart');t.onDownSound=this.sndClick,t.onInputUp.add(this.startShopState,this);var a=this.layout.getElementById('buttonTutorial');a.onDownSound=this.sndClick,a.onInputUp.add(this.startInstructionsState,this);var o=this.layout.getElementById('buttonCredits');o.onDownSound=this.sndClick,o.onInputUp.add(this.startCreditsState,this);var r=this.layout.getElementById('buttonHighscore');r.onDownSound=this.sndClick,r.onInputUp.add(this.startHighscoreState,this);var n=this.layout.getElementById('buttonSound');n.onDownSound=this.sndClick,this.game.sound.mute&&n.useState('muted'),n.onInputUp.add(function(){'default'===n.getCurrentState()?(e.game.sound.mute=!0,n.useState('muted')):(e.game.sound.mute=!1,n.useState('default'))})}}()},{key:'resize',value:function(){return function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'resize',this).call(this),this.dataCollectionPopup&&this.dataCollectionPopup.resize()}}()},{key:'startShopState',value:function(){return function(){this.storage.getItem('instructions_lock',!1)?(this.storage.setItem('instructions_lock',!0),this.startInstructionsState()):this.game.state.start('shop',!0,!1)}}()},{key:'startInstructionsState',value:function(){return function(){this.game.state.start('instructions')}}()},{key:'startCreditsState',value:function(){return function(){this.game.state.start('credits')}}()},{key:'startHighscoreState',value:function(){return function(){this.game.state.start('highscore')}}()}]),t}(f['default']);t['default']=v},function(e,t,a){function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var n=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),i=a(22),s=o(i),l=a(18),d=o(l),p=function(){function e(t,a,o){if(r(this,e),this.game=t,this.gameId=a,this.acceptCB=o,this.config=this.game.cache.getJSON('configDataCollection'),this.storage=new d['default'].Storage('fs-legal-terms-'),this.open=!0,this.storage.getItem(a))return void this.close();this._createDimmer(),this._createUI();var n=navigator.language.substr(0,2);this.setLanguage(n)}return n(e,[{key:'_createDimmer',value:function(){return function(){this.dimmer=new Phaser.Graphics(this.game,0,0),this.dimmer.beginFill('0x000000'),this.dimmer.drawRect(0,0,this.game.width,this.game.height),this.dimmer.endFill(),this.dimmer.alpha=.5,this.dimmer.inputEnabled=!0,this.game.world.add(this.dimmer)}}()},{key:'_createUI',value:function(){return function(){var e=this;this.layout=new s['default'].Layout(this.game,this.game.cache.getLayout('layout_dsgvo')),this.layout.setup(),this.game.world.add(this.layout),this.legalText=this.layout.getElementById('var_policyText'),this.privacyLink=this.layout.getElementById('var_policyLink'),this.privacyLink.inputEnabled=!0,this.privacyLink.events.onInputUp.add(function(t,a,o){o&&Object.assign(document.createElement('a'),{target:'_blank',href:e.configText.privacyUrl}).click()}),this.privacyLink.wordWrap=!1,this.underline=null,this.acceptButton=this.layout.getElementById('acceptButton'),this.acceptButton.onInputUp.add(function(t,a,o){o&&(e.storage.setItem(e.gameId,!0),e.close())})}}()},{key:'setLanguage',value:function(){return function(e){this.configText=this.config.languages[e],this.configText||(this.configText=this.config.languages['language-fallback']),this.legalText.setText(this.configText.legalText),this.privacyLink.setText(this.configText.privacyUrlText);var t=this.acceptButton.children[0];t.text=this.configText.agreeButtonText,this.acceptButton.setText('default',t),this._updateUnderline()}}()},{key:'_updateUnderline',value:function(){return function(){this.underline&&this.underline.parent&&this.underline.parent.removeChild(this.underline),this.underline=new Phaser.Graphics(this.game,0,5),this.underline.beginFill('0xffffff'),this.underline.drawRect(0,0,this.privacyLink.width,5),this.underline.endFill(),this.underline.position.x=.5*-this.privacyLink.width,this.privacyLink.addChild(this.underline)}}()},{key:'close',value:function(){return function(){var e=this;if(this.open){if(this.open=!1,this.dimmer){var t=this.game.add.tween(this.dimmer).to({alpha:0},1e3,Phaser.Easing.Linear.None,!0,500,0,!1);t.onComplete.add(function(){e.dimmer.visible=!1})}if(this.layout){this.acceptButton.inputEnabled=!1,this.privacyLink.inputEnabled=!1;var a=this.game.add.tween(this.layout.position).to({y:1.5*this.game.height},500,Phaser.Easing.Back.In,!0,0,0,!1);a.onComplete.add(function(){e.layout.visible=!1})}this.acceptCB&&this.acceptCB()}}}()},{key:'resize',value:function(){return function(){this.dimmer&&(this.dimmer.width=this.game.width,this.dimmer.height=this.game.height)}}()}]),e}();t['default']=p},function(e,t){function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),r=function(){function e(){a(this,e)}return o(e,null,[{key:'includeGameAnalytics',value:function(){return function(e){(function(t,o,r,a){var n='script',i='GameAnalytics';t[i]=t[i]||function(){for(var e=arguments.length,a=Array(e),o=0;o<e;o++)a[o]=arguments[o];(t[i].q=t[i].q||[]).push(a)},r=o.createElement(n),a=o.getElementsByTagName(n)[0],r.async=1,r.src='//download.gameanalytics.com/js/GameAnalytics-3.0.1.min.js',a.parentNode.insertBefore(r,a),r.onload=e})(window,document)}}()},{key:'includePlayFab',value:function(){return function(){(function(e,t,o,a){var r='script',n='PlayFab';e[n]=e[n]||function(){for(var t=arguments.length,a=Array(t),o=0;o<t;o++)a[o]=arguments[o];(e[n].q=e[n].q||[]).push(a)},o=t.createElement(r),a=t.getElementsByTagName(r)[0],o.async=1,o.src='//download.playfab.com/PlayFabClientApi.js',a.parentNode.insertBefore(o,a)})(window,document)}}()}]),e}();t['default']=r},function(e,t,a){function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Math.PI,l=Math.round;Object.defineProperty(t,'__esModule',{value:!0});var d=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),p=function(){function e(t,a,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(r===void 0){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,a,o)}if('value'in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(o)}return e}(),c=a(18),u=o(c),y=a(50),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t['default']=e,t}(y),m=a(499),f=o(m),h=a(33),b=o(h),v=a(98),_=o(v),x=a(70),S=o(x),T=a(200),E=o(T),C=a(502),k=o(C),I=a(503),P=o(I),O=a(504),w=o(O),A=a(507),R=o(A),L=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}var a=Math.acos;return i(t,e),d(t,[{key:'init',value:function(){return function(e,a,o,r){for(var n={key:'gameState',url:'data/gamePack.json'},i=arguments.length,s=Array(4<i?i-4:0),l=4,d;l<i;l++)s[l-4]=arguments[l];(d=p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'init',this)).call.apply(d,[this,n].concat(s)),this.driverIndex=e,this.driverSkinIndex=a,this.vehicleIndex=o,this.vehicleSkinIndex=r}}()},{key:'createOnce',value:function(){return function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'createOnce',this).call(this),this.config=this.game.cache.getJSON('config'),this.textJson=this.game.cache.getJSON('text'),this.storage=new u['default'].Storage(this.config.storageKey),this.createVariables(!this.game.device.desktop,this),this.createScene(),this.createMaterials(),this.createMeshes(),this.createSounds(),this.createParticleEffects(),this.createEnvironment()}}()},{key:'create',value:function(){return function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'create',this).call(this),this.game.tracking.enabled&&GameAnalytics('addDesignEvent','Game'),this.elapsedTime=0,this.gameInput=new w['default'](this.game),this.addInputEvents(),this.consumables=new S['default'](this.game),this.shop=new _['default'](this.game),this.gameUI=new R['default'](this.game,this.consumables),this.setScore(0),this.totalCurrency=this.storage.getItem('currency',0),this.consumables.consume(this.consumables.Consumables.MAGNET),this.consumables.consume(this.consumables.Consumables.CURRENCY),this.gameUI.updateConsumablesHUD(this.consumables),this.createObjects(this.driverIndex,this.vehicleIndex,this.driverSkinIndex,this.vehicleSkinIndex),this.gameInit(),this.game.three.show()}}()},{key:'update',value:function(){return function(e){var a=this;p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'update',this).call(this,e);var o=this.game.time.elapsedMS/1e3;if(this.delta=o,this.elapsedTime+=o,this.gameInput.update(),this.loadingComplete&&!this.isGamePaused()){!this.player.collision&&this.running&&this.getInput(),this.updateVerticalMoveRoutine(o),this.updatePowerups(o),this.running&&this.player.offset.position.lerp(new g.Vector3(0,0,0),2*o),this.player.collision?(this.assets.audio.wind.stop(),this.player.offset.position.z-=10*o,this.player.offset.rotation.z-=4*o):(this.movement(o),this.assets.audio.wind.volume=.6*((this.player.speed-15)/(this.player.maxSpeed-15))),this.mixers.update(o),this.player.shadow.position.y=-this.player.avatar.position.y+.1;var r=Math.abs(.2*this.player.avatar.position.y);this.player.shadow.scale.set(.45*(1-r),1-r,1-r),this.threeCamera.lookAt(this.camera_target),this.camTarget.position.lerp(this.player.avatar.position,5*o),this.assets.meshes.sky.position.copy(this.player.sled.getWorldPosition()),!this.player.collision&&this.running?(this.player.distance+=o*this.player.speed,this.player.score=this.player.distance+this.currentCurrency,this.player.speed<this.player.maxSpeed&&(this.player.speed+=o*this.player.acceleration),this.gameState.setScore(l(this.currentCurrency))):this.player.collision&&(!this.DEBUG.needsRestart&&this.running&&setTimeout(function(){a.DEBUG.needsRestart=!0},3000),this.running&&setTimeout(function(){a.reset()},3000),this.running=!1,this.switchAnimation(this.assets.meshes.char.mixer,'hit',.1),this.switchAnimation(this.assets.meshes.board.mixer,'hit',.1)),void 0!==this.activeRoad&&this.activeRoad.updateCoins(this),this.sheepfx.update(o),this.updateParticles(o),this.updateAura(o),this.updateSpeedLines(o)}}}()},{key:'render',value:function(){return function(e){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'render',this).call(this,e),this.game.three.renderer.render(this.scene,this.threeCamera)}}()},{key:'resize',value:function(){return function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'resize',this).call(this),this.threeCamera&&(this.threeCamera.aspect=this.game.width/this.game.height,this.threeCamera.updateProjectionMatrix())}}()},{key:'shutdown',value:function(){return function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'shutdown',this).call(this),this.game.three.hide(),this.assets.audio.wind.stop()}}()},{key:'addInputEvents',value:function(){return function(){var e=this;(this.game.device.desktop||this.game.device.ie)&&(this.gameInput.addKeyboardEventListener(Phaser.KeyCode.UP),this.gameInput.addKeyboardEventListener(Phaser.KeyCode.DOWN),this.gameInput.addKeyboardEventListener(Phaser.KeyCode.LEFT),this.gameInput.addKeyboardEventListener(Phaser.KeyCode.RIGHT),this.gameInput.addKeyboardKeyEvent(Phaser.KeyCode.UP,this.triggerJump.bind(this)),this.gameInput.addKeyboardKeyEvent(Phaser.KeyCode.DOWN,this.triggerCrouch.bind(this)),this.gameInput.addKeyboardKeyEvent(Phaser.KeyCode.LEFT,function(){e.switchLane('left')}),this.gameInput.addKeyboardKeyEvent(Phaser.KeyCode.RIGHT,function(){e.switchLane('right')}))}}()},{key:'setScore',value:function(){return function(e){this.gameUI.txtScore.setText(e)}}()},{key:'startCountdown',value:function(){return function(){this.gameUI.currentCountDown=-1,this.advanceCountdown()}}()},{key:'advanceCountdown',value:function(){return function(){var e=this.gameUI.currentCountDown;this.gameUI.currentCountDown++,0<=e&&e<this.gameUI.lblCountDown.length&&(this.gameUI.lblCountDown[e].visible=!1),this.gameUI.currentCountDown<this.gameUI.lblCountDown.length&&(this.gameUI.lblCountDown[this.gameUI.currentCountDown].visible=!0,window.setTimeout(this.advanceCountdown.bind(this),1e3))}}()},{key:'createMaterials',value:function(){return function(){this.assets.textures={},this.supportsVertexTexture=!this.game.device.iOS;var e=this.game.cache.getThreeTexture('atlas_01');e.anisotropy=this.game.three.renderer.capabilities.getMaxAnisotropy(),e.magFilter=g.LinearFilter,e.minFilter=g.LinearFilter,this.assets.materialA.map=e,this.assets.materialB.map=e,e=this.game.cache.getThreeTexture('skydome'),this.assets.textures.sky01tex=e,this.assets.materials.sky01mat.map=this.assets.textures.sky01tex,e=this.game.cache.getThreeTexture('tex_particle'),this.assets.textures.fx01tex=e,e=this.game.cache.getThreeTexture('tex_aura'),this.assets.textures.aura01tex=e,this.assets.materials.aura01mat.map=this.assets.textures.aura01tex,e=this.game.cache.getThreeTexture('tex_cloud'),this.assets.textures.cloudTex=e}}()},{key:'createMeshes',value:function(){return function(){this.collectables=new E['default'](this.game);for(var e=0,t;e<this.collectables.CURRENCY_TYPE_COUNT;e++)t=this.game.cache.getThreeJson(this.collectables.CurrencyTypes.properties[e].json),this.assets.meshes.coins[e]=new g.Mesh(t,this.assets.materialB);for(var a=0,o;a<this.collectables.COLLECTABLE_TYPE_COUNT;a++)o=this.game.cache.getThreeJson(this.collectables.CollectableTypes.properties[a].json),this.assets.meshes.collectables[a]=new g.Mesh(o,this.assets.materialB);var r=this.game.cache.getThreeJson('sky');this.assets.meshes.sky=new g.Mesh(r,this.assets.materials.sky01mat),this.scene.add(this.assets.meshes.sky)}}()},{key:'createSounds',value:function(){return function(){this.assets.audio=[];for(var e=['collect','countdown','crash','crouch','jump','laneSwitch','spawnDriver','countdown','highscore','wind','magnet'],t=0;t<e.length;t++)this.assets.audio[e[t]]=this.game.add.audio(e[t]),this.assets.audio[e[t]].allowMultiple=!0;this.assets.audio.collect.volume=.2,this.assets.audio.crouch.volume=.6,this.assets.audio.jump.volume=.6,this.assets.audio.laneSwitch.volume=.6,this.assets.audio.wind.loop=!0,this.assets.audio.magnet.loop=!0}}()},{key:'createParticleEffects',value:function(){return function(){this.assets.json={},this.assets.json.fx_magnet=this.game.cache.getJSON('fx_magnet'),this.assets.json.fx_playerCollision=this.game.cache.getJSON('fx_playerCollision');var e=new g.CylinderGeometry(0,.05,4,4,1,!0),t=new g.MeshBasicMaterial;t.side=g.DoubleSide,t.depthTest=!1,this.speedLines.cameraRef=new g.Object3D,this.scene.add(this.speedLines.cameraRef);for(var a=0,o;a<this.speedLines.MAX_LINES;a++)o=new g.Mesh(e,t),this.speedLines.cameraRef.add(o),this.speedLines.lines.push(o),this.speedLines.lines[a].visible=!1,this.speedLines.lines[a].resetPosition=7,o.position.z=-10-10*(a/this.speedLines.MAX_LINES),o.rotation.x=.5*-s}}()},{key:'createEnvironment',value:function(){return function(){this.consumables=new S['default'](this.game),this.collectables=new E['default'](this.game,this.consumables);var e=this.game.cache.getThreeObject('roads');this.assets.roads={easy:[],medium:[],hard:[]};for(var t=0;t<e.children.length;t++){for(var a=e.children[t].geometry,r=[],n=[],i=[],s=[],l=0,d;l<e.children[t].children.length;l++)if(d=e.children[t].children[l].name.substring(0,e.children[t].children[l].name.indexOf('_')),'waypoint'===d){var p={loc:{x:e.children[t].children[l].position.x,y:e.children[t].children[l].position.z,z:-e.children[t].children[l].position.y},rot:e.children[t].children[l].rotation};n.push(p)}else if('coin'===d){var c={loc:{x:e.children[t].children[l].position.x,y:e.children[t].children[l].position.y,z:e.children[t].children[l].position.z}};i.push(c)}else if('collision'===d)r.push(e.children[t].children[l]);else if('deco'===d){var u=e.children[t].children[l];s.push(u)}n.sort(function(e,t){return e.loc.z>t.loc.z?-1:e.loc.z<t.loc.z?1:0}),i.sort(function(e,t){return e.loc.z+e.loc.x>t.loc.z+t.loc.x?-1:e.loc.z+e.loc.x<t.loc.z+t.loc.x?1:0});for(var y=0,m=0;m<n.length-1;m++){var o=new g.Vector3(n[m].loc.x,n[m].loc.y,n[m].loc.z),f=new g.Vector3(n[m+1].loc.x,n[m+1].loc.y,n[m+1].loc.z);y+=o.distanceTo(f)}var h=null;h=0<s.length?this.mergeMeshes(s):null,r=this.mergeMeshes(r);var b=new k['default'](a,h,r,this.assets.materialA,this.assets.materialB,this.assets.materialC,this.assets.meshes.coins,this.assets.meshes.collectables,n);b.coins=i,b.name=e.children[t].name,b.isTunnel=!1,0<b.name.search('tunnel')&&(b.isTunnel=!0),b.roadLength=y,b.createCoins(this.collectables);var v=b.name.substr(b.name.indexOf('_')+1,4);'easy'===v?this.assets.roads.easy.push(b):'medi'===v?this.assets.roads.medium.push(b):'hard'===v&&this.assets.roads.hard.push(b)}this.loadingComplete=!0}}()},{key:'mergeMeshes',value:function(){return function(e){for(var t=new g.Geometry,a=0;a<e.length;a++)e[a].updateMatrix(),t.merge(e[a].geometry,e[a].matrix);return t}}()},{key:'createObjects',value:function(){return function(e,t,a,o){var r=this.shop.getCurrentDriverKeys(e,a),n=this.shop.getCurrentVehicleKeys(t,o),i=this.game.cache.getThreeTexture(r.texture);this.assets.materials.char=new g.MeshBasicMaterial({map:i,color:16777215,skinning:!0}),this.assets.materials.char.map.minFilter=g.LinearFilter,i=this.game.cache.getThreeTexture(n.texture),this.assets.materials.board=new g.MeshBasicMaterial({color:16777215,skinning:!0}),this.assets.materials.board.map=i,this.assets.materials.board.map.minFilter=g.LinearFilter;var s=this.game.cache.getThreeJson(r.model);s.frustumCulled=!1,this.assets.meshes.char=new g.SkinnedMesh(s,this.assets.materials.char,this.supportsVertexTexture),this.assets.meshes.char.scale.set(1,1,1),this.setupMixer(this.assets.meshes.char,this.mixers.list,'race'),this.assets.meshes.char.mixer.clipAction('hit').setLoop(g.LoopOnce).clampWhenFinished=!0,this.toDestroyReferences.push(this.assets.meshes.char),s=this.game.cache.getThreeJson(n.model),s.frustumCulled=!1,this.assets.meshes.board=new g.SkinnedMesh(s,this.assets.materials.board,this.supportsVertexTexture),this.assets.meshes.board.scale.set(.12,.12,.12),this.setupMixer(this.assets.meshes.board,this.mixers.list,'race'),this.assets.meshes.board.mixer.clipAction('hit').setLoop(g.LoopOnce).clampWhenFinished=!0,this.toDestroyReferences.push(this.assets.meshes.board),this.assets.audio.spawnSound=this.game.add.audio(this.shop.getCurrentDriverSpawnSoundData(e)),this.assets.json.fx_thruster=this.game.cache.getJSON(this.shop.getCurrentVehicleParticlesData(t,o)),this.fx.thrusters.push(this.sheepfx.effectFromJson(this.assets.json.fx_thruster,this.assets.textures.fx01tex)),this.loadingComplete=!0}}()},{key:'destroyObjects',value:function(){return function(){this.loadingComplete=!1,this.player.offset.remove(this.player.shadow),this.assets.meshes.board.children[0].children[0].children[0].remove(this.fx.thrusters[0]),this.assets.meshes.board.skeleton.bones[1].remove(this.assets.meshes.char),this.player.offset.remove(this.assets.meshes.board);for(var e=0;e<this.toDestroyReferences.length;e++)this.toDestroyReferences[e].geometry.dispose(),this.toDestroyReferences[e].material.dispose(),this.toDestroyReferences[e]=null;this.assets.json.fx_thruster=null,this.fx.thrusters[0]=null,this.assets.meshes.char=null,this.assets.meshes.board=null,this.toDestroyReferences=[],this.fx.thrusters=[]}}()},{key:'createVariables',value:function(){return function(e,t){this.camera_fov=100,this.camera_view_near_plane=.1,this.camera_view_far_plane=1e3,this.camera_position=new g.Vector3(0,2.5,2),this.camera_target=new g.Vector3(0,.5,-4),this.renderer_antialiasing=!e||!1,this.renderer_clear_color='#609aa5',this.COLLISION_SKIP_DURATION=1,this.loadingComplete=!1,this.bPauseGame=!1,this.toDestroyReferences=[],this.disposableRoad=null,this.lastRoad=null,this.activeRoad=null,this.nextRoad=null,this.farRoad=null,this.pooledRoads=[],this.timeDelay=1,this.roadWidth=2,this.running=!1,this.needsUpdate=!1,this.elapsedTime=0,this.coins=[],this.pickupValue=25,this.SCORE_PER_SECOND=15.5,this.ticker=0,this.gameState=t,this.bCheckCollision=!0,this.skipCollisionTime=0,this.currentCurrency=0,this.totalCurrency=0,this.sheepfx=new f['default'],this.sheepfx.setParticleSize(.4*window.innerHeight*window.devicePixelRatio),this.VerticalMoveStates={NULL:0,JUMP_EXECUTED:1,JUMP_PROGRESS:2,CROUCH_EXECUTED:3,CROUCH_PROGRESS:4,LISTENING:5,JUMP_END:6,CROUCH_END:7},this.verticalMoveState=0,this.fx={magnet:null,thrusters:[]},this.DEBUG={fpscounter:null,scorecounter:null,enabled:this.game.config.enableDebug,fps:0,comulatedFPS:0,highscore:0,maxspeed:0,loops:0,longLoops:0,needsRestart:!1,playdata:[],twitchCounter:0},this.player={sled:null,avatar:new g.Object3D,offset:new g.Object3D,guide:null,guideR:null,guideL:null,collision:!1,score:0,distance:0,speed:15,minSpeed:15,maxSpeed:45,acceleration:.14,step:.2,pickupRadius:1,lane:'center',switchSpeed:10,raycaster:new g.Raycaster,fallCounter:0,jumping:!1,crouching:!1,grounded:!0,jumpTimer:0,jumpLength:.6,jumpDelay:.25,executeJump:function(){return function(){this.jumping=!0,this.crouching=!1,this.grounded=!1,this.jumpTimer=.27+this.jumpDelay,this.avatar.targetHeight=this.HEIGHT.jump}}(),executeCrouch:function(){return function(){this.crouching=!0,this.jumping=!1,this.grounded=!1,this.jumpTimer=.27+this.jumpDelay,this.avatar.targetHeight=this.HEIGHT.ground}}(),magnetAura:{mesh:null,pulseTime:0,pulseLength:1,MAX_SIZE:3},HEIGHT:{ground:0,jump:2}},this.speedLines={cameraRef:null,MAX_LINES:20,lines:[]},this.mixers={list:[],update:function(e){for(var t=this.mixers.list,a=this.mixers.list.length,o=0;o<a;o++)t[o].update(e)}.bind(this)},this.assets={materialA:new g.MeshBasicMaterial({transparent:!1,side:g.DoubleSide}),materialB:new g.MeshBasicMaterial({transparent:!0,alphaTest:.3}),materialC:new g.MeshBasicMaterial({transparent:!1}),textures:{driver:null,sky01tex:null,fx01tex:null,aura01tex:null},meshes:{char:null,board:null,coins:[],collectables:[],sky:null},materials:{environmentMat:new g.MeshLambertMaterial({}),char:null,board:null,sky01mat:new g.MeshBasicMaterial({fog:!1}),aura01mat:new g.MeshBasicMaterial({blending:g.AdditiveBlending,transparent:!0,side:g.DoubleSide})}}}}()},{key:'createScene',value:function(){return function(){this.scene=new g.Scene,this.scene.fog=new g.Fog('#d77db5',70,100),this.threeCamera=new g.PerspectiveCamera(this.camera_fov,this.game.width/this.game.height,this.camera_view_near_plane,this.camera_view_far_plane);var e=new g.DirectionalLight('rgb(255,255,255)',.3);e.position.set(.2,1,.5),this.scene.add(e);var t=new g.AmbientLight('rgb(255, 247, 242)',.2);this.scene.add(t),this.DEBUG.enabled&&(this.debug={},this.debug.camera=new g.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3),this.debug.camera.position.set(5,5,5))}}()},{key:'gameInit',value:function(){return function(){this.verticalMoveState=this.VerticalMoveStates.LISTENING;for(var e=0;e<this.collectables.CURRENCY_TYPE_COUNT;e++)this.coins[e]=0;this.collectables=new E['default'](this.game,this.consumables),this.powerups=new P['default'](this.game,this.consumables),this.camTarget=new g.Object3D,this.camTarget.add(this.threeCamera),this.player.sled=new g.Object3D,this.scene.add(this.player.sled),this.player.sled.add(this.camTarget),this.camTarget.rotation.y=g.Math.degToRad(180),this.player.sled.add(this.player.avatar),this.player.avatar.add(this.player.offset);var t=.5;this.player.guide=new g.Object3D,this.player.avatar.add(this.player.guide),this.player.guide.position.y=t,this.player.guide.position.z=5,this.player.guideR=new g.Object3D,this.player.avatar.add(this.player.guideR),this.player.guideR.position.x=-1,this.player.guideR.position.y=t,this.player.guideR.position.z=.5,this.player.guideL=new g.Object3D,this.player.avatar.add(this.player.guideL),this.player.guideL.position.x=1,this.player.guideL.position.y=t,this.player.guideL.position.z=.5;var a=new g.CircleGeometry(.6,24),o=new g.MeshBasicMaterial({color:0,transparent:!0,opacity:.2});this.player.shadow=new g.Mesh(a,o),this.player.offset.add(this.player.shadow),this.player.shadow.rotation.x=g.Math.degToRad(-90),this.player.shadow.position.y=0,this.player.shadow.position.z=0,this.toDestroyReferences.push(this.player.shadow),this.assets.meshes.board.skeleton.bones[1].add(this.assets.meshes.char),this.player.offset.add(this.assets.meshes.board),this.assets.meshes.board.position.y=.8,this.assets.meshes.board.children[0].children[0].children[0].add(this.fx.thrusters[0]);var r=this.shop.getVehicleParticlesTransform(this.vehicleIndex,this.vehicleSkinIndex);this.fx.thrusters[0].scale.set(r.scale.x,r.scale.y,r.scale.z),this.fx.thrusters[0].position.set(r.position.x,r.position.y,r.position.z),this.fx.thrusters[0].rotation.set(r.rotation.x,r.rotation.y,r.rotation.z),this.fx.magnet=this.sheepfx.effectFromJson(this.assets.json.fx_magnet,this.assets.textures.fx01tex),this.fx.magnet.frustumCulled=!1,this.fx.magnet.emitters[0].disable(),this.scene.add(this.fx.magnet),this.player.magnetAura.mesh=new g.Mesh(new g.PlaneGeometry(1,1),this.assets.materials.aura01mat),this.player.magnetAura.mesh.rotation.x=.0174533*90,this.player.magnetAura.mesh.position.set(0,.2,-10),this.assets.materials.aura01mat.opacity=0,this.scene.add(this.player.magnetAura.mesh),this.fx.playerCollision=this.sheepfx.effectFromJson(this.assets.json.fx_playerCollision,this.assets.textures.cloudTex),this.fx.playerCollision.visible=!1,this.fx.playerCollision.frustumCulled=!1,this.player.avatar.add(this.fx.playerCollision),this.fx.playerCollision.emitters[0].particlesPerSecond=1e4,this.threeCamera.position.copy(this.camera_position),this.start()}}()},{key:'roadInit',value:function(){return function(){var e=this.assets.roads.easy.filter(function(e){return'road_easy_straight'===e.name})[0];this.activeRoad=this.placeRoad(e),this.activeRoad.createSpline(this),this.activeRoad.inUse=!0,this.activeRoad.resetCoins(this.collectables),this.pooledRoads=[];for(var t=0;t<this.assets.roads.easy.length;t++)!1===this.assets.roads.easy[t].inUse&&this.pooledRoads.push(this.assets.roads.easy[t]);var o=g.Math.randInt(0,this.pooledRoads.length-1);this.nextRoad=this.placeRoad(this.pooledRoads[o]),this.nextRoad.mesh.rotation.z=this.activeRoad.mesh.rotation.z,this.nextRoad.mesh.rotation.z+=this.activeRoad.endAngle.z,this.nextRoad.mesh.position.set(this.activeRoad.wayLoc[this.activeRoad.wayLoc.length-1].x,this.activeRoad.wayLoc[this.activeRoad.wayLoc.length-1].y,this.activeRoad.wayLoc[this.activeRoad.wayLoc.length-1].z),this.nextRoad.createSpline(this),this.nextRoad.inUse=!0,this.nextRoad.resetCoins(this.collectables),this.pooledRoads=[];for(var r=0;r<this.assets.roads.easy.length;r++)!1===this.assets.roads.easy[r].inUse&&this.pooledRoads.push(this.assets.roads.easy[r]);var n=g.Math.randInt(0,this.pooledRoads.length-1);this.farRoad=this.placeRoad(this.pooledRoads[n]),this.farRoad.mesh.rotation.z=this.nextRoad.mesh.rotation.z,this.farRoad.mesh.rotation.z+=this.nextRoad.endAngle.z,this.farRoad.mesh.position.set(this.nextRoad.wayLoc[this.nextRoad.wayLoc.length-1].x,this.nextRoad.wayLoc[this.nextRoad.wayLoc.length-1].y,this.nextRoad.wayLoc[this.nextRoad.wayLoc.length-1].z),this.farRoad.createSpline(this),this.farRoad.inUse=!0,this.farRoad.resetCoins(this.collectables);var i=this.activeRoad.spline.getTangentAt(this.player.step).normalize(),s=new g.Vector3,l=new g.Vector3(0,0,1);s.crossVectors(l,i).normalize();var d=a(l.dot(i)),p=new g.Quaternion;p.setFromAxisAngle(s,d),this.player.sled.quaternion.copy(p),this.resetPlayerData()}}()},{key:'roadGenerator',value:function(){return function(e){null!=this.lastRoad&&(this.disposableRoad=this.lastRoad,this.disposableRoad.inUse=!1,this.scene.remove(this.disposableRoad.mesh)),this.lastRoad=this.activeRoad,this.activeRoad=this.nextRoad,this.nextRoad=this.farRoad,this.pooledRoads=[];for(var t=0;t<this.assets.roads.easy.length;t++)this.assets.roads.easy[t].inUse||'road_easy_straight'===this.assets.roads.easy[t].name||this.pooledRoads.push(this.assets.roads.easy[t]);if(1.7<e)for(var a=0;a<this.assets.roads.medium.length;a++)this.assets.roads.medium[a].inUse||this.pooledRoads.push(this.assets.roads.medium[a]);if(2.2<e)for(var o=0;o<this.assets.roads.hard.length;o++)this.assets.roads.hard[o].inUse||this.pooledRoads.push(this.assets.roads.hard[o]);var r=g.Math.randInt(0,this.pooledRoads.length-1);this.farRoad=this.placeRoad(this.pooledRoads[r]),this.farRoad.mesh.rotation.z=this.nextRoad.mesh.rotation.z,this.farRoad.mesh.rotation.z+=this.nextRoad.endAngle.z,this.farRoad.mesh.position.set(this.nextRoad.wayLoc[this.nextRoad.wayLoc.length-1].x,this.nextRoad.wayLoc[this.nextRoad.wayLoc.length-1].y,this.nextRoad.wayLoc[this.nextRoad.wayLoc.length-1].z),this.farRoad.createSpline(this),this.farRoad.inUse=!0,this.farRoad.resetCoins(this.collectables)}}()},{key:'placeRoad',value:function(){return function(e){var t=e,a=t.mesh;return this.scene.add(a),a.rotation.x=g.Math.degToRad(-90),t}}()},{key:'debugWaypoints',value:function(){return function(e){for(var t=0;t<e.waypoints.length;t++){var a=new g.BoxGeometry(.1,.1,.1),o=new g.MeshBasicMaterial({color:65280}),r=new g.Mesh(a,o);this.scene.add(r),r.position.copy(e.wayLoc[t])}}}()},{key:'destroyRoads',value:function(){return function(){this.scene.remove(this.activeRoad.mesh),this.scene.remove(this.nextRoad.mesh),this.scene.remove(this.farRoad.mesh),this.activeRoad.inUse=!1,this.nextRoad.inUse=!1,this.farRoad.inUse=!1,null!==this.lastRoad&&(this.scene.remove(this.lastRoad.mesh),this.lastRoad.inUse=!1),this.activeRoad=null,this.nextRoad=null,this.farRoad=null,this.lastRoad=null}}()},{key:'resetPlayerData',value:function(){return function(){this.switchAnimation(this.assets.meshes.board.mixer,'race',0),this.switchAnimation(this.assets.meshes.char.mixer,'race',0),this.player.step=.2,this.player.speed=15,this.player.collision=!1,this.player.lane='center',this.deactivateAllPowerups(),this.player.jumping=!1,this.player.crouching=!1,this.player.avatar.targetHeight=0,this.player.avatar.position.x=0,this.player.avatar.position.y=0,this.player.avatar.position.z=0,this.camTarget.position.copy(this.player.avatar.position),this.player.offset.position.set(0,0,-5),this.player.offset.rotation.set(0,0,0),this.player.score=0,this.currentCurrency=0,this.player.distance=0,this.assets.audio.wind.play(),this.assets.audio.wind.volume=0}}()},{key:'reset',value:function(){return function(){this.game.tracking.enabled&&(GameAnalytics('addProgressionEvent','Complete','Game','Time',l(this.elapsedTime)),GameAnalytics('addProgressionEvent','Complete','Game','Score',l(this.player.score)),GameAnalytics('addProgressionEvent','Complete','Game','Currency',this.currentCurrency),GameAnalytics('addProgressionEvent','Complete','Game','MagnetsCollected',this.collectables.getCollectableCount(this.collectables.CollectableTypes.MAGNET))),this.needsUpdate=!1,this.running=!1,this.bPauseGame=!1,this.destroyRoads(),this.destroyObjects();var e=this.storage.getItem('playerName',null);null===e?this.game.state.start('nameInput',!0,!1,l(this.player.score),{driver:this.driverIndex,skin:this.driverSkinIndex},this.currentCurrency,this.coins,l(this.player.distance)):this.game.state.start('gameOver',!0,!1,l(this.player.score),{driver:this.driverIndex,skin:this.driverSkinIndex},this.currentCurrency,this.coins,l(this.player.distance))}}()},{key:'start',value:function(){return function(){var e=this;this.elapsedTime=0,this.currentCurrency=0,this.bCheckCollision=!0,this.bPopupActive=!1,this.roadInit(),this.needsUpdate=!0,this.update(),this.assets.audio.countdown.play(),this.startCountdown(),setTimeout(function(){e.running=!0,e.assets.audio.spawnSound.play()},3000)}}()},{key:'activatePowerup',value:function(){return function(e){e===this.collectables.CollectableTypes.MAGNET&&(this.powerups.activate(this.powerups.PowerupTypes.MAGNETISM),this.fx.magnet.emitters[0].visible=!0,this.fx.magnet.emitters[0].enable(),this.player.magnetAura.mesh.visible=!0,this.assets.audio.magnet.play(),this.collectables.incrementCollectableCount(this.collectables.CollectableTypes.MAGNET))}}()},{key:'deactivatePowerup',value:function(){return function(e){e===this.powerups.PowerupTypes.MAGNETISM&&(this.fx.magnet.emitters[0].disable(),this.fx.magnet.emitters[0].visible=!1,this.player.magnetAura.mesh.visible=!1,this.assets.audio.magnet.stop())}}()},{key:'deactivateAllPowerups',value:function(){return function(){for(var e=0;e<this.powerups.POWERUP_TYPE_COUNT;e++)this.deactivatePowerup(e);this.powerups.deactivateAllPowerups()}}()},{key:'setupMixer',value:function(){return function(e,t,a){e.mixer=new g.AnimationMixer(e);for(var o=0;o<e.geometry.animations.length;++o)e.mixer.clipAction(e.geometry.animations[o]);e.mixer.clipAction(a).reset().setEffectiveWeight(1).play(),t.push(e.mixer),e.mixer.mixerActionOld=e.mixer.clipAction(a)}}()},{key:'switchAnimation',value:function(){return function(e,t,a){e.mixerActionOld!==e.clipAction(t)&&(e.stopAllAction(),e.mixerActionOld.crossFadeTo(e.clipAction(t),a,!1).play(),e.mixerActionOld=e.clipAction(t))}}()},{key:'timedAnimation',value:function(){return function(e,t,a,o,r,n){var i=this,s=e.mixerActionOld._clip.name;this.switchAnimation(e,t,a),setTimeout(function(){if(!i.player.collision&&e.mixerActionOld===e.clipAction(t)){var o=n||a;null==r?i.switchAnimation(e,s,o):i.switchAnimation(e,r,o)}},1e3*(o+a))}}()},{key:'updateCurrentCurrency',value:function(){return function(e){this.currentCurrency+=this.collectables.CurrencyTypes.properties[e].value,this.coins[e]++}}()},{key:'updateTotalCurrency',value:function(){return function(e){this.totalCurrency=this.storage.getItem('currency',0),void 0!==e&&null!==e&&(this.totalCurrency+=this.collectables.CurrencyTypes.properties[e].value,this.storage.setItem('currency',this.totalCurrency))}}()},{key:'setGamePaused',value:function(){return function(e){this.bPauseGame=e,this.setSoundEffectsState(!e)}}()},{key:'isGamePaused',value:function(){return function(){return this.bPauseGame}}()},{key:'movement',value:function(){return function(e){1<this.player.step&&(this.roadGenerator(this.player.speed/10),--this.player.step,1.5<this.player.step&&(this.player.step=0));var t=this.activeRoad.spline.getTangentAt(this.player.step).normalize();t.y=0;var o=new g.Vector3,r=new g.Vector3(0,0,1);o.crossVectors(r,t).normalize();var n=a(r.dot(t)),i=new g.Quaternion;i.setFromAxisAngle(o,n),this.player.sled.quaternion.slerp(i,5*e),this.player.sled.position.copy(this.activeRoad.spline.getPointAt(this.player.step)),this.running&&(this.player.step+=this.player.speed*e/this.activeRoad.roadLength,this.bCheckCollision?this.collisionCheck():this.elapsedTime-this.skipCollisionTime>this.COLLISION_SKIP_DURATION&&(this.bCheckCollision=!0)),this.player.collision||('center'===this.player.lane&&this.player.avatar.position.lerp(new g.Vector3(0,this.player.avatar.targetHeight,0),e*this.player.switchSpeed),'left'===this.player.lane&&this.player.avatar.position.lerp(new g.Vector3(this.roadWidth,this.player.avatar.targetHeight,0),e*this.player.switchSpeed),'right'===this.player.lane&&this.player.avatar.position.lerp(new g.Vector3(-this.roadWidth,this.player.avatar.targetHeight,0),e*this.player.switchSpeed))}}()},{key:'getInput',value:function(){return function(){this.gameInput.isInputDown(this.gameInput.Inputs.UP)&&this.triggerJump(),this.gameInput.isInputDown(this.gameInput.Inputs.DOWN)&&this.triggerCrouch(),this.gameInput.isInputDown(this.gameInput.Inputs.LEFT)&&this.switchLane('left'),this.gameInput.isInputDown(this.gameInput.Inputs.RIGHT)&&this.switchLane('right')}}()},{key:'triggerJump',value:function(){return function(){this.verticalMoveState===this.VerticalMoveStates.LISTENING?this.verticalMoveState=this.VerticalMoveStates.JUMP_EXECUTED:this.verticalMoveState===this.VerticalMoveStates.CROUCH_PROGRESS&&(this.stopCrouch(),this.verticalMoveState=this.VerticalMoveStates.JUMP_EXECUTED)}}()},{key:'triggerCrouch',value:function(){return function(){this.verticalMoveState===this.VerticalMoveStates.LISTENING?this.verticalMoveState=this.VerticalMoveStates.CROUCH_EXECUTED:this.verticalMoveState===this.VerticalMoveStates.JUMP_PROGRESS&&(this.stopJump(),this.verticalMoveState=this.VerticalMoveStates.CROUCH_EXECUTED)}}()},{key:'stopJump',value:function(){return function(){this.player.jumpTimer=0,this.player.jumping=!1,this.player.avatar.targetHeight=this.player.HEIGHT.ground,this.verticalMoveState=this.VerticalMoveStates.LISTENING}}()},{key:'stopCrouch',value:function(){return function(){this.player.jumpTimer=0,this.player.crouching=!1,this.player.avatar.targetHeight=this.player.HEIGHT.ground,this.verticalMoveState=this.VerticalMoveStates.LISTENING}}()},{key:'updateVerticalMoveRoutine',value:function(){return function(e){this.verticalMoveState===this.VerticalMoveStates.LISTENING||(this.verticalMoveState===this.VerticalMoveStates.JUMP_EXECUTED?(this.player.executeJump(),this.assets.audio.jump.play(),this.animateLaneSwitch('jump'),this.verticalMoveState=this.VerticalMoveStates.JUMP_PROGRESS):this.verticalMoveState===this.VerticalMoveStates.JUMP_PROGRESS?(this.player.jumpTimer-=e,0>=this.player.jumpTimer&&(this.verticalMoveState=this.VerticalMoveStates.JUMP_END)):this.verticalMoveState===this.VerticalMoveStates.JUMP_END?this.stopJump():this.verticalMoveState===this.VerticalMoveStates.CROUCH_EXECUTED?(this.player.executeCrouch(),this.assets.audio.crouch.play(),this.animateLaneSwitch('duck'),this.verticalMoveState=this.VerticalMoveStates.CROUCH_PROGRESS):this.verticalMoveState===this.VerticalMoveStates.CROUCH_PROGRESS?(this.player.jumpTimer-=e,0>=this.player.jumpTimer&&(this.verticalMoveState=this.VerticalMoveStates.CROUCH_END)):this.verticalMoveState===this.VerticalMoveStates.CROUCH_END&&this.stopCrouch())}}()},{key:'switchLane',value:function(){return function(e){this.player.collision||('left'===e?('center'===this.player.lane&&(this.player.lane='left',this.assets.audio.laneSwitch.play(),!this.player.crouching&&!this.player.jumping&&this.animateLaneSwitch('left')),'right'===this.player.lane&&(this.player.lane='center',this.assets.audio.laneSwitch.play(),!this.player.crouching&&!this.player.jumping&&this.animateLaneSwitch('left')),this.game.tracking.enabled):'right'==e&&('center'===this.player.lane&&(this.player.lane='right',this.assets.audio.laneSwitch.play(),!this.player.crouching&&!this.player.jumping&&this.animateLaneSwitch('right')),'left'===this.player.lane&&(this.player.lane='center',this.assets.audio.laneSwitch.play(),!this.player.crouching&&!this.player.jumping&&this.animateLaneSwitch('right')),this.game.tracking.enabled))}}()},{key:'animateLaneSwitch',value:function(){return function(e){'jump'===e?(this.timedAnimation(this.assets.meshes.char.mixer,e,.2,this.player.jumpTimer,'race'),this.timedAnimation(this.assets.meshes.board.mixer,e,.2,this.player.jumpTimer,'race')):'duck'===e?(this.timedAnimation(this.assets.meshes.char.mixer,e,.2,this.player.jumpTimer,'race'),this.timedAnimation(this.assets.meshes.board.mixer,e,.2,this.player.jumpTimer,'race')):(this.timedAnimation(this.assets.meshes.char.mixer,e,.2,.2,'race',.35),this.timedAnimation(this.assets.meshes.board.mixer,e,.2,.2,'race',.35))}}()},{key:'collisionCheck',value:function(){return function(){var e=!1,t=new g.Vector3;t.copy(this.player.avatar.getWorldPosition()),t.y+=.5;var a=[];a.push(this.activeRoad.collisionMesh),null!==this.lastRoad&&a.push(this.lastRoad.collisionMesh);var o=new g.Vector3,r=this.player.guide.getWorldPosition();o.x=r.x-t.x,o.y=r.y-t.y,o.z=r.z-t.z,o.normalize(),this.player.raycaster.set(t,o),this.player.raycaster.near=.1,this.player.raycaster.far=1;var n=this.player.raycaster.intersectObjects(a);0<n.length&&(e=!0),r=this.player.guide.getWorldPosition(),o.x=r.x-t.x,o.y=r.y-t.y+1,o.z=r.z-t.z,o.normalize();var i=new g.Vector3(t.x,t.y+1,t.z);this.player.raycaster.set(i,o),this.player.raycaster.near=.1,this.player.raycaster.far=1,n=this.player.raycaster.intersectObjects(a),0<n.length&&!this.player.crouching&&(e=!0),r=this.player.guideL.getWorldPosition(),o.x=r.x-t.x,o.y=r.y-t.y,o.z=r.z-t.z,o.normalize(),this.player.raycaster.set(t,o),this.player.raycaster.near=.1,this.player.raycaster.far=2,n=this.player.raycaster.intersectObjects(a),this.player.blockedL=0<n.length,r=this.player.guideR.getWorldPosition(),o.x=r.x-t.x,o.y=r.y-t.y,o.z=r.z-t.z,o.normalize(),this.player.raycaster.set(t,o),this.player.raycaster.near=.1,this.player.raycaster.far=2,n=this.player.raycaster.intersectObjects(a),this.player.blockedR=0<n.length,!0==e&&(this.consumables.getCount(this.consumables.Consumables.LIFE)?(this.setGamePaused(!0),this.gameUI.displayLifeBuyPopup(this.textJson.consumeLife,null,this.onUseLifeDialogueConfirm.bind(this))):this.consumables.isAffordable(this.consumables.Consumables.LIFE,this.totalCurrency)?(this.setGamePaused(!0),this.gameUI.displayLifeBuyPopup(this.textJson.buyLife,''+(this.consumables.getPrice(this.consumables.Consumables.LIFE)+'')+(this.textJson.currencyUnit+''),this.onBuyLifeDialogueConfirm.bind(this))):this.onLifeDialogueSkip())}}()},{key:'setSoundEffectsState',value:function(){return function(e){e?(this.assets.audio.wind.play(),this.powerups.isPowerupActive(this.powerups.PowerupTypes.MAGNETISM)&&this.assets.audio.magnet.play()):!e&&(this.assets.audio.wind.pause(),this.powerups.isPowerupActive(this.powerups.PowerupTypes.MAGNETISM)&&this.assets.audio.magnet.pause())}}()},{key:'skipPlayerCollision',value:function(){return function(){this.skipCollisionTime=this.elapsedTime,this.bCheckCollision=!1,this.fx.playerCollision.visible=!0,this.fx.playerCollision.reset(!0),this.fx.playerCollision.ttl=.18,this.assets.audio.crash.play()}}()},{key:'onBuyLifeDialogueConfirm',value:function(){return function(e){return e?void(this.game.tracking.enabled&&(GameAnalytics('addProgressionEvent','Fail','Life','Purchased'),GameAnalytics('addDesignEvent','CurrencySpent',this.consumables.getPrice(this.consumables.Consumables.LIFE))),this.consumables.buy(this.consumables.Consumables.LIFE,this.totalCurrency),this.consumables.consume(this.consumables.Consumables.LIFE),this.updateTotalCurrency(null),this.skipPlayerCollision(),this.setGamePaused(!1)):void this.onLifeDialogueSkip()}}()},{key:'onUseLifeDialogueConfirm',value:function(){return function(e){return e?void(this.game.tracking.enabled&&GameAnalytics('addProgressionEvent','Fail','Life','Used'),this.consumables.consume(this.consumables.Consumables.LIFE),this.skipPlayerCollision(),this.setGamePaused(!1),this.gameUI.updateConsumablesHUD(this.consumables)):void this.onLifeDialogueSkip()}}()},{key:'onLifeDialogueSkip',value:function(){return function(){this.game.tracking.enabled&&GameAnalytics('addProgressionEvent','Fail','Life','NoAction'),this.setGamePaused(!1),this.player.collision=!0,this.deactivateAllPowerups(),this.assets.audio.crash.play()}}()},{key:'updateAnimationSpeed',value:function(){return function(){this.assets.meshes.char.mixer.clipAction('race').timeScale=Math.mapNumberToRange(this.player.speed,this.player.minSpeed,this.player.maxSpeed,1,1.5)}}()},{key:'updatePowerups',value:function(){return function(e){if(this.powerups.update(e,this.elapsedTime),this.powerups.isPowerupActive(this.powerups.PowerupTypes.MAGNETISM)){var t=this.player.avatar.getWorldPosition();t.add(this.player.avatar.getWorldDirection().multiplyScalar(2));for(var a=this.activeRoad.coins,o=0;o<a.length;o++)if(!(a[o].collected||a[o].type.pickupType===this.collectables.PickupType.COLLECTABLE)){var r=this.powerups.PowerupTypes.properties[this.powerups.PowerupTypes.MAGNETISM].range,n=this.powerups.PowerupTypes.properties[this.powerups.PowerupTypes.MAGNETISM].force;if(t.distanceTo(a[o].reference.getWorldPosition())<r){var i=a[o].reference.parent,s=i.parent;g.SceneUtils.detach(a[o].reference,i,s),a[o].reference.position.lerp(t,e*n),a[o].reference.updateMatrixWorld(),g.SceneUtils.attach(a[o].reference,s,i)}}}for(var l=0;l<this.powerups.POWERUP_TYPE_COUNT;l++)this.powerups.powerupState[l]===this.powerups.PowerupStates.DEACTIVATE&&this.deactivatePowerup(l)}}()},{key:'updateParticles',value:function(){return function(e){this.player.avatar.parent.updateMatrixWorld(),this.player.avatar.updateMatrixWorld();var t=this.player.avatar.getWorldPosition();t.y+=1,this.fx.magnet.position.copy(t),this.fx.playerCollision.visible&&(this.fx.playerCollision.ttl-=e,0>this.fx.playerCollision.ttl&&(this.fx.playerCollision.visible=!1))}}()},{key:'updateAura',value:function(){return function(e){var t=this.player.avatar.getWorldPosition();t.y+=.3,this.player.magnetAura.mesh.position.copy(t);var a=this.player.magnetAura;if(a.pulseTime-=e,this.powerups.isPowerupActive(this.powerups.PowerupTypes.MAGNETISM))if(0>a.pulseTime)a.pulseTime=a.pulseLength;else if(0<a.pulseTime){var o=a.pulseTime/a.pulseLength;this.assets.materials.aura01mat.opacity=Math.sin(o*s);var r=o*this.player.magnetAura.MAX_SIZE;a.mesh.rotation.z+=e,a.mesh.scale.set(r,r,r)}}}()},{key:'updateSpeedLines',value:function(){return function(e){if(this.player.collision){if(this.speedLines.lines[0].visible)for(var t=0;t<this.speedLines.lines.length;t++)this.speedLines.lines[t].visible=!1;return}this.speedLines.cameraRef.position.copy(this.threeCamera.getWorldPosition()),this.speedLines.cameraRef.rotation.copy(this.threeCamera.getWorldRotation());var a=(this.player.speed-15)/(this.player.maxSpeed-15);1<a&&(a=1);var o=this.speedLines.lines.length*a,r=0;for(r=0;r<o;r++)if(this.speedLines.lines[r].position.z+=10*e,this.speedLines.lines[r].position.z>this.speedLines.lines[r].resetPosition){this.speedLines.lines[r].visible=!0,this.speedLines.lines[r].position.z=-3,this.speedLines.lines[r].resetPosition=7+2*Math.random();var n=new g.Vector2(Math.random()-.5,Math.random()-.5);0===n.length()&&(n.x=1),n.normalize(),n.multiplyScalar(3),this.speedLines.lines[r].position.x=n.x,this.speedLines.lines[r].position.y=n.y}}}()}]),t}(b['default']);t['default']=L},function(e,t,a){'use strict';var o=Math.sin,r=Math.abs,n=Math.max,i=Math.round,s=Math.min;Object.defineProperty(t,'__esModule',{value:!0}),function(e){function l(){this.groups=[],this.screenScale=180}var d=Number.NEGATIVE_INFINITY,p=Number.POSITIVE_INFINITY,c=Math.cos,u=a(50),y=a.n(u),g={distributions:{BOX:1,SPHERE:2,DISC:3},valueOverLifetimeLength:4};/**
@preserve
* shader-particle-engine 1.0.5
*
* (c) 2015 Luke Moody (http://www.github.com/squarefeet)
* Originally based on Lee Stemkoski's original work (https://github.com/stemkoski/stemkoski.github.com/blob/master/Three.js/js/ParticleEngine.js).
* shader-particle-engine may be freely distributed under the MIT license (See LICENSE at root of this repository.)
* License
* Copyright (C) 2015 Luke Moody
*
* Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*
* SheepFX
* SPE lib wrapper by Emil Larsson (emil@flying-sheep.com)
* Dependencies:
* three.js (v 81)
* SPE.js (v 1.0.5)
*/'function'==typeof define&&a(501)?define('spe',g):'undefined'!=typeof exports&&'undefined'!=typeof e&&(e.exports=g),g.TypedArrayHelper=function(e,t,a,o){this.componentSize=a||1,this.size=t||1,this.TypedArrayConstructor=e||Float32Array,this.array=new e(t*this.componentSize),this.indexOffset=o||0},g.TypedArrayHelper.constructor=g.TypedArrayHelper,g.TypedArrayHelper.prototype.setSize=function(e,t){var a=this.array.length;return(t||(e*=this.componentSize),e<a)?this.shrink(e):e>a?this.grow(e):void console.info('TypedArray is already of size:',e+'.','Will not resize.')},g.TypedArrayHelper.prototype.shrink=function(e){return this.array=this.array.subarray(0,e),this.size=e,this},g.TypedArrayHelper.prototype.grow=function(e){var t=this.array,a=new this.TypedArrayConstructor(e);return a.set(t),this.array=a,this.size=e,this},g.TypedArrayHelper.prototype.splice=function(e,t){e*=this.componentSize,t*=this.componentSize;for(var a=[],o=this.array,r=o.length,n=0;n<r;++n)(n<e||n>=t)&&a.push(o[n]);return this.setFromArray(0,a),this},g.TypedArrayHelper.prototype.setFromArray=function(e,t){var a=t.length,o=e+a;return o>this.array.length?this.grow(o):o<this.array.length&&this.shrink(o),this.array.set(t,this.indexOffset+e),this},g.TypedArrayHelper.prototype.setVec2=function(e,t){return this.setVec2Components(e,t.x,t.y)},g.TypedArrayHelper.prototype.setVec2Components=function(e,t,a){var o=this.array,r=this.indexOffset+e*this.componentSize;return o[r]=t,o[r+1]=a,this},g.TypedArrayHelper.prototype.setVec3=function(e,t){return this.setVec3Components(e,t.x,t.y,t.z)},g.TypedArrayHelper.prototype.setVec3Components=function(e,t,a,o){var r=this.array,n=this.indexOffset+e*this.componentSize;return r[n]=t,r[n+1]=a,r[n+2]=o,this},g.TypedArrayHelper.prototype.setVec4=function(e,t){return this.setVec4Components(e,t.x,t.y,t.z,t.w)},g.TypedArrayHelper.prototype.setVec4Components=function(e,t,a,o,r){var n=this.array,s=this.indexOffset+e*this.componentSize;return n[s]=t,n[s+1]=a,n[s+2]=o,n[s+3]=r,this},g.TypedArrayHelper.prototype.setMat3=function(e,t){return this.setFromArray(this.indexOffset+e*this.componentSize,t.elements)},g.TypedArrayHelper.prototype.setMat4=function(e,t){return this.setFromArray(this.indexOffset+e*this.componentSize,t.elements)},g.TypedArrayHelper.prototype.setColor=function(e,t){return this.setVec3Components(e,t.r,t.g,t.b)},g.TypedArrayHelper.prototype.setNumber=function(e,t){return this.array[this.indexOffset+e*this.componentSize]=t,this},g.TypedArrayHelper.prototype.getValueAtIndex=function(e){return this.array[this.indexOffset+e]},g.TypedArrayHelper.prototype.getComponentValueAtIndex=function(e){return this.array.subarray(this.indexOffset+e*this.componentSize)},g.ShaderAttribute=function(e,t,a){var o=g.ShaderAttribute.typeSizeMap;this.type='string'==typeof e&&o.hasOwnProperty(e)?e:'f',this.componentSize=o[this.type],this.arrayType=a||Float32Array,this.typedArray=null,this.bufferAttribute=null,this.dynamicBuffer=!!t,this.updateMin=0,this.updateMax=0},g.ShaderAttribute.constructor=g.ShaderAttribute,g.ShaderAttribute.typeSizeMap={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},g.ShaderAttribute.prototype.setUpdateRange=function(e,t){this.updateMin=s(e*this.componentSize,this.updateMin*this.componentSize),this.updateMax=n(t*this.componentSize,this.updateMax*this.componentSize)},g.ShaderAttribute.prototype.flagUpdate=function(){var e=this.bufferAttribute,t=e.updateRange;t.offset=this.updateMin,t.count=s(this.updateMax-this.updateMin+this.componentSize,this.typedArray.array.length),e.needsUpdate=!0},g.ShaderAttribute.prototype.resetUpdateRange=function(){this.updateMin=0,this.updateMax=0},g.ShaderAttribute.prototype.resetDynamic=function(){this.bufferAttribute.dynamic=this.dynamicBuffer},g.ShaderAttribute.prototype.splice=function(e,t){this.typedArray.splice(e,t),this.forceUpdateAll()},g.ShaderAttribute.prototype.forceUpdateAll=function(){this.bufferAttribute.array=this.typedArray.array,this.bufferAttribute.updateRange.offset=0,this.bufferAttribute.updateRange.count=-1,this.bufferAttribute.dynamic=!1,this.bufferAttribute.needsUpdate=!0},g.ShaderAttribute.prototype._ensureTypedArray=function(e){null!==this.typedArray&&this.typedArray.size===e*this.componentSize||(null!==this.typedArray&&this.typedArray.size!==e?this.typedArray.setSize(e):null===this.typedArray&&(this.typedArray=new g.TypedArrayHelper(this.arrayType,e,this.componentSize)))},g.ShaderAttribute.prototype._createBufferAttribute=function(e){return this._ensureTypedArray(e),null===this.bufferAttribute?void(this.bufferAttribute=new u.BufferAttribute(this.typedArray.array,this.componentSize),this.bufferAttribute.dynamic=this.dynamicBuffer):(this.bufferAttribute.array=this.typedArray.array,81<=parseFloat(u.REVISION)&&(this.bufferAttribute.count=this.bufferAttribute.array.length/this.bufferAttribute.itemSize),void(this.bufferAttribute.needsUpdate=!0))},g.ShaderAttribute.prototype.getLength=function(){return null===this.typedArray?0:this.typedArray.array.length},g.shaderChunks={defines:'#define PACKED_COLOR_SIZE 256.0\n#define PACKED_COLOR_DIVISOR 255.0',uniforms:'uniform float deltaTime;\nuniform float runTime;\nuniform sampler2D texture;\nuniform vec4 textureAnimation;\nuniform float scale;',attributes:'attribute vec4 acceleration;\nattribute vec3 velocity;\nattribute vec4 rotation;\nattribute vec3 rotationCenter;\nattribute vec4 params;\nattribute vec4 size;\nattribute vec4 angle;\nattribute vec4 color;\nattribute vec4 opacity;',varyings:'varying vec4 vColor;\n#ifdef SHOULD_ROTATE_TEXTURE\n    varying float vAngle;\n#endif\n#ifdef SHOULD_CALCULATE_SPRITE\n    varying vec4 vSpriteSheet;\n#endif',branchAvoidanceFunctions:'float when_gt(float x, float y) {\n    return max(sign(x - y), 0.0);\n}\nfloat when_lt(float x, float y) {\n    return min( max(1.0 - sign(x - y), 0.0), 1.0 );\n}\nfloat when_eq( float x, float y ) {\n    return 1.0 - abs( sign( x - y ) );\n}\nfloat when_ge(float x, float y) {\n  return 1.0 - when_lt(x, y);\n}\nfloat when_le(float x, float y) {\n  return 1.0 - when_gt(x, y);\n}\nfloat and(float a, float b) {\n    return a * b;\n}\nfloat or(float a, float b) {\n    return min(a + b, 1.0);\n}',unpackColor:'vec3 unpackColor( in float hex ) {\n   vec3 c = vec3( 0.0 );\n   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );\n   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );\n   float b = mod( hex, PACKED_COLOR_SIZE );\n   c.r = r / PACKED_COLOR_DIVISOR;\n   c.g = g / PACKED_COLOR_DIVISOR;\n   c.b = b / PACKED_COLOR_DIVISOR;\n   return c;\n}',unpackRotationAxis:'vec3 unpackRotationAxis( in float hex ) {\n   vec3 c = vec3( 0.0 );\n   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );\n   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );\n   float b = mod( hex, PACKED_COLOR_SIZE );\n   c.r = r / PACKED_COLOR_DIVISOR;\n   c.g = g / PACKED_COLOR_DIVISOR;\n   c.b = b / PACKED_COLOR_DIVISOR;\n   c *= vec3( 2.0 );\n   c -= vec3( 1.0 );\n   return c;\n}',floatOverLifetime:'float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {\n    highp float value = 0.0;\n    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );\n    float fIndex = 0.0;\n    float shouldApplyValue = 0.0;\n    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );\n\n    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {\n       fIndex = float( i );\n       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );\n       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );\n    }\n\n    return value;\n}',colorOverLifetime:'vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {\n    vec3 value = vec3( 0.0 );\n    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );\n    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );\n    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );\n    return value;\n}',paramFetchingFunctions:'float getAlive() {\n   return params.x;\n}\nfloat getAge() {\n   return params.y;\n}\nfloat getMaxAge() {\n   return params.z;\n}\nfloat getWiggle() {\n   return params.w;\n}',forceFetchingFunctions:'vec4 getPosition( in float age ) {\n   return modelViewMatrix * vec4( position, 1.0 );\n}\nvec3 getVelocity( in float age ) {\n   return velocity * age;\n}\nvec3 getAcceleration( in float age ) {\n   return acceleration.xyz * age;\n}',rotationFunctions:'#ifdef SHOULD_ROTATE_PARTICLES\n   mat4 getRotationMatrix( in vec3 axis, in float angle) {\n       axis = normalize(axis);\n       float s = sin(angle);\n       float c = cos(angle);\n       float oc = 1.0 - c;\n\n       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n                   0.0,                                0.0,                                0.0,                                1.0);\n   }\n\n   vec3 getRotation( in vec3 pos, in float positionInTime ) {\n      if( rotation.y == 0.0 ) {\n           return pos;\n      }\n\n      vec3 axis = unpackRotationAxis( rotation.x );\n      vec3 center = rotationCenter;\n      vec3 translated;\n      mat4 rotationMatrix;\n      float angle = 0.0;\n      angle += when_eq( rotation.z, 0.0 ) * rotation.y;\n      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );\n      translated = rotationCenter - pos;\n      rotationMatrix = getRotationMatrix( axis, angle );\n      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );\n   }\n#endif',rotateTexture:'    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );\n\n    #ifdef SHOULD_ROTATE_TEXTURE\n       float x = gl_PointCoord.x - 0.5;\n       float y = 1.0 - gl_PointCoord.y - 0.5;\n       float c = cos( -vAngle );\n       float s = sin( -vAngle );\n       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );\n    #endif\n\n    #ifdef SHOULD_CALCULATE_SPRITE\n        float framesX = vSpriteSheet.x;\n        float framesY = vSpriteSheet.y;\n        float columnNorm = vSpriteSheet.z;\n        float rowNorm = vSpriteSheet.w;\n        vUv.x = gl_PointCoord.x * framesX + columnNorm;\n        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);\n    #endif\n\n    vec4 rotatedTexture = texture2D( texture, vUv );'},g.shaders={vertex:[g.shaderChunks.defines,g.shaderChunks.uniforms,g.shaderChunks.attributes,g.shaderChunks.varyings,u.ShaderChunk.common,u.ShaderChunk.logdepthbuf_pars_vertex,u.ShaderChunk.fog_pars_vertex,g.shaderChunks.branchAvoidanceFunctions,g.shaderChunks.unpackColor,g.shaderChunks.unpackRotationAxis,g.shaderChunks.floatOverLifetime,g.shaderChunks.colorOverLifetime,g.shaderChunks.paramFetchingFunctions,g.shaderChunks.forceFetchingFunctions,g.shaderChunks.rotationFunctions,'void main() {','    highp float age = getAge();','    highp float alive = getAlive();','    highp float maxAge = getMaxAge();','    highp float positionInTime = (age / maxAge);','    highp float isAlive = when_gt( alive, 0.0 );','    #ifdef SHOULD_WIGGLE_PARTICLES','        float wiggleAmount = positionInTime * getWiggle();','        float wiggleSin = isAlive * sin( wiggleAmount );','        float wiggleCos = isAlive * cos( wiggleAmount );','    #endif','    vec3 vel = getVelocity( age );','    vec3 accel = getAcceleration( age );','    vec3 force = vec3( 0.0 );','    vec3 pos = vec3( position );','    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;','    force += vel;','    force *= drag;','    force += accel * age;','    pos += force;','    #ifdef SHOULD_WIGGLE_PARTICLES','        pos.x += wiggleSin;','        pos.y += wiggleCos;','        pos.z += wiggleSin;','    #endif','    #ifdef SHOULD_ROTATE_PARTICLES','        pos = getRotation( pos, positionInTime );','    #endif','    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );','    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;','    #ifdef HAS_PERSPECTIVE','        float perspective = scale / length( mvPosition.xyz );','    #else','        float perspective = 1.0;','    #endif','    float pointSizePerspective = pointSize * perspective;','    #ifdef COLORIZE','       vec3 c = isAlive * getColorOverLifetime(','           positionInTime,','           unpackColor( color.x ),','           unpackColor( color.y ),','           unpackColor( color.z ),','           unpackColor( color.w )','       );','    #else','       vec3 c = vec3(1.0);','    #endif','    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );','    vColor = vec4( c, o );','    #ifdef SHOULD_ROTATE_TEXTURE','        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );','    #endif','    #ifdef SHOULD_CALCULATE_SPRITE','        float framesX = textureAnimation.x;','        float framesY = textureAnimation.y;','        float loopCount = textureAnimation.w;','        float totalFrames = textureAnimation.z;','        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );','        float column = floor(mod( frameNumber, framesX ));','        float row = floor( (frameNumber - column) / framesX );','        float columnNorm = column / framesX;','        float rowNorm = row / framesY;','        vSpriteSheet.x = 1.0 / framesX;','        vSpriteSheet.y = 1.0 / framesY;','        vSpriteSheet.z = columnNorm;','        vSpriteSheet.w = rowNorm;','    #endif','    gl_PointSize = pointSizePerspective;','    gl_Position = projectionMatrix * mvPosition;',u.ShaderChunk.logdepthbuf_vertex,u.ShaderChunk.fog_vertex,'}'].join('\n'),fragment:[g.shaderChunks.uniforms,u.ShaderChunk.common,u.ShaderChunk.fog_pars_fragment,u.ShaderChunk.logdepthbuf_pars_fragment,g.shaderChunks.varyings,g.shaderChunks.branchAvoidanceFunctions,'void main() {','    vec3 outgoingLight = vColor.xyz;','    ','    #ifdef ALPHATEST','       if ( vColor.w < float(ALPHATEST) ) discard;','    #endif',g.shaderChunks.rotateTexture,u.ShaderChunk.logdepthbuf_fragment,'    outgoingLight = vColor.xyz * rotatedTexture.xyz;','    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );',u.ShaderChunk.fog_fragment,'}'].join('\n')},g.utils={types:{BOOLEAN:'boolean',STRING:'string',NUMBER:'number',OBJECT:'object'},ensureTypedArg:function(e,t,a){return typeof e===t?e:a},ensureArrayTypedArg:function(e,t,a){if(Array.isArray(e)){for(var o=e.length-1;0<=o;--o)if(typeof e[o]!==t)return a;return e}return this.ensureTypedArg(e,t,a)},ensureInstanceOf:function(e,t,a){return void 0!==t&&e instanceof t?e:a},ensureArrayInstanceOf:function(e,t,a){if(Array.isArray(e)){for(var o=e.length-1;0<=o;--o)if(t!==void 0&&!1==e[o]instanceof t)return a;return e}return this.ensureInstanceOf(e,t,a)},ensureValueOverLifetimeCompliance:function(e,t,a){t=t||3,a=a||3,!1===Array.isArray(e._value)&&(e._value=[e._value]),!1===Array.isArray(e._spread)&&(e._spread=[e._spread]);var o=this.clamp(e._value.length,t,a),r=this.clamp(e._spread.length,t,a),i=n(o,r);e._value.length!==i&&(e._value=this.interpolateArray(e._value,i)),e._spread.length!==i&&(e._spread=this.interpolateArray(e._spread,i))},interpolateArray:function(e,t){for(var a=e.length,o=['function'==typeof e[0].clone?e[0].clone():e[0]],r=1;r<t-1;++r){var n=r*((a-1)/(t-1)),i=Math.floor(n),s=Math.ceil(n);o[r]=this.lerpTypeAgnostic(e[i],e[s],n-i)}return o.push('function'==typeof e[a-1].clone?e[a-1].clone():e[a-1]),o},clamp:function(e,t,a){return n(t,s(e,a))},zeroToEpsilon:function(e,t){var a=1e-5,o=e;return o=t?10*(Math.random()*a):a,0>e&&e>-a&&(o=-o),o},lerpTypeAgnostic:function(e,t,a){var o=this.types,r;if(typeof e===o.NUMBER&&typeof t===o.NUMBER)return e+(t-e)*a;return e instanceof u.Vector2&&t instanceof u.Vector2?(r=e.clone(),r.x=this.lerp(e.x,t.x,a),r.y=this.lerp(e.y,t.y,a),r):e instanceof u.Vector3&&t instanceof u.Vector3?(r=e.clone(),r.x=this.lerp(e.x,t.x,a),r.y=this.lerp(e.y,t.y,a),r.z=this.lerp(e.z,t.z,a),r):e instanceof u.Vector4&&t instanceof u.Vector4?(r=e.clone(),r.x=this.lerp(e.x,t.x,a),r.y=this.lerp(e.y,t.y,a),r.z=this.lerp(e.z,t.z,a),r.w=this.lerp(e.w,t.w,a),r):e instanceof u.Color&&t instanceof u.Color?(r=e.clone(),r.r=this.lerp(e.r,t.r,a),r.g=this.lerp(e.g,t.g,a),r.b=this.lerp(e.b,t.b,a),r):void console.warn('Invalid argument types, or argument types do not match:',e,t)},lerp:function(e,t,a){return e+(t-e)*a},roundToNearestMultiple:function(e,t){var a=0;return 0===t?e:(a=r(e)%t,0==a?e:0>e?-(r(e)-a):e+t-a)},arrayValuesAreEqual:function(e){for(var t=0;t<e.length-1;++t)if(e[t]!==e[t+1])return!1;return!0},randomFloat:function(e,t){return e+t*(Math.random()-.5)},randomVector3:function(e,t,a,o,r){var n=a.x+(Math.random()*o.x-.5*o.x),i=a.y+(Math.random()*o.y-.5*o.y),s=a.z+(Math.random()*o.z-.5*o.z);r&&(n=.5*-r.x+this.roundToNearestMultiple(n,r.x),i=.5*-r.y+this.roundToNearestMultiple(i,r.y),s=.5*-r.z+this.roundToNearestMultiple(s,r.z)),e.typedArray.setVec3Components(t,n,i,s)},randomColor:function(e,t,a,o){var n=a.r+Math.random()*o.x,r=a.g+Math.random()*o.y,i=a.b+Math.random()*o.z;n=this.clamp(n,0,1),r=this.clamp(r,0,1),i=this.clamp(i,0,1),e.typedArray.setVec3Components(t,n,r,i)},randomColorAsHex:function(){var e=new u.Color;return function(t,a,o,r){for(var n=o.length,s=[],l=0,i;l<n;++l)i=r[l],e.copy(o[l]),e.r+=Math.random()*i.x-.5*i.x,e.g+=Math.random()*i.y-.5*i.y,e.b+=Math.random()*i.z-.5*i.z,e.r=this.clamp(e.r,0,1),e.g=this.clamp(e.g,0,1),e.b=this.clamp(e.b,0,1),s.push(e.getHex());t.typedArray.setVec4Components(a,s[0],s[1],s[2],s[3])}}(),randomVector3OnSphere:function(e,a,n,s,l,d,p){var u=2*Math.random()-1,g=6.2832*Math.random(),t=Math.sqrt(1-u*u),r=this.randomFloat(s,l),m=0,f=0,y=0;p&&(r=i(r/p)*p),m=t*c(g)*r,f=t*o(g)*r,y=u*r,m*=d.x,f*=d.y,y*=d.z,m+=n.x,f+=n.y,y+=n.z,e.typedArray.setVec3Components(a,m,f,y)},seededRandom:function(e){var t=1e4*o(e);return t-(0|t)},randomVector3OnDisc:function(e,a,n,s,l,d,p){var u=6.2832*Math.random(),t=r(this.randomFloat(s,l)),g=0,m=0,y=0;p&&(t=i(t/p)*p),g=c(u)*t,m=o(u)*t,g*=d.x,m*=d.y,g+=n.x,m+=n.y,y+=n.z,e.typedArray.setVec3Components(a,g,m,y)},randomDirectionVector3OnSphere:function(){var e=new u.Vector3;return function(t,a,o,r,n,i,s,l){e.copy(i),e.x-=o,e.y-=r,e.z-=n,e.normalize().multiplyScalar(-this.randomFloat(s,l)),t.typedArray.setVec3Components(a,e.x,e.y,e.z)}}(),randomDirectionVector3OnDisc:function(){var e=new u.Vector3;return function(t,a,o,r,n,i,s,l){e.copy(i),e.x-=o,e.y-=r,e.z-=n,e.normalize().multiplyScalar(-this.randomFloat(s,l)),t.typedArray.setVec3Components(a,e.x,e.y,0)}}(),getPackedRotationAxis:function(){var e=new u.Vector3,t=new u.Vector3,a=new u.Color,o=new u.Vector3(1,1,1);return function(r,n){return e.copy(r).normalize(),t.copy(n).normalize(),e.x+=.5*-n.x+Math.random()*n.x,e.y+=.5*-n.y+Math.random()*n.y,e.z+=.5*-n.z+Math.random()*n.z,e.normalize().add(o).multiplyScalar(.5),a.setRGB(e.x,e.y,e.z),a.getHex()}}()},g.Group=function(e){var t=g.utils,a=t.types;e=t.ensureTypedArg(e,a.OBJECT,{}),e.texture=t.ensureTypedArg(e.texture,a.OBJECT,{}),this.uuid=u.Math.generateUUID(),this.fixedTimeStep=t.ensureTypedArg(e.fixedTimeStep,a.NUMBER,.016),this.texture=t.ensureInstanceOf(e.texture.value,u.Texture,null),this.textureFrames=t.ensureInstanceOf(e.texture.frames,u.Vector2,new u.Vector2(1,1)),this.textureFrameCount=t.ensureTypedArg(e.texture.frameCount,a.NUMBER,this.textureFrames.x*this.textureFrames.y),this.textureLoop=t.ensureTypedArg(e.texture.loop,a.NUMBER,1),this.textureFrames.max(new u.Vector2(1,1)),this.hasPerspective=t.ensureTypedArg(e.hasPerspective,a.BOOLEAN,!0),this.colorize=t.ensureTypedArg(e.colorize,a.BOOLEAN,!0),this.maxParticleCount=t.ensureTypedArg(e.maxParticleCount,a.NUMBER,null),this.blending=t.ensureTypedArg(e.blending,a.NUMBER,u.AdditiveBlending),this.transparent=t.ensureTypedArg(e.transparent,a.BOOLEAN,!0),this.alphaTest=parseFloat(t.ensureTypedArg(e.alphaTest,a.NUMBER,0)),this.depthWrite=t.ensureTypedArg(e.depthWrite,a.BOOLEAN,!1),this.depthTest=t.ensureTypedArg(e.depthTest,a.BOOLEAN,!0),this.fog=t.ensureTypedArg(e.fog,a.BOOLEAN,!0),this.scale=t.ensureTypedArg(e.scale,a.NUMBER,300),this.emitters=[],this.emitterIDs=[],this._pool=[],this._poolCreationSettings=null,this._createNewWhenPoolEmpty=0,this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!1,this.particleCount=0,this.uniforms={texture:{type:'t',value:this.texture},textureAnimation:{type:'v4',value:new u.Vector4(this.textureFrames.x,this.textureFrames.y,this.textureFrameCount,n(r(this.textureLoop),1))},fogColor:{type:'c',value:null},fogNear:{type:'f',value:10},fogFar:{type:'f',value:200},fogDensity:{type:'f',value:.5},deltaTime:{type:'f',value:0},runTime:{type:'f',value:0},scale:{type:'f',value:this.scale}},this.defines={HAS_PERSPECTIVE:this.hasPerspective,COLORIZE:this.colorize,VALUE_OVER_LIFETIME_LENGTH:g.valueOverLifetimeLength,SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:1<this.textureFrames.x||1<this.textureFrames.y},this.attributes={position:new g.ShaderAttribute('v3',!0),acceleration:new g.ShaderAttribute('v4',!0),velocity:new g.ShaderAttribute('v3',!0),rotation:new g.ShaderAttribute('v4',!0),rotationCenter:new g.ShaderAttribute('v3',!0),params:new g.ShaderAttribute('v4',!0),size:new g.ShaderAttribute('v4',!0),angle:new g.ShaderAttribute('v4',!0),color:new g.ShaderAttribute('v4',!0),opacity:new g.ShaderAttribute('v4',!0)},this.attributeKeys=Object.keys(this.attributes),this.attributeCount=this.attributeKeys.length,this.material=new u.ShaderMaterial({uniforms:this.uniforms,vertexShader:g.shaders.vertex,fragmentShader:g.shaders.fragment,blending:this.blending,transparent:this.transparent,alphaTest:this.alphaTest,depthWrite:this.depthWrite,depthTest:this.depthTest,defines:this.defines,fog:this.fog}),this.geometry=new u.BufferGeometry,this.mesh=new u.Points(this.geometry,this.material),null===this.maxParticleCount&&console.warn('SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.')},g.Group.constructor=g.Group,g.Group.prototype._updateDefines=function(){var e=this.emitters,t=e.length-1,a=this.defines,o;for(t;0<=t;--t)o=e[t],a.SHOULD_CALCULATE_SPRITE||(a.SHOULD_ROTATE_TEXTURE=a.SHOULD_ROTATE_TEXTURE||!!n(n.apply(null,o.angle.value),n.apply(null,o.angle.spread))),a.SHOULD_ROTATE_PARTICLES=a.SHOULD_ROTATE_PARTICLES||!!n(o.rotation.angle,o.rotation.angleSpread),a.SHOULD_WIGGLE_PARTICLES=a.SHOULD_WIGGLE_PARTICLES||!!n(o.wiggle.value,o.wiggle.spread);this.material.needsUpdate=!0},g.Group.prototype._applyAttributesToGeometry=function(){var e=this.attributes,t=this.geometry,a=t.attributes,o,r;for(var n in e)e.hasOwnProperty(n)&&(o=e[n],r=a[n],r?r.array=o.typedArray.array:t.addAttribute(n,o.bufferAttribute),o.bufferAttribute.needsUpdate=!0);this.geometry.setDrawRange(0,this.particleCount)},g.Group.prototype.addEmitter=function(e){if(!1==e instanceof g.Emitter)return void console.error('`emitter` argument must be instance of SPE.Emitter. Was provided with:',e);if(-1<this.emitterIDs.indexOf(e.uuid))return void console.error('Emitter already exists in this group. Will not add again.');if(null!==e.group)return void console.error('Emitter already belongs to another group. Will not add to requested group.');var t=this.attributes,a=this.particleCount,o=a+e.particleCount;for(var r in this.particleCount=o,null!==this.maxParticleCount&&this.particleCount>this.maxParticleCount&&console.warn('SPE.Group: maxParticleCount exceeded. Requesting',this.particleCount,'particles, can support only',this.maxParticleCount),e._calculatePPSValue(e.maxAge._value+e.maxAge._spread),e._setBufferUpdateRanges(this.attributeKeys),e._setAttributeOffset(a),e.group=this,e.attributes=this.attributes,t)t.hasOwnProperty(r)&&t[r]._createBufferAttribute(null===this.maxParticleCount?this.particleCount:this.maxParticleCount);for(var n=a;n<o;++n)e._assignPositionValue(n),e._assignForceValue(n,'velocity'),e._assignForceValue(n,'acceleration'),e._assignAbsLifetimeValue(n,'opacity'),e._assignAbsLifetimeValue(n,'size'),e._assignAngleValue(n),e._assignRotationValue(n),e._assignParamsValue(n),e._assignColorValue(n);return this._applyAttributesToGeometry(),this.emitters.push(e),this.emitterIDs.push(e.uuid),this._updateDefines(e),this.material.needsUpdate=!0,this.geometry.needsUpdate=!0,this._attributesNeedRefresh=!0,this},g.Group.prototype.removeEmitter=function(e){var t=this.emitterIDs.indexOf(e.uuid);if(!1==e instanceof g.Emitter)return void console.error('`emitter` argument must be instance of SPE.Emitter. Was provided with:',e);if(-1===t)return void console.error('Emitter does not exist in this group. Will not remove.');for(var a=e.attributeOffset,o=a+e.particleCount,r=this.attributes.params.typedArray,n=a;n<o;++n)r.array[4*n]=0,r.array[4*n+1]=0;for(var i in this.emitters.splice(t,1),this.emitterIDs.splice(t,1),this.attributes)this.attributes.hasOwnProperty(i)&&this.attributes[i].splice(a,o);this.particleCount-=e.particleCount,e._onRemove(),this._attributesNeedRefresh=!0},g.Group.prototype.getFromPool=function(){var e=this._pool,t=this._createNewWhenPoolEmpty;if(e.length)return e.pop();if(t){var a=new g.Emitter(this._poolCreationSettings);return this.addEmitter(a),a}return null},g.Group.prototype.releaseIntoPool=function(e){return!1==e instanceof g.Emitter?void console.error('Argument is not instanceof SPE.Emitter:',e):(e.reset(),this._pool.unshift(e),this)},g.Group.prototype.getPool=function(){return this._pool},g.Group.prototype.addPool=function(e,t,a){var o;this._poolCreationSettings=t,this._createNewWhenPoolEmpty=!!a;for(var r=0;r<e;++r)o=Array.isArray(t)?new g.Emitter(t[r]):new g.Emitter(t),this.addEmitter(o),this.releaseIntoPool(o);return this},g.Group.prototype._triggerSingleEmitter=function(e){var t=this.getFromPool(),a=this;return null===t?void console.log('SPE.Group pool ran out.'):(e instanceof u.Vector3&&(t.position.value.copy(e),t.position.value=t.position.value),t.enable(),setTimeout(function(){t.disable(),a.releaseIntoPool(t)},1e3*n(t.duration,t.maxAge.value+t.maxAge.spread)),this)},g.Group.prototype.triggerPoolEmitter=function(e,t){if('number'==typeof e&&1<e)for(var a=0;a<e;++a)this._triggerSingleEmitter(t);else this._triggerSingleEmitter(t);return this},g.Group.prototype._updateUniforms=function(e){this.uniforms.runTime.value+=e,this.uniforms.deltaTime.value=e},g.Group.prototype._resetBufferRanges=function(){var e=this.attributeKeys,t=this.attributeCount-1,a=this.attributes;for(t;0<=t;--t)a[e[t]].resetUpdateRange()},g.Group.prototype._updateBuffers=function(e){var t=this.attributeKeys,a=this.attributeCount-1,o=this.attributes,r=e.bufferUpdateRanges,n,i,s;for(a;0<=a;--a)n=t[a],i=r[n],s=o[n],s.setUpdateRange(i.min,i.max),s.flagUpdate()},g.Group.prototype.tick=function(e){var t=this.emitters,a=t.length,o=e||this.fixedTimeStep,r=this.attributeKeys,n=this.attributes,s;if(this._updateUniforms(o),this._resetBufferRanges(),0!==a||!1!==this._attributesNeedRefresh||!1!==this._attributesNeedDynamicReset){for(var s=0,i;s<a;++s)i=t[s],i.tick(o),this._updateBuffers(i);if(!0===this._attributesNeedDynamicReset){for(s=this.attributeCount-1,s;0<=s;--s)n[r[s]].resetDynamic();this._attributesNeedDynamicReset=!1}if(!0===this._attributesNeedRefresh){for(s=this.attributeCount-1,s;0<=s;--s)n[r[s]].forceUpdateAll();this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!0}}},g.Group.prototype.dispose=function(){return this.geometry.dispose(),this.material.dispose(),this},g.Emitter=function(e){var t=g.utils,a=t.types,o=g.valueOverLifetimeLength;for(var r in e=t.ensureTypedArg(e,a.OBJECT,{}),e.position=t.ensureTypedArg(e.position,a.OBJECT,{}),e.velocity=t.ensureTypedArg(e.velocity,a.OBJECT,{}),e.acceleration=t.ensureTypedArg(e.acceleration,a.OBJECT,{}),e.radius=t.ensureTypedArg(e.radius,a.OBJECT,{}),e.drag=t.ensureTypedArg(e.drag,a.OBJECT,{}),e.rotation=t.ensureTypedArg(e.rotation,a.OBJECT,{}),e.color=t.ensureTypedArg(e.color,a.OBJECT,{}),e.opacity=t.ensureTypedArg(e.opacity,a.OBJECT,{}),e.size=t.ensureTypedArg(e.size,a.OBJECT,{}),e.angle=t.ensureTypedArg(e.angle,a.OBJECT,{}),e.wiggle=t.ensureTypedArg(e.wiggle,a.OBJECT,{}),e.maxAge=t.ensureTypedArg(e.maxAge,a.OBJECT,{}),e.onParticleSpawn&&console.warn('onParticleSpawn has been removed. Please set properties directly to alter values at runtime.'),this.uuid=u.Math.generateUUID(),this.type=t.ensureTypedArg(e.type,a.NUMBER,g.distributions.BOX),this.position={_value:t.ensureInstanceOf(e.position.value,u.Vector3,new u.Vector3),_spread:t.ensureInstanceOf(e.position.spread,u.Vector3,new u.Vector3),_spreadClamp:t.ensureInstanceOf(e.position.spreadClamp,u.Vector3,new u.Vector3),_distribution:t.ensureTypedArg(e.position.distribution,a.NUMBER,this.type),_randomise:t.ensureTypedArg(e.position.randomise,a.BOOLEAN,!1),_radius:t.ensureTypedArg(e.position.radius,a.NUMBER,10),_radiusScale:t.ensureInstanceOf(e.position.radiusScale,u.Vector3,new u.Vector3(1,1,1)),_distributionClamp:t.ensureTypedArg(e.position.distributionClamp,a.NUMBER,0)},this.velocity={_value:t.ensureInstanceOf(e.velocity.value,u.Vector3,new u.Vector3),_spread:t.ensureInstanceOf(e.velocity.spread,u.Vector3,new u.Vector3),_distribution:t.ensureTypedArg(e.velocity.distribution,a.NUMBER,this.type),_randomise:t.ensureTypedArg(e.position.randomise,a.BOOLEAN,!1)},this.acceleration={_value:t.ensureInstanceOf(e.acceleration.value,u.Vector3,new u.Vector3),_spread:t.ensureInstanceOf(e.acceleration.spread,u.Vector3,new u.Vector3),_distribution:t.ensureTypedArg(e.acceleration.distribution,a.NUMBER,this.type),_randomise:t.ensureTypedArg(e.position.randomise,a.BOOLEAN,!1)},this.drag={_value:t.ensureTypedArg(e.drag.value,a.NUMBER,0),_spread:t.ensureTypedArg(e.drag.spread,a.NUMBER,0),_randomise:t.ensureTypedArg(e.position.randomise,a.BOOLEAN,!1)},this.wiggle={_value:t.ensureTypedArg(e.wiggle.value,a.NUMBER,0),_spread:t.ensureTypedArg(e.wiggle.spread,a.NUMBER,0)},this.rotation={_axis:t.ensureInstanceOf(e.rotation.axis,u.Vector3,new u.Vector3(0,1,0)),_axisSpread:t.ensureInstanceOf(e.rotation.axisSpread,u.Vector3,new u.Vector3),_angle:t.ensureTypedArg(e.rotation.angle,a.NUMBER,0),_angleSpread:t.ensureTypedArg(e.rotation.angleSpread,a.NUMBER,0),_static:t.ensureTypedArg(e.rotation.static,a.BOOLEAN,!1),_center:t.ensureInstanceOf(e.rotation.center,u.Vector3,this.position._value.clone()),_randomise:t.ensureTypedArg(e.position.randomise,a.BOOLEAN,!1)},this.maxAge={_value:t.ensureTypedArg(e.maxAge.value,a.NUMBER,2),_spread:t.ensureTypedArg(e.maxAge.spread,a.NUMBER,0)},this.color={_value:t.ensureArrayInstanceOf(e.color.value,u.Color,new u.Color),_spread:t.ensureArrayInstanceOf(e.color.spread,u.Vector3,new u.Vector3),_randomise:t.ensureTypedArg(e.position.randomise,a.BOOLEAN,!1)},this.opacity={_value:t.ensureArrayTypedArg(e.opacity.value,a.NUMBER,1),_spread:t.ensureArrayTypedArg(e.opacity.spread,a.NUMBER,0),_randomise:t.ensureTypedArg(e.position.randomise,a.BOOLEAN,!1)},this.size={_value:t.ensureArrayTypedArg(e.size.value,a.NUMBER,1),_spread:t.ensureArrayTypedArg(e.size.spread,a.NUMBER,0),_randomise:t.ensureTypedArg(e.position.randomise,a.BOOLEAN,!1)},this.angle={_value:t.ensureArrayTypedArg(e.angle.value,a.NUMBER,0),_spread:t.ensureArrayTypedArg(e.angle.spread,a.NUMBER,0),_randomise:t.ensureTypedArg(e.position.randomise,a.BOOLEAN,!1)},this.particleCount=t.ensureTypedArg(e.particleCount,a.NUMBER,100),this.duration=t.ensureTypedArg(e.duration,a.NUMBER,null),this.isStatic=t.ensureTypedArg(e.isStatic,a.BOOLEAN,!1),this.activeMultiplier=t.ensureTypedArg(e.activeMultiplier,a.NUMBER,1),this.direction=t.ensureTypedArg(e.direction,a.NUMBER,1),this.alive=t.ensureTypedArg(e.alive,a.BOOLEAN,!0),this.particlesPerSecond=0,this.activationIndex=0,this.attributeOffset=0,this.attributeEnd=0,this.age=0,this.activeParticleCount=0,this.group=null,this.attributes=null,this.paramsArray=null,this.resetFlags={position:t.ensureTypedArg(e.position.randomise,a.BOOLEAN,!1)||t.ensureTypedArg(e.radius.randomise,a.BOOLEAN,!1),velocity:t.ensureTypedArg(e.velocity.randomise,a.BOOLEAN,!1),acceleration:t.ensureTypedArg(e.acceleration.randomise,a.BOOLEAN,!1)||t.ensureTypedArg(e.drag.randomise,a.BOOLEAN,!1),rotation:t.ensureTypedArg(e.rotation.randomise,a.BOOLEAN,!1),rotationCenter:t.ensureTypedArg(e.rotation.randomise,a.BOOLEAN,!1),size:t.ensureTypedArg(e.size.randomise,a.BOOLEAN,!1),color:t.ensureTypedArg(e.color.randomise,a.BOOLEAN,!1),opacity:t.ensureTypedArg(e.opacity.randomise,a.BOOLEAN,!1),angle:t.ensureTypedArg(e.angle.randomise,a.BOOLEAN,!1)},this.updateFlags={},this.updateCounts={},this.updateMap={maxAge:'params',position:'position',velocity:'velocity',acceleration:'acceleration',drag:'acceleration',wiggle:'params',rotation:'rotation',size:'size',color:'color',opacity:'opacity',angle:'angle'},this.updateMap)this.updateMap.hasOwnProperty(r)&&(this.updateCounts[this.updateMap[r]]=0,this.updateFlags[this.updateMap[r]]=!1,this._createGetterSetters(this[r],r));this.bufferUpdateRanges={},this.attributeKeys=null,this.attributeCount=0,t.ensureValueOverLifetimeCompliance(this.color,o,o),t.ensureValueOverLifetimeCompliance(this.opacity,o,o),t.ensureValueOverLifetimeCompliance(this.size,o,o),t.ensureValueOverLifetimeCompliance(this.angle,o,o)},g.Emitter.constructor=g.Emitter,g.Emitter.prototype._createGetterSetters=function(e,t){var a=this;for(var o in e)if(e.hasOwnProperty(o)){var r=o.replace('_','');Object.defineProperty(e,r,{get:function(e){return function(){return this[e]}}(o),set:function(e){return function(o){var r=a.updateMap[t],n=this[e],i=g.valueOverLifetimeLength;'_rotationCenter'===e?(a.updateFlags.rotationCenter=!0,a.updateCounts.rotationCenter=0):'_randomise'===e?a.resetFlags[r]=o:(a.updateFlags[r]=!0,a.updateCounts[r]=0),a.group._updateDefines(),this[e]=o,Array.isArray(n)&&g.utils.ensureValueOverLifetimeCompliance(a[t],i,i)}}(o)})}},g.Emitter.prototype._setBufferUpdateRanges=function(e){this.attributeKeys=e,this.attributeCount=e.length;for(var t=this.attributeCount-1;0<=t;--t)this.bufferUpdateRanges[e[t]]={min:p,max:d}},g.Emitter.prototype._calculatePPSValue=function(e){var t=this.particleCount;this.particlesPerSecond=this.duration?t/(e<this.duration?e:this.duration):t/e},g.Emitter.prototype._setAttributeOffset=function(e){this.attributeOffset=e,this.activationIndex=e,this.activationEnd=e+this.particleCount},g.Emitter.prototype._assignValue=function(e,t){'position'===e?this._assignPositionValue(t):'velocity'===e||'acceleration'===e?this._assignForceValue(t,e):'size'===e||'opacity'===e?this._assignAbsLifetimeValue(t,e):'angle'===e?this._assignAngleValue(t):'params'===e?this._assignParamsValue(t):'rotation'===e?this._assignRotationValue(t):'color'===e?this._assignColorValue(t):void 0},g.Emitter.prototype._assignPositionValue=function(e){var t=g.distributions,a=g.utils,o=this.position,r=this.attributes.position,n=o._value,i=o._spread,s=o._distribution;s===t.BOX?a.randomVector3(r,e,n,i,o._spreadClamp):s===t.SPHERE?a.randomVector3OnSphere(r,e,n,o._radius,o._spread.x,o._radiusScale,o._spreadClamp.x,o._distributionClamp||this.particleCount):s===t.DISC?a.randomVector3OnDisc(r,e,n,o._radius,o._spread.x,o._radiusScale,o._spreadClamp.x):void 0},g.Emitter.prototype._assignForceValue=function(e,t){var a=g.distributions,o=g.utils,r=this[t],n=r._value,s=r._spread,l=r._distribution,d,p,c,u,y;if(l===a.BOX?o.randomVector3(this.attributes[t],e,n,s):l===a.SPHERE?(d=this.attributes.position.typedArray.array,y=3*e,p=d[y],c=d[y+1],u=d[y+2],o.randomDirectionVector3OnSphere(this.attributes[t],e,p,c,u,this.position._value,r._value.x,r._spread.x)):l===a.DISC?(d=this.attributes.position.typedArray.array,y=3*e,p=d[y],c=d[y+1],u=d[y+2],o.randomDirectionVector3OnDisc(this.attributes[t],e,p,c,u,this.position._value,r._value.x,r._spread.x)):void 0,'acceleration'===t){var i=o.clamp(o.randomFloat(this.drag._value,this.drag._spread),0,1);this.attributes.acceleration.typedArray.array[4*e+3]=i}},g.Emitter.prototype._assignAbsLifetimeValue=function(e,t){var a=this.attributes[t].typedArray,o=this[t],n=g.utils,i;n.arrayValuesAreEqual(o._value)&&n.arrayValuesAreEqual(o._spread)?(i=r(n.randomFloat(o._value[0],o._spread[0])),a.setVec4Components(e,i,i,i,i)):a.setVec4Components(e,r(n.randomFloat(o._value[0],o._spread[0])),r(n.randomFloat(o._value[1],o._spread[1])),r(n.randomFloat(o._value[2],o._spread[2])),r(n.randomFloat(o._value[3],o._spread[3])))},g.Emitter.prototype._assignAngleValue=function(e){var t=this.attributes.angle.typedArray,a=this.angle,o=g.utils,r;o.arrayValuesAreEqual(a._value)&&o.arrayValuesAreEqual(a._spread)?(r=o.randomFloat(a._value[0],a._spread[0]),t.setVec4Components(e,r,r,r,r)):t.setVec4Components(e,o.randomFloat(a._value[0],a._spread[0]),o.randomFloat(a._value[1],a._spread[1]),o.randomFloat(a._value[2],a._spread[2]),o.randomFloat(a._value[3],a._spread[3]))},g.Emitter.prototype._assignParamsValue=function(e){this.attributes.params.typedArray.setVec4Components(e,this.isStatic?1:0,0,r(g.utils.randomFloat(this.maxAge._value,this.maxAge._spread)),g.utils.randomFloat(this.wiggle._value,this.wiggle._spread))},g.Emitter.prototype._assignRotationValue=function(e){this.attributes.rotation.typedArray.setVec3Components(e,g.utils.getPackedRotationAxis(this.rotation._axis,this.rotation._axisSpread),g.utils.randomFloat(this.rotation._angle,this.rotation._angleSpread),this.rotation._static?0:1),this.attributes.rotationCenter.typedArray.setVec3(e,this.rotation._center)},g.Emitter.prototype._assignColorValue=function(e){g.utils.randomColorAsHex(this.attributes.color,e,this.color._value,this.color._spread)},g.Emitter.prototype._resetParticle=function(e){for(var t=this.resetFlags,a=this.updateFlags,o=this.updateCounts,r=this.attributeKeys,n=this.attributeCount-1,i,s;0<=n;--n)i=r[n],s=a[i],(!0===t[i]||!0===s)&&(this._assignValue(i,e),this._updateAttributeUpdateRange(i,e),!0===s&&o[i]===this.particleCount?(a[i]=!1,o[i]=0):!0==s&&++o[i])},g.Emitter.prototype._updateAttributeUpdateRange=function(e,t){var a=this.bufferUpdateRanges[e];a.min=s(t,a.min),a.max=n(t,a.max)},g.Emitter.prototype._resetBufferRanges=function(){var e=this.bufferUpdateRanges,t=this.bufferUpdateKeys,a=this.bufferUpdateCount-1,o;for(a;0<=a;--a)o=t[a],e[o].min=p,e[o].max=d},g.Emitter.prototype._onRemove=function(){this.particlesPerSecond=0,this.attributeOffset=0,this.activationIndex=0,this.activeParticleCount=0,this.group=null,this.attributes=null,this.paramsArray=null,this.age=0},g.Emitter.prototype._decrementParticleCount=function(){--this.activeParticleCount},g.Emitter.prototype._incrementParticleCount=function(){++this.activeParticleCount},g.Emitter.prototype._checkParticleAges=function(e,t,a,o){for(var r=t-1,n,i,s,l;r>=e;--r)(n=4*r,l=a[n],0!==l)&&(s=a[n+1],i=a[n+2],1===this.direction?(s+=o,s>=i&&(s=0,l=0,this._decrementParticleCount())):(s-=o,0>=s&&(s=i,l=0,this._decrementParticleCount())),a[n]=l,a[n+1]=s,this._updateAttributeUpdateRange('params',r))},g.Emitter.prototype._activateParticles=function(e,t,a,o){for(var r=this.direction,n=e,i,s;n<t;++n)(i=4*n,0==a[i]||1===this.particleCount)&&(this._incrementParticleCount(),a[i]=1,this._resetParticle(n),s=o*(n-e),a[i+1]=-1===r?a[i+2]-s:s,this._updateAttributeUpdateRange('params',n))},g.Emitter.prototype.tick=function(e){if(!this.isStatic){null===this.paramsArray&&(this.paramsArray=this.attributes.params.typedArray.array);var t=this.attributeOffset,a=t+this.particleCount,o=this.paramsArray,r=this.particlesPerSecond*this.activeMultiplier*e,n=this.activationIndex;if(this._resetBufferRanges(),this._checkParticleAges(t,a,o,e),!1===this.alive)return void(this.age=0);if(null!==this.duration&&this.age>this.duration)return this.alive=!1,void(this.age=0);var i=1===this.particleCount?n:0|n,l=s(i+r,this.activationEnd),d=0|l-this.activationIndex,p=0<d?e/d:0;this._activateParticles(i,l,o,p),this.activationIndex+=r,this.activationIndex>a&&(this.activationIndex=t),this.age+=e}},g.Emitter.prototype.reset=function(e){if(this.age=0,this.alive=!1,!0===e){for(var t=this.attributeOffset,a=t+this.particleCount,o=this.paramsArray,r=this.attributes.params.bufferAttribute,n=a-1,i;n>=t;--n)i=4*n,o[i]=0,o[i+1]=0;r.updateRange.offset=0,r.updateRange.count=-1,r.needsUpdate=!0}return this},g.Emitter.prototype.enable=function(){return this.alive=!0,this},g.Emitter.prototype.disable=function(){return this.alive=!1,this},g.Emitter.prototype.remove=function(){return null===this.group?console.error('Emitter does not belong to a group, cannot remove.'):this.group.removeEmitter(this),this},l.prototype._finalize=function(e){for(var t=0;t<e.emitters.length;t++)0==e.emitters[t].duration&&9<e.emitters[t].activeMultiplier&&(e.emitters[t].particlesPerSecond=1e4);return this.groups.push(e),e.sheepfxID=this.groups.length-1,e.mesh.group=e,e.mesh.emitters=e.emitters,e.uniforms.scale.value=this.screenScale,e.fog=!1,e.mesh},l.prototype.effectFromJson=function(t,a,o){if(!t.emitter_length)return console.log('Error: Json file is not of type \'Effect\''),this.generateTemplate(a);var r=0;if(o)r=o;else for(var n=0;n<t.emitter_length;n++)r+=t['emitter_'+n.toString()].particleCount;var i=t.texture&&t.texture.frames&&(1!=t.texture.frames.x||1!=t.texture.frames.y)?new g.Group({maxParticleCount:r,texture:{value:a,frames:new u.Vector2().copy(t.texture.frames),frameCount:t.texture.frameCount,loop:t.texture.loop},blending:t.blending,depthWrite:t.depthWrite,depthTest:t.depthTest,fog:!1}):new g.Group({maxParticleCount:r,texture:{value:a,frames:null,frameCount:null,loop:null},blending:t.blending,depthWrite:t.depthWrite,depthTest:t.depthTest,fog:!1});for(var n=0,s;n<t.emitter_length;n++)s=t['emitter_'+n.toString()],i.addEmitter(this.emitterFromJson(s));return this._finalize(i)},l.prototype.emitterFromJson=function(t){if(!t.particleCount){console.log('Error: Json file is not of type \'Emitter\'');var a=this.generateTemplate(t,null),o=a.emitters[0].copy();return this.remove(a),o}var r=t,e=[new u.Color(r.color.value[0].x,r.color.value[0].y,r.color.value[0].z),new u.Color(r.color.value[1].x,r.color.value[1].y,r.color.value[1].z),new u.Color(r.color.value[2].x,r.color.value[2].y,r.color.value[2].z),new u.Color(r.color.value[3].x,r.color.value[3].y,r.color.value[3].z)],n=[new u.Vector3().copy(r.color.spread[0]),new u.Vector3().copy(r.color.spread[1]),new u.Vector3().copy(r.color.spread[2]),new u.Vector3().copy(r.color.spread[3])],i=new g.Emitter({type:r.type,particleCount:r.particleCount,duration:r.duration,isStatic:r.isStatic,activeMultiplier:r.activeMultiplier,direction:r.direction,maxAge:{value:r.maxAge.value,spread:r.maxAge.spread},position:{value:new u.Vector3().copy(r.position.value),spread:new u.Vector3().copy(r.position.spread),radius:r.position.radius,radiusScale:new u.Vector3().copy(r.position.radiusScale),distribution:r.position.distribution,randomise:!1},velocity:{value:new u.Vector3().copy(r.velocity.value),spread:new u.Vector3().copy(r.velocity.spread),distribution:r.velocity.distribution,randomise:!1},acceleration:{value:new u.Vector3().copy(r.acceleration.value),spread:new u.Vector3().copy(r.acceleration.spread),randomise:!1},drag:{value:r.drag.value,spread:r.drag.spread,randomise:!1},wiggle:{value:r.wiggle.value,spread:r.wiggle.spread},rotation:{axis:new u.Vector3().copy(r.rotation.axis),axisSpread:new u.Vector3().copy(r.rotation.axisSpread),angle:r.rotation.angle,angleSpread:r.rotation.angleSpread,static:r.rotation.static,center:new u.Vector3().copy(r.rotation.center),randomise:!1},color:{value:e,spread:n,randomise:!1},opacity:{value:[r.opacity.value[0],r.opacity.value[1],r.opacity.value[2],r.opacity.value[3]],spread:[r.opacity.spread[0],r.opacity.spread[1],r.opacity.spread[2],r.opacity.spread[3]],randomise:!1},size:{value:[r.size.value[0],r.size.value[1],r.size.value[2],r.size.value[3]],spread:[r.size.spread[0],r.size.spread[1],r.size.spread[2],r.size.spread[3]],randomise:!1},angle:{value:[r.angle.value[0],r.angle.value[1],r.angle.value[2],r.angle.value[3]],spread:[r.angle.spread[0],r.angle.spread[1],r.angle.spread[2],r.angle.spread[3]],randomise:!1}});return i},l.prototype.generateTemplate=function(e){var t=new g.Group({maxParticleCount:1e4,texture:{value:e,frames:null,frameCount:1,loop:1},blending:u.AdditiveBlending,transparent:!0,depthWrite:!1,depthTest:!0,fog:!1,scale:100}),a=new g.Emitter({type:g.distributions.box,particleCount:400,duration:null,isStatic:!1,activeMultiplier:1,direction:1,maxAge:{value:2,spread:0},position:{value:new u.Vector3(0,0,0),spread:new u.Vector3(0,0,0),radius:1,radiusScale:new u.Vector3(1,1,1),distribution:g.distributions.BOX,randomise:!1},velocity:{value:new u.Vector3(0,.5,0),spread:new u.Vector3(.2,0,.2),distribution:g.distributions.box,randomise:!1},acceleration:{value:new u.Vector3(0,0,0),spread:new u.Vector3(0,-.5,0),randomise:!1},drag:{value:0,spread:0,randomise:!1},wiggle:{value:0,spread:0},rotation:{axis:new u.Vector3(0,0,0),axisSpread:new u.Vector3(1,1,1),angle:0,angleSpread:0,static:!1,center:new u.Vector3(0,0,0),randomise:!1},color:{value:[new u.Color('blue'),new u.Color('yellow'),new u.Color('red'),new u.Color('black')],spread:[new u.Vector3(0,0,0),new u.Vector3(0,0,0),new u.Vector3(0,0,0),new u.Vector3(0,0,0)],randomise:!1},opacity:{value:[0,1,1,0],spread:[0,0,0,0],randomise:!1},size:{value:[1,1,1,3],spread:[0,0,0,0],randomise:!1},angle:{value:[0,10],spread:[1,1],randomise:!1}});return t.addEmitter(a),this._finalize(t)},l.prototype.copyFX=function(e,t,a){var o=e.group,r=0;if(a)r=a;else for(var n=0;n<e.emitters.length;n++)r+=e.emitters[n].particleCount;for(var i=new g.Group({maxParticleCount:r,texture:{value:t,frames:o.textureFrames,frameCount:o.textureFrameCount,loop:o.textureLoop},blending:o.material.blending,depthWrite:o.material.depthWrite,depthTest:o.material.depthTest,fog:o.fog}),n=0,s;n<e.emitters.length;n++)s=e.emitters[n].copy(),i.addEmitter(s);return this._finalize(i)},l.prototype.remove=function(e){if(0>=this.groups.length&&console.info('SheepFX: Attempting to remove from empty list'),1==this.groups.length){for(this.groups.pop(),e.parent&&e.parent.remove(e);0<e.group.emitters.length;)e.group.removeEmitter(e.emitters[0]);e.group.dispose()}else{var t=e.group.sheepfxID,a=this.groups[t];for(this.groups[t]=this.groups[this.groups.length-1],this.groups[t].sheepfxID=t,this.groups.pop(),a.mesh.parent&&a.mesh.parent.remove(a.mesh);0<a.emitters.length;)a.removeEmitter(a.emitters[0]);a.dispose()}},l.prototype.removeAll=function(){for(;0<this.groups.length;)this.remove(this.groups[0].mesh)},l.prototype.update=function(e){for(var t=0;t<this.groups.length;t++)this.groups[t].tick(e)},l.prototype.setParticleSize=function(e){this.screenScale=.2*e;for(var t=0;t<this.groups.length;t++)this.groups[t].uniforms.scale.value=this.screenScale},l.prototype.getJSON=function(e,t,a){var o='undefined'==typeof XMLHttpRequest?new ActiveXObject('Microsoft.XMLHTTP'):new XMLHttpRequest;o.open('get',e,!0),o.onreadystatechange=function(){var e,r;4==o.readyState&&(e=o.status,200==e?(r=JSON.parse(o.responseText),t&&t(r)):a&&a(e))},o.send()},u.Points.prototype.setEffectScale=function(t){var a=t/this._effectSize;this._effectSize=t;for(var o=0,r;o<this.emitters.length;o++)r=this.emitters[o],r.position.spread&&(r.position.spread=r.position.spread.multiplyScalar(a)),r.position.radious&&(r.position.radious=r.position.radious.multiplyScalar(a)),r.velocity.value&&(r.velocity.value=r.velocity.value.multiplyScalar(a)),r.velocity.spread&&(r.velocity.spread=r.velocity.spread.multiplyScalar(a)),r.acceleration.value&&(r.acceleration.value=r.acceleration.value.multiplyScalar(a)),r.acceleration.spread&&(r.acceleration.spread=r.acceleration.spread.multiplyScalar(a)),r.drag.value&&(r.drag.value*=a),r.drag.spread&&(r.drag.spread*=a),r.size.value&&(r.size.value[0]*=a,r.size.value[1]*=a,r.size.value[2]*=a,r.size.value[3]*=a,r.size.value=r.size.value),r.size.spread&&(r.size.spread[0]*=a,r.size.spread[1]*=a,r.size.spread[2]*=a,r.size.spread[3]*=a,r.size.spread=r.size.spread)},u.Points.prototype.getEffectScale=function(){return this._effectSize},u.Points.prototype.reset=function(e){for(var t=0;t<this.group.emitters.length;t++)this.emitters[t].reset(!!e),this.emitters[t].alive=!0},g.Emitter.prototype.copy=function(e){e||(e=this.particleCount);var t=[new u.Color(this.color.value[0].r,this.color.value[0].g,this.color.value[0].b),new u.Color(this.color.value[1].r,this.color.value[1].g,this.color.value[1].b),new u.Color(this.color.value[2].r,this.color.value[2].g,this.color.value[2].b),new u.Color(this.color.value[3].r,this.color.value[3].g,this.color.value[3].b)],a=[new u.Vector3().copy(this.color.spread[0]),new u.Vector3().copy(this.color.spread[1]),new u.Vector3().copy(this.color.spread[2]),new u.Vector3().copy(this.color.spread[3])],o=new g.Emitter({particleCount:e,type:this.type,duration:this.duration,isStatic:this.isStatic,activeMultiplier:this.activeMultiplier,direction:this.direction,maxAge:{value:this.maxAge.value,spread:this.maxAge.spread},position:{value:new u.Vector3().copy(this.position.value),spread:new u.Vector3().copy(this.position.spread),radius:this.position.radius,radiusScale:new u.Vector3().copy(this.position.radiusScale),distribution:this.position.distribution,randomise:!1},velocity:{value:new u.Vector3().copy(this.velocity.value),spread:new u.Vector3().copy(this.velocity.spread),distribution:this.velocity.distribution,randomise:!1},acceleration:{value:new u.Vector3().copy(this.acceleration.value),spread:new u.Vector3().copy(this.acceleration.spread),randomise:!1},drag:{value:this.drag.value,spread:this.drag.spread,randomise:!1},wiggle:{value:this.wiggle.value,spread:this.wiggle.spread},rotation:{axis:new u.Vector3().copy(this.rotation.axis),axisSpread:new u.Vector3().copy(this.rotation.axisSpread),angle:this.rotation.angle,angleSpread:this.rotation.angleSpread,static:this.rotation.static,center:new u.Vector3().copy(this.rotation.center),randomise:!1},color:{value:t,spread:a,randomise:!1},opacity:{value:[this.opacity.value[0],this.opacity.value[1],this.opacity.value[2],this.opacity.value[3]],spread:[this.opacity.spread[0],this.opacity.spread[1],this.opacity.spread[2],this.opacity.spread[3]],randomise:!1},size:{value:[this.size.value[0],this.size.value[1],this.size.value[2],this.size.value[3]],spread:[this.size.spread[0],this.size.spread[1],this.size.spread[2],this.size.spread[3]],randomise:!1},angle:{value:[this.angle.value[0],this.angle.value[1],this.angle.value[2],this.angle.value[3]],spread:[this.angle.spread[0],this.angle.spread[1],this.angle.spread[2],this.angle.spread[3]],randomise:!1}});return o},g.Emitter.prototype.setPosition=function(e,t,a){this.position.value=null===t||void 0===t?this.position.value.set(e.x,e.y,e.z):this.position.value.set(e,t,a)},g.Emitter.prototype.getPosition=function(){return this.position.value},t['default']=l}.call(t,a(500)(e))},function(e){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,'loaded',{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,'id',{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,'exports',{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,a){Object.defineProperty(t,'__esModule',{value:!0});var o=a(50),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t['default']=e,t}(o);t['default']=function(e,t,a,o,n,i,s,l,d){this.inUse=!1,this.name='',this.direction='',this.variant=0,this.biome='',this.spline=null,this.waypoints=d,this.coins=[],this.isTunnel=!1,this.endAngle=d[d.length-1].rot,this.mesh=new r.Mesh(e,o),this.deco=t,this.collisionMesh=a,this.wayLoc=[],this.roadLength=0,this.currencyMeshes=s,this.collectableMeshes=l,this.POOL_BUFFER=5,this.currencyPools=[],this.collectablePools=[],this.mat=o,null!=this.collisionMesh&&(this.collisionMesh=new r.Mesh(a,i),this.mesh.add(this.collisionMesh),this.collisionMesh.material.visible=!1),null!=this.deco&&(this.deco=new r.Mesh(t,n),this.mesh.add(this.deco)),this.createCoins=function(e){for(var t=0;t<this.coins.length;t++)this.coins[t].defaultPosition=new r.Vector3(this.coins[t].loc.x,this.coins[t].loc.y,this.coins[t].loc.z),this.coins[t].collected=!1,this.coins[t].reference=null,this.coins[t].type=null;for(var a=0,o;a<e.CURRENCY_TYPE_COUNT;a++){o=e.CurrencyTypes.properties[a].dropRate.powerup,o=o>this.coins.length?this.coins.length:o,o+=this.POOL_BUFFER,this.currencyPools[a]=Array(o);for(var n=0;n<o;n++)this.currencyPools[a][n]=new r.Mesh(this.currencyMeshes[a].geometry,this.deco.material),this.mesh.add(this.currencyPools[a][n]),this.currencyPools[a][n].rotation.x=r.Math.degToRad(90),this.currencyPools[a][n].visible=!1}for(var i=0,s;i<e.COLLECTABLE_TYPE_COUNT;i++){s=e.CollectableTypes.properties[i].dropRate.powerup,s+=this.POOL_BUFFER,this.collectablePools[i]=Array(s);for(var l=0;l<s;l++)this.collectablePools[i][l]=new r.Mesh(this.collectableMeshes[i].geometry,this.deco.material),this.mesh.add(this.collectablePools[i][l]),this.collectablePools[i][l].rotation.x=r.Math.degToRad(90),this.collectablePools[i][l].visible=!1,this.collectablePools[i][l].collectableType=i}},this.resetCoins=function(e){for(var t=[],a=0;a<this.currencyPools.length;a++){t[a]=0;for(var o=0;o<this.currencyPools[a].length;o++)this.currencyPools[a][o].position.set(0,100,0),this.currencyPools[a][o].visible=!1}for(var n=[],i=0;i<this.collectablePools.length;i++){n[i]=0;for(var s=0;s<this.collectablePools[i].length;s++)this.collectablePools[i][s].position.set(0,100,0),this.collectablePools[i][s].visible=!1}for(var l=0,d;l<this.coins.length;l++)d=e.popDropList(),d.pickupType===e.PickupType.CURRENCY?this.coins[l].reference=this.currencyPools[d.subType][t[d.subType]++]:d.pickupType===e.PickupType.COLLECTABLE&&(this.coins[l].reference=this.collectablePools[d.subType][n[d.subType]++]),this.coins[l].reference&&(this.coins[l].type=d,this.coins[l].reference.visible=!0,this.coins[l].collected=!1,this.coins[l].reference.position.copy(this.coins[l].defaultPosition),this.coins[l].reference.rotation.y=r.Math.degToRad(10*l),this.coins[l].reference.scale.set(1,1,1))},this.updateCoins=function(e){for(var t=this,a=0;a<this.coins.length;a++)this.coins[a].reference.getWorldPosition().distanceTo(e.player.avatar.getWorldPosition())<e.player.pickupRadius&&!this.coins[a].collected&&function(){t.isTunnel?e.assets.audio.collect.play():e.assets.audio.collect.play(),t.coins[a].reference.scale.set(1.8,1.8,1.8),t.coins[a].reference.position.z+=.2,t.coins[a].reference.position.y+=1;var o=t.coins[a].reference;t.coins[a].type.pickupType===e.collectables.PickupType.CURRENCY?(e.updateCurrentCurrency(t.coins[a].type.subType),e.updateTotalCurrency(t.coins[a].type.subType)):t.coins[a].type.pickupType===e.collectables.PickupType.COLLECTABLE&&e.activatePowerup(t.coins[a].type.subType),t.coins[a].collected=!0,setTimeout(function(){o.visible=!1,o.position=new r.Vector3(0,0,0)},100)}(),this.coins[a].reference.rotation.y+=3*e.delta},this.createSpline=function(){this.wayLoc=[];for(var e=0,t;e<d.length;e++){t=new r.Vector3(d[e].loc.x+this.mesh.position.x,d[e].loc.y+this.mesh.position.y,d[e].loc.z+this.mesh.position.z),t=new r.Vector3(t.x-this.mesh.position.x,t.y-this.mesh.position.y,t.z-this.mesh.position.z);var a=new r.Quaternion;a.setFromAxisAngle(new r.Vector3(0,1,0),this.mesh.rotation.z),t=t.applyQuaternion(a),t=new r.Vector3(t.x+this.mesh.position.x,t.y+this.mesh.position.y,t.z+this.mesh.position.z),this.wayLoc.push(t)}this.spline=new r.CatmullRomCurve3(this.wayLoc)}}},function(e,t,a){Object.defineProperty(t,'__esModule',{value:!0});var o=a(70),r=function(e){return e&&e.__esModule?e:{default:e}}(o),n=function(e,t){this.game=e,this.config=this.game.cache.getJSON('config'),this.consumables=t?t:new r['default'](this.game),this.PowerupTypes={MAGNETISM:0,properties:{0:{name:'magnet',duration:0,range:8,force:10,affectedBy:this.consumables.Consumables.MAGNET}}},this.PowerupStates={NULL:0,ACTIVATE:1,IN_PROGRESS:2,DEACTIVATE:3},this.POWERUP_TYPE_COUNT=Object.keys(this.PowerupTypes.properties).length,this.powerupState=[],this.powerupStartTime=[];for(var a=0,o;a<this.POWERUP_TYPE_COUNT;a++)o=this.PowerupTypes.properties[a].name,this.PowerupTypes.properties[a].duration=this.consumables.isActive(this.PowerupTypes.properties[a].affectedBy)?this.config.powerupDuration[o].powerup:this.config.powerupDuration[o]['default']};n.prototype.isPowerupActive=function(e){return this.powerupState[e]===this.PowerupStates.IN_PROGRESS},n.prototype.activate=function(e){this.powerupState[e]=this.PowerupStates.ACTIVATE},n.prototype.deactivateAllPowerups=function(){for(var e=0;e<this.POWERUP_TYPE_COUNT;e++)this.powerupState[e]=this.PowerupStates.DEACTIVATE},n.prototype.update=function(e,t){for(var a=0;a<this.POWERUP_TYPE_COUNT;a++)this.powerupState[a]===this.PowerupStates.ACTIVATE?(this.powerupStartTime[a]=t,this.powerupState[a]=this.PowerupStates.IN_PROGRESS):this.powerupState[a]===this.PowerupStates.IN_PROGRESS?t-this.powerupStartTime[a]>this.PowerupTypes.properties[a].duration&&(this.powerupState[a]=this.PowerupStates.DEACTIVATE):this.powerupState[a]===this.PowerupStates.DEACTIVATE&&(this.powerupState[a]=this.PowerupStates.NULL)},t['default']=n},function(e,t,a){function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var n=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),i=a(505),s=o(i),l=a(506),d=o(l),p=function(){function e(t){r(this,e),this.game=t,this.swipe=new s['default'](this.game),this.swipe.game.input.keyboard.removeKey(Phaser.Keyboard.UP),this.swipe.game.input.keyboard.removeKey(Phaser.Keyboard.DOWN),this.swipe.game.input.keyboard.removeKey(Phaser.Keyboard.LEFT),this.swipe.game.input.keyboard.removeKey(Phaser.Keyboard.RIGHT),this.Inputs={UP:0,DOWN:1,LEFT:2,RIGHT:3,properties:{0:{id:this.swipe.DIRECTION_UP},1:{id:this.swipe.DIRECTION_DOWN},2:{id:this.swipe.DIRECTION_LEFT},3:{id:this.swipe.DIRECTION_RIGHT}}},this.INPUT_COUNT=Object.keys(this.Inputs.properties).length,this.ignoreZones=[],this.keyboardKeys=[],this.bKeyDown=[],this.inputs=[];for(var a=0;a<this.INPUT_COUNT;a++)this.inputs[a]=!1;this.bInputEnabled=!0,this.bTouchDown=!1}return n(e,[{key:'update',value:function(){return function(){this.game.input.activePointer.isDown?this._onTouchDown():this._onTouchUp();for(var e=this.swipe.check(),t=0;t<this.inputs.length;t++)null===e?this.inputs[t]=!1:e.direction===this.Inputs.properties[t].id&&(this.inputs[t]=!0)}}()},{key:'isInputDown',value:function(){return function(e){return this.inputs[e]}}()},{key:'isTouchDown',value:function(){return function(){return!!this.isInputEnabled()&&this.bTouchDown}}()},{key:'_onTouchDown',value:function(){return function(){this.isInputEnabled()&&(this.isInIgnoreZone(this.game.input)||(this.bTouchDown=!0))}}()},{key:'_onTouchUp',value:function(){return function(){this.isInputEnabled()&&(this.isInIgnoreZone(this.game.input)||(this.bTouchDown=!1))}}()},{key:'setInputEnabled',value:function(){return function(e){this.bInputEnabled=e}}()},{key:'isInputEnabled',value:function(){return function(){return this.bInputEnabled}}()},{key:'addKeyboardEventListener',value:function(){return function(e){this.keyboardKeys[e]=this.game.input.keyboard.addKey(e),this.keyboardKeys[e].onDown.add(this._onKeyboardKeyDown,this),this.keyboardKeys[e].onUp.add(this._onKeyboardKeyUp,this),this.bKeyDown[e]=!1}}()},{key:'addKeyboardKeyEvent',value:function(){return function(e,t){this.keyboardKeys[e].onDown.add(t,this)}}()},{key:'_onKeyboardKeyDown',value:function(){return function(e){this.bKeyDown[e.keyCode]=!0}}()},{key:'_onKeyboardKeyUp',value:function(){return function(e){this.bKeyDown[e.keyCode]=!1}}()},{key:'isKeyboardKeyDown',value:function(){return function(e){return this.bKeyDown[e]}}()},{key:'addIgnoreZone',value:function(){return function(e,t){this.ignoreZones.push({position:e,radius:t})}}()},{key:'isInIgnoreZone',value:function(){return function(e){for(var t=0,a;t<this.ignoreZones.length;t++)if(a=d['default'].isPointInCircle(e,this.ignoreZones[t].position,this.ignoreZones[t].radius),a)return!0;return!1}}()}]),e}();t['default']=p},function(e){/**
 * Created by flogvit on 2015-11-03.
 *
 * @copyright Cellar Labs AS, 2015, www.cellarlabs.com, all rights reserved
 * @file
 * @license MIT
 * @author Vegard Hanssen <Vegard.Hanssen@cellarlabs.com>
 *
 */function t(e,t){var a=this;a.DIRECTION_UP=1,a.DIRECTION_DOWN=2,a.DIRECTION_LEFT=4,a.DIRECTION_RIGHT=8,a.DIRECTION_UP_RIGHT=16,a.DIRECTION_UP_LEFT=32,a.DIRECTION_DOWN_RIGHT=64,a.DIRECTION_DOWN_LEFT=128,a.game=e,a.model=t===void 0?null:t,a.dragLength=100,a.diagonalDelta=50,a.swiping=!1,a.direction=null,a.tmpDirection=null,a.tmpCallback=null,a.diagonalDisabled=!1,this.game.input.onDown.add(function(){a.swiping=!0}),this.game.input.onUp.add(function(){a.swiping=!1}),this.setupKeyboard()}var a=Math.abs;t.prototype.setupKeyboard=function(){var e=this,t=this.game.input.keyboard.addKey(Phaser.Keyboard.UP);t.onDown.add(function(){if(null!==e.tmpDirection){switch(e.tmpDirection){case e.DIRECTION_LEFT:e.direction=e.DIRECTION_UP_LEFT,null!==e.model&&e.model.upLeft&&e.model.upLeft();break;case e.DIRECTION_RIGHT:e.direction=e.DIRECTION_UP_RIGHT,null!==e.model&&e.model.upRight&&e.model.upRight();break;default:e.direction=e.DIRECTION_UP,null!==e.model&&e.model.up&&e.model.up();}e.tmpDirection=null,e.tmpCallback=null}else e.tmpDirection=e.DIRECTION_UP,e.tmpCallback=null!==e.model&&e.model.up?e.model.up:null}),t.onUp.add(this.keyUp,this);var a=this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN);a.onDown.add(function(){if(null!==e.tmpDirection){switch(e.tmpDirection){case e.DIRECTION_LEFT:e.direction=e.DIRECTION_DOWN_LEFT,null!==e.model&&e.model.downLeft&&e.model.downLeft();break;case e.DIRECTION_RIGHT:e.direction=e.DIRECTION_DOWN_RIGHT,null!==e.model&&e.model.downRight&&e.model.downRight();break;default:e.direction=e.DIRECTION_DOWN,null!==e.model&&e.model.down&&e.model.down();}e.tmpDirection=null,e.tmpCallback=null}else e.tmpDirection=e.DIRECTION_DOWN,e.tmpCallback=null!==e.model&&e.model.down?e.model.down:null}),a.onUp.add(this.keyUp,this);var o=this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT);o.onDown.add(function(){if(null!==e.tmpDirection){switch(e.tmpDirection){case e.DIRECTION_UP:e.direction=e.DIRECTION_UP_LEFT,null!==e.model&&e.model.upLeft&&e.model.upLeft();break;case e.DIRECTION_DOWN:e.direction=e.DIRECTION_DOWN_LEFT,null!==e.model&&e.model.downLeft&&e.model.downLeft();break;default:e.direction=e.DIRECTION_LEFT,null!==e.model&&e.model.left&&e.model.left();}e.tmpDirection=null,e.tmpCallback=null}else e.tmpDirection=e.DIRECTION_LEFT,e.tmpCallback=null!==e.model&&e.model.left?e.model.left:null}),o.onUp.add(this.keyUp,this);var r=this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT);r.onDown.add(function(){if(null!==e.tmpDirection){switch(e.tmpDirection){case e.DIRECTION_UP:e.direction=e.DIRECTION_UP_RIGHT,null!==e.model&&e.model.upRight&&e.model.upRight();break;case e.DIRECTION_DOWN:e.direction=e.DIRECTION_DOWN_RIGHT,null!==e.model&&e.model.downRight&&e.model.downRight();break;default:e.direction=e.DIRECTION_RIGHT,null!==e.model&&e.model.right&&e.model.right();}e.tmpDirection=null,e.tmpCallback=null}else e.tmpDirection=e.DIRECTION_RIGHT,e.tmpCallback=null!==e.model&&e.model.right?e.model.right:null}),r.onUp.add(this.keyUp,this)},t.prototype.keyUp=function(){this.direction=this.tmpDirection,this.tmpDirection=null,null!==this.tmpCallback&&(this.tmpCallback.call(this.model),this.tmpCallback=null)},t.prototype.check=function(){if(null!==this.direction){var e={x:0,y:0,direction:this.direction};return this.direction=null,e}if(!this.swiping)return null;if(Phaser.Point.distance(this.game.input.activePointer.position,this.game.input.activePointer.positionDown)<this.dragLength)return null;this.swiping=!1;var t=null,o=this.game.input.activePointer.position.x-this.game.input.activePointer.positionDown.x,r=this.game.input.activePointer.position.y-this.game.input.activePointer.positionDown.y,e={x:this.game.input.activePointer.positionDown.x,y:this.game.input.activePointer.positionDown.y},n=a(o),i=a(r);return!this.diagonalDisabled&&n>this.dragLength-this.diagonalDelta&&i>this.dragLength-this.diagonalDelta?0<o&&0<r?(t=this.DIRECTION_DOWN_RIGHT,null!==this.model&&this.model.downRight&&this.model.downRight(e)):0<o&&0>r?(t=this.DIRECTION_UP_RIGHT,null!==this.model&&this.model.upRight&&this.model.upRight(e)):0>o&&0<r?(t=this.DIRECTION_DOWN_LEFT,null!==this.model&&this.model.downLeft&&this.model.downLeft(e)):0>o&&0>r&&(t=this.DIRECTION_UP_LEFT,null!==this.model&&this.model.upLeft&&this.model.upLeft(e)):(n>this.dragLength||i>this.dragLength)&&(n>i?0<o?(t=this.DIRECTION_RIGHT,null!==this.model&&this.model.right&&this.model.right(e)):0>o&&(t=this.DIRECTION_LEFT,null!==this.model&&this.model.left&&this.model.left(e)):0<r?(t=this.DIRECTION_DOWN,null!==this.model&&this.model.down&&this.model.down(e)):0>r&&(t=this.DIRECTION_UP,null!==this.model&&this.model.up&&this.model.up(e))),null===t?null:(e.direction=t,e)},'undefined'!=typeof e&&e.exports&&(e.exports=t)},function(e,t){function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}var o=Math.PI,r=Math.sqrt,n=Math.floor;Object.defineProperty(t,'__esModule',{value:!0});var i=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),s=function(){function e(){a(this,e)}return i(e,null,[{key:'lerp',value:function(){return function(e,a,o){return(1-o)*e+o*a}}()},{key:'lerp2D',value:function(){return function(e,a,o){return{x:(1-o)*e.x+o*a.x,y:(1-o)*e.y+o*a.y}}}()},{key:'getVector2Distance',value:function(){return function(e,t){return r((t.y-e.y)*(t.y-e.y)+(t.x-e.x)*(t.x-e.x))}}()},{key:'getRndIntInRange',value:function(){return function(e,t){return n(Math.random()*(t-e+1)+e)}}()},{key:'mapNumberToRange',value:function(){return function(e,t,a,o,r){return o+(r-o)/(a-t)*(e-t)}}()},{key:'clamp',value:function(){return function(e,t,a){return e<t?t:a<e?a:e}}()},{key:'clampMax',value:function(){return function(e,t){return t<e?t:e}}()},{key:'clampMin',value:function(){return function(e,t){return e<t?t:e}}()},{key:'shuffleArray',value:function(){return function(e){for(var t=e.length,a=e,o,r;0!==t;)r=n(Math.random()*t),t-=1,o=a[t],a[t]=a[r],a[r]=o;return e}}()},{key:'getBubbleSortedArray',value:function(){return function(e){for(var t=e.length,a=0;a<t;a++)for(var o=0;o<t-a-1;o++)if(e[o]>e[o+1]){var r=e[o];e[o]=e[o+1],e[o+1]=r}}}()},{key:'toDegrees',value:function(){return function(e){return e*(180/o)}}()},{key:'toRadians',value:function(){return function(e){return e*(o/180)}}()},{key:'isPointInCircle',value:function(){return function(e,t,a){var o=r((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y));return o<=a}}()},{key:'isEven',value:function(){return function(e){return 0==e%2}}()},{key:'getEuclideanDistance2D',value:function(){return function(e,t){return r((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}}()},{key:'get2dIndexVia1d',value:function(){return function(e,t){return{x:e/t,y:e%t}}}()},{key:'getFormattedTime',value:function(){return function(e){if(0>=e)return'00:00';var t=n(e/60),a=n(e-60*t);return 10>t&&(t='0'+t),10>a&&(a='0'+a),t+':'+(a+'')}}()}]),e}();t['default']=s},function(e,t,a){function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var r=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),n=a(22),s=function(e){return e&&e.__esModule?e:{default:e}}(n),i=function(){function e(t,a){o(this,e),this.game=t,this.consumables=a,this.sndClick=this.game.add.audio('click'),this.createUI()}return r(e,[{key:'createUI',value:function(){return function(){var e=this;this.layout=new s['default'].Layout(this.game,this.game.cache.getLayout('layout_game')),this.layout.setup(),this.game.world.add(this.layout),this.currentCountDown=-1,this.lblCountDown=[];for(var t=0;3>=t;t++)this.lblCountDown[t]=this.layout.getElementById('countdown_0'+(t+1+'')),this.lblCountDown[t].visible=!1;this.txtScore=this.layout.getElementById('varTextScore'),this.txtPowerups=[],this.lblPowerupActive=[],this.lblPowerupInactive=[];for(var a=0,o;a<this.consumables.CONSUMABLE_TYPE_COUNT;a++)o=this.consumables.Consumables.properties[a].uiIndex,this.txtPowerups[a]=this.layout.getElementById('varTextBooster_0'+(o+'')),this.lblPowerupActive[a]=this.layout.getElementById('booster_0'+(o+'')),this.lblPowerupInactive[a]=this.layout.getElementById('boosterInactive_0'+(o+''));var r=this.layout.getElementById('buttonSound');r.onDownSound=this.sndClick,this.game.sound.mute&&r.useState('muted'),r.onInputUp.add(function(){'default'===r.getCurrentState()?(e.game.sound.mute=!0,r.useState('muted')):(e.game.sound.mute=!1,r.useState('default'))}),this.layoutLifeBuy=new s['default'].Layout(this.game,this.game.cache.getLayout('layout_popupBuy')),this.layoutLifeBuy.setup(),this.game.world.add(this.layoutLifeBuy),this.layoutLifeBuy.visible=!1,this.txtPopupBuy=this.layoutLifeBuy.getElementById('textBuy_01'),this.txtLifeBuyCost=this.layoutLifeBuy.getElementById('varTextBuy'),this.btnLifeBuy=this.layoutLifeBuy.getElementById('buttonAccept'),this.btnLifeDismiss=this.layoutLifeBuy.getElementById('buttonDismiss')}}()},{key:'displayLifeBuyPopup',value:function(){return function(e,t,a){var o=this;this.layoutLifeBuy.visible=!0,this.txtPopupBuy.setText(e),null===t?this.txtLifeBuyCost.visible=!1:(this.txtLifeBuyCost.visible=!0,this.txtLifeBuyCost.setText(t)),this.btnLifeBuy.onInputUp.addOnce(function(){o.layoutLifeBuy.visible=!1,a(!0)},this),this.btnLifeDismiss.onInputUp.addOnce(function(){o.layoutLifeBuy.visible=!1,a(!1)},this)}}()},{key:'updateConsumablesHUD',value:function(){return function(e){for(var t=[],a=0;a<e.CONSUMABLE_TYPE_COUNT;a++)t[a]=e.getCount(a),e.isActive(a)&&t[a]++;for(var o=0;o<this.consumables.CONSUMABLE_TYPE_COUNT;o++)this.txtPowerups[o].setText(t[o]),0>=t[o]?(this.lblPowerupInactive[o].visible=!0,this.lblPowerupActive[o].visible=!1):0<t[o]&&(this.lblPowerupInactive[o].visible=!1,this.lblPowerupActive[o].visible=!0)}}()}]),e}();t['default']=i},function(e,t,a){function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var s=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=function(){function e(t,a,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(r===void 0){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,a,o)}if('value'in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(o)}return e}(),d=a(22),p=o(d),c=a(33),u=o(c),y=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:'init',value:function(){return function(){for(var e={key:'creditsState',url:'data/creditsPack.json'},a=arguments.length,o=Array(a),r=0,n;r<a;r++)o[r]=arguments[r];(n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'init',this)).call.apply(n,[this,e].concat(o))}}()},{key:'createOnce',value:function(){return function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'createOnce',this).call(this),this.sndClick=this.game.add.audio('click')}}()},{key:'create',value:function(){return function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'create',this).call(this),this.game.tracking.enabled&&GameAnalytics('addDesignEvent','Credits'),this.layout=new p['default'].Layout(this.game,this.game.cache.getLayout('layout_credits')),this.layout.setup(),this.game.world.add(this.layout);var a=this.layout.getElementById('buttonBack');a.onDownSound=this.sndClick,a.onInputUp.add(this.startMenuState,this);var o=this.layout.getElementById('buttonSound');o.onDownSound=this.sndClick,this.game.sound.mute&&o.useState('muted'),o.onInputUp.add(function(){'default'===o.getCurrentState()?(e.game.sound.mute=!0,o.useState('muted')):(e.game.sound.mute=!1,o.useState('default'))})}}()},{key:'startMenuState',value:function(){return function(){this.game.state.start('menu')}}()}]),t}(u['default']);t['default']=y},function(e,t,a){function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var s=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=function(){function e(t,a,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(r===void 0){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,a,o)}if('value'in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(o)}return e}(),d=a(22),p=o(d),c=a(33),u=o(c),y=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:'init',value:function(){return function(){for(var e={key:'instructionsState',url:'data/instructionsPack.json'},a=arguments.length,o=Array(a),r=0,n;r<a;r++)o[r]=arguments[r];(n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'init',this)).call.apply(n,[this,e].concat(o))}}()},{key:'createOnce',value:function(){return function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'createOnce',this).call(this),this.textJson=this.game.cache.getJSON('text'),this.sndClick=this.game.add.audio('click'),this.tutorialObject=this.textJson.instructions,this.tutorialStep=0}}()},{key:'create',value:function(){return function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'create',this).call(this),this.game.tracking.enabled&&GameAnalytics('addDesignEvent','Instructions'),this.layout=new p['default'].Layout(this.game,this.game.cache.getLayout('layout_tutorial')),this.layout.setup(),this.game.world.add(this.layout),this.btnNext=this.layout.getElementById('buttonNext'),this.btnNext.onInputUp.add(this.onNextStepDown,this),this.btnPrevious=this.layout.getElementById('buttonPrevious'),this.btnPrevious.onInputUp.add(this.onPreviousStepDown,this),this.btnPrevious.visible=!1;var a=this.layout.getElementById('buttonReplay');a.onInputUp.add(this.startShopState,this),this.txtTutorial=this.layout.getElementById('varTextInstructions_01');var o=this.layout.getElementById('frameTutorial');this.lblTutorial=this.game.add.image(0,0,'ui','label/tut01'),this.lblTutorial.anchor.set(.5),o.addChild(this.lblTutorial);var r=this.layout.getElementById('buttonSound');r.onDownSound=this.sndClick,this.game.sound.mute&&r.useState('muted'),r.onInputUp.add(function(){'default'===r.getCurrentState()?(e.game.sound.mute=!0,r.useState('muted')):(e.game.sound.mute=!1,r.useState('default'))}),this.updateTutorialStep(0)}}()},{key:'updateTutorialStep',value:function(){return function(e){var t=this.game.device.desktop?'desktop':'mobile';this.lblTutorial.frameName=this.tutorialObject[e].image,this.txtTutorial.setText(this.tutorialObject[e].text[t])}}()},{key:'onNextStepDown',value:function(){return function(){this.tutorialStep++,this.tutorialStep>=this.tutorialObject.length?this.tutorialStep=this.tutorialObject.length-1:this.tutorialStep===this.tutorialObject.length-1&&(this.btnNext.visible=!1),this.btnPrevious.visible=!0,this.updateTutorialStep(this.tutorialStep)}}()},{key:'onPreviousStepDown',value:function(){return function(){this.tutorialStep--,0>this.tutorialStep?this.tutorialStep=0:0===this.tutorialStep&&(this.btnPrevious.visible=!1),this.btnNext.visible=!0,this.updateTutorialStep(this.tutorialStep)}}()},{key:'startShopState',value:function(){return function(){this.game.state.start('shop')}}()}]),t}(u['default']);t['default']=y},function(e,t,a){function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var s=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=function(){function e(t,a,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(r===void 0){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,a,o)}if('value'in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(o)}return e}(),d=a(18),p=o(d),c=a(22),u=o(c),y=a(33),g=o(y),m=a(70),f=o(m),h=a(511),b=o(h),v=a(98),_=o(v),x=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:'init',value:function(){return function(){for(var e={key:'shopState',url:'data/shopPack.json'},a=arguments.length,o=Array(a),r=0,n;r<a;r++)o[r]=arguments[r];(n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'init',this)).call.apply(n,[this,e].concat(o))}}()},{key:'createOnce',value:function(){return function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'createOnce',this).call(this),this.Tabs={DRIVERS:0,VEHICLES:1,POWERUPS:2},this.TABS_COUNT=Object.keys(this.Tabs).length,this.SCALE_SELECTED=1.1,this.shopJson=this.game.cache.getJSON('shop'),this.config=this.game.cache.getJSON('config'),this.textJson=this.game.cache.getJSON('text'),this.storage=new p['default'].Storage(this.config.storageKey),this.sndClick=this.game.add.audio('click'),this.sndClick.allowMultiple=!0,this.driverIndex=0,this.driverSkinIndex=0,this.vehicleIndex=0,this.vehicleSkinIndex=0,this.ownedDriverIndex=0,this.ownedDriverSkinIndex=0,this.ownedVehicleIndex=0,this.ownedVehicleSkinIndex=0,this.playerCurrency=0,this.grpTabs=[],this.grpLock=[],this.btnTabs=[],this.txtTitle=[],this.txtDescription=[],this.btnLock=[],this.lblCoin=[],this.txtPrice=[],this.lblIcon=[],this.btnDriverSkin=[],this.lblDriverSkinSelect=[],this.grpVehicleSkin=[],this.btnVehicleSkin=[],this.lblVehicleSkinSelect=[]}}()},{key:'create',value:function(){return function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'create',this).call(this),this.game.tracking.enabled&&GameAnalytics('addDesignEvent','Shop'),this.shopObj=new _['default'](this.game),this.consumables=new f['default'](this.game),this.layout=new u['default'].Layout(this.game,this.game.cache.getLayout('layout_shop')),this.layout.setup(),this.game.world.add(this.layout);var a=this.layout.getElementById('buttonPlay');a.onDownSoun=this.sndClick,a.onInputUp.add(this.startGameState,this);var o=this.layout.getElementById('buttonBack');o.onDownSoun=this.sndClick,o.onInputUp.add(this.startMenuState,this);var r=this.layout.getElementById('buttonSound');r.onDownSound=this.sndClick,this.game.sound.mute&&r.useState('muted'),r.onInputUp.add(function(){'default'===r.getCurrentState()?(e.game.sound.mute=!0,r.useState('muted')):(e.game.sound.mute=!1,r.useState('default'))}),this.txtCurrentCurrency=this.layout.getElementById('varTextScore');for(var n=0;n<this.TABS_COUNT;n++)this.grpTabs[n]=this.layout.getElementById('groupShop_0'+(n+1+'')),this.grpTabs[n].visible=!1;for(var i=[],s=[],d=function(){function t(t){e.grpLock[t]=e.layout.getElementById('groupLocked_0'+(t+1+'')),e.txtTitle[t]=e.layout.getElementById('varTextTitle_0'+(t+1+'')),e.txtDescription[t]=e.layout.getElementById('varTextDescription_0'+(t+1+'')),e.lblCoin[t]=e.layout.getElementById('labelCoin_0'+(t+1+'')),e.txtPrice[t]=e.layout.getElementById('textPrice_0'+(t+1+'')),e.btnLock[t]=e.layout.getElementById('labelLock_0'+(t+1+'')),e.btnLock[t].inputEnabled=!0,i[t]=e.layout.getElementById('buttonRight_0'+(t+1+'')),i[t].onDownSound=e.sndClick,i[t].onInputUp.add(function(){e.onNextButtonDown(t)},e),s[t]=e.layout.getElementById('buttonLeft_0'+(t+1+'')),s[t].onDownSound=e.sndClick,s[t].onInputUp.add(function(){e.onPreviousButtonDown(t)},e)}return t}(),p=0;p<this.TABS_COUNT-1;p++)d(p);this.txtDescription[this.Tabs.VEHICLES]=this.layout.getElementById('varTextLocked_02'),this.lblIcon[this.Tabs.DRIVERS]=this.layout.getElementById('char_01_skin_01'),this.lblIcon[this.Tabs.DRIVERS].loadTexture('ui'),this.lblIcon[this.Tabs.VEHICLES]=this.layout.getElementById('board_01_skin_01'),this.lblIcon[this.Tabs.VEHICLES].loadTexture('ui'),this.btnTabs[this.Tabs.DRIVERS]=this.layout.getElementById('buttonRacer'),this.btnTabs[this.Tabs.DRIVERS].onDownSound=this.sndClick,this.btnTabs[this.Tabs.DRIVERS].onInputUp.add(this.onDriversButtonDown,this),this.btnTabs[this.Tabs.VEHICLES]=this.layout.getElementById('buttonBoards'),this.btnTabs[this.Tabs.VEHICLES].onDownSound=this.sndClick,this.btnTabs[this.Tabs.VEHICLES].onInputUp.add(this.onVehiclesButtonDown,this),this.btnTabs[this.Tabs.POWERUPS]=this.layout.getElementById('buttonBoosts'),this.btnTabs[this.Tabs.POWERUPS].onDownSound=this.sndClick,this.btnTabs[this.Tabs.POWERUPS].onInputUp.add(this.onPowerupsButtonDown,this),this.btnLock[this.Tabs.DRIVERS].events.onInputUp.add(this.onDriverBuyButtonDown,this),this.btnLock[this.Tabs.VEHICLES].events.onInputUp.add(this.onVehicleBuyButtonDown,this);for(var y=0;3>y;y++)this.btnDriverSkin[y]=this.layout.getElementById('buttonColorCharacter_0'+(y+1+'')),this.btnDriverSkin[y].loadTexture('ui'),this.btnDriverSkin[y].index=y,this.btnDriverSkin[y].inputEnabled=!0,this.btnDriverSkin[y].events.onInputUp.add(function(t){e.driverSkinIndex=t.index,e.updateDriverTab()},this),this.lblDriverSkinSelect[y]=this.layout.getElementById('labelSelectCharacter_0'+(y+1+'')),this.lblDriverSkinSelect[y].visible=!1;for(var g=0;2>g;g++){this.grpVehicleSkin[g]=this.layout.getElementById('groupColor_0'+(g+2+'')),this.btnVehicleSkin[g]=[],this.lblVehicleSkinSelect[g]=[];for(var m=0;m<this.shopObj.getVehicleSkinCount(g);m++)this.btnVehicleSkin[g][m]=this.layout.getElementById('buttonColor_0'+(g+2+'_0')+(m+1+'')),this.btnVehicleSkin[g][m].loadTexture('ui'),this.btnVehicleSkin[g][m].index=m,this.btnVehicleSkin[g][m].inputEnabled=!0,this.btnVehicleSkin[g][m].events.onInputUp.add(function(t){e.vehicleSkinIndex=t.index,e.updateVehicleTab()},this),this.lblVehicleSkinSelect[g][m]=this.layout.getElementById('labelSelect_0'+(g+2+'_0')+(m+1+''))}var h=[],b=[],v=[],x=[];this.txtPowerupsCount=[];for(var S=this.consumables.Consumables,c=0,T;c<this.consumables.CONSUMABLE_TYPE_COUNT;c++)T=S.properties[c].shopIndex,b[T]=this.layout.getElementById('varTextBuy_0'+(T+1+'')),b[T].setText(this.consumables.getPrice(c)),x[T]=this.layout.getElementById('varTextBoosterTitle_0'+(T+1+'')),v[T]=this.layout.getElementById('varTextBoosterDescription_0'+(T+1+'')),this.txtPowerupsCount[T]=this.layout.getElementById('varTextAmount_0'+(T+1+'')),this.txtPowerupsCount[T].setText(this.consumables.getCount(c)),h[T]=this.layout.getElementById('buttonBuy_0'+(T+1+''));x[S.properties[S.LIFE].shopIndex].setText(this.textJson.boosters.title.life),x[S.properties[S.MAGNET].shopIndex].setText(this.textJson.boosters.title.magnet),x[S.properties[S.CURRENCY].shopIndex].setText(this.textJson.boosters.title.coins),v[S.properties[S.LIFE].shopIndex].setText(this.textJson.boosters.description.life),v[S.properties[S.MAGNET].shopIndex].setText(this.textJson.boosters.description.magnet),v[S.properties[S.CURRENCY].shopIndex].setText(this.textJson.boosters.description.coins),h[S.properties[S.LIFE].shopIndex].onDownSound=this.sndClick,h[S.properties[S.LIFE].shopIndex].onInputUp.add(function(){e.onPowerupBuyButtonDown(S.LIFE)},this),h[S.properties[S.MAGNET].shopIndex].onDownSound=this.sndClick,h[S.properties[S.MAGNET].shopIndex].onInputUp.add(function(){e.onPowerupBuyButtonDown(S.MAGNET)},this),h[S.properties[S.CURRENCY].shopIndex].onDownSound=this.sndClick,h[S.properties[S.CURRENCY].shopIndex].onInputUp.add(function(){e.onPowerupBuyButtonDown(S.CURRENCY)},this),this.createPopupLayouts(),this.updateCurrencyAmountLocal(),this.displayTab(this.Tabs.DRIVERS)}}()},{key:'createPopupLayouts',value:function(){return function(){var e=this;this.layoutInfoPopup=new u['default'].Layout(this.game,this.game.cache.getLayout('layout_popupInfo')),this.layoutInfoPopup.setup(),this.game.world.add(this.layoutInfoPopup),this.layoutInfoPopup.visible=!1;var t=b['default'].createBackgroundOverlay(this.game,16777215,!0);this.layoutInfoPopup.add(t),this.layoutInfoPopup.sendToBack(t),this.txtInfoPopup=this.layoutInfoPopup.getElementById('textUnlock_01'),this.txtValueInfoPopup=this.layoutInfoPopup.getElementById('varTextUnlock'),this.txtValueInfoPopup.visible=!1,this.layoutInfoPopup.getElementById('textUnlock_02').visible=!1,this.btnInfoPopup=this.layoutInfoPopup.getElementById('buttonAccept'),this.btnInfoPopup.onDownSound=this.sndClick,this.btnInfoPopup.onInputUp.add(function(){e.layoutInfoPopup.visible=!1},this),this.layoutBuyPopup=new u['default'].Layout(this.game,this.game.cache.getLayout('layout_popupBuy')),this.layoutBuyPopup.setup(),this.game.world.add(this.layoutBuyPopup),this.layoutBuyPopup.visible=!1;var a=b['default'].createBackgroundOverlay(this.game,16777215,!0);this.layoutBuyPopup.add(a),this.layoutBuyPopup.sendToBack(a),this.txtBuyPopup=this.layoutBuyPopup.getElementById('textBuy_01');var o=this.layoutBuyPopup.getElementById('varTextBuy');o.visible=!1,this.btnBuyPopupAccept=this.layoutBuyPopup.getElementById('buttonAccept'),this.btnBuyPopupAccept.onDownSound=this.sndClick,this.btnBuyPopupAccept.onInputUp.add(function(){e.layoutBuyPopup.visible=!1},this),this.btnBuyPopupDismiss=this.layoutBuyPopup.getElementById('buttonDismiss'),this.btnBuyPopupDismiss.onDownSound=this.sndClick,this.btnBuyPopupDismiss.onInputUp.add(function(){e.layoutBuyPopup.visible=!1},this)}}()},{key:'onDriversButtonDown',value:function(){return function(){this.displayTab(this.Tabs.DRIVERS)}}()},{key:'onVehiclesButtonDown',value:function(){return function(){this.displayTab(this.Tabs.VEHICLES)}}()},{key:'onPowerupsButtonDown',value:function(){return function(){this.displayTab(this.Tabs.POWERUPS)}}()},{key:'onNextButtonDown',value:function(){return function(e){e===this.Tabs.DRIVERS?(this.driverIndex++,this.driverIndex>=this.shopObj.DRIVER_COUNT?this.driverIndex=this.shopObj.DRIVER_COUNT-1:this.driverSkinIndex=0,this.updateDriverTab()):e===this.Tabs.VEHICLES&&(this.vehicleIndex++,this.vehicleIndex>=this.shopObj.VEHICLE_COUNT?this.vehicleIndex=this.shopObj.VEHICLE_COUNT-1:this.vehicleSkinIndex=0,this.updateVehicleTab())}}()},{key:'onPreviousButtonDown',value:function(){return function(e){e===this.Tabs.DRIVERS?(this.driverIndex--,0>this.driverIndex?this.driverIndex=0:this.driverSkinIndex=0,this.updateDriverTab()):e===this.Tabs.VEHICLES&&(this.vehicleIndex--,0>this.vehicleIndex?this.vehicleIndex=0:this.vehicleSkinIndex=0,this.updateVehicleTab())}}()},{key:'updateDriverTab',value:function(){return function(){var e=this.shopObj.getDriverPrice(this.driverIndex,this.driverSkinIndex);this.lblIcon[this.Tabs.DRIVERS].frameName=this.shopObj.getDriverUiKey(this.driverIndex,this.driverSkinIndex),this.txtTitle[this.Tabs.DRIVERS].setText(this.shopObj.getDriverSkinName(this.driverIndex,this.driverSkinIndex)),this.txtDescription[this.Tabs.DRIVERS].setText(this.shopObj.getDriverSkinDescription(this.driverIndex,this.driverSkinIndex));for(var t=0;t<this.shopObj.getDriverSkinCount(this.driverIndex);t++)this.btnDriverSkin[t].frameName=this.shopObj.getDriverSkinIconKey(this.driverIndex,t),this.driverSkinIndex===t?(this.lblDriverSkinSelect[t].visible=!0,this.btnDriverSkin[t].scale.set(this.SCALE_SELECTED)):(this.lblDriverSkinSelect[t].visible=!1,this.btnDriverSkin[t].scale.set(1));this.shopObj.isDriverOwned(this.driverIndex,this.driverSkinIndex)?(this.lblIcon[this.Tabs.DRIVERS].alpha=1,this.grpLock[this.Tabs.DRIVERS].visible=!1,this.ownedDriverIndex=this.driverIndex,this.ownedDriverSkinIndex=this.driverSkinIndex):this.shopObj.isDriverSkinPurchasable(this.driverIndex,this.driverSkinIndex)?!this.shopObj.isDriverOwned(this.driverIndex,this.driverSkinIndex)&&(this.lblIcon[this.Tabs.DRIVERS].alpha=.5,this.grpLock[this.Tabs.DRIVERS].visible=!0,this.lblCoin[this.Tabs.DRIVERS].visible=!0,this.txtPrice[this.Tabs.DRIVERS].setText(e)):(this.lblIcon[this.Tabs.DRIVERS].alpha=.5,this.grpLock[this.Tabs.DRIVERS].visible=!0,this.lblCoin[this.Tabs.DRIVERS].visible=!1,this.txtPrice[this.Tabs.DRIVERS].setText(e+'m'))}}()},{key:'updateVehicleTab',value:function(){return function(){var e=this.shopObj.getVehiclePrice(this.vehicleIndex,this.vehicleSkinIndex);this.lblIcon[this.Tabs.VEHICLES].frameName=this.shopObj.getVehicleUiKey(this.vehicleIndex,this.vehicleSkinIndex),this.txtTitle[this.Tabs.VEHICLES].setText(this.shopObj.getVehicleSkinName(this.vehicleIndex,this.vehicleSkinIndex)),this.txtDescription[this.Tabs.VEHICLES].setText(this.shopObj.getVehicleSkinDescription(this.vehicleIndex,this.vehicleSkinIndex));for(var t=0;t<this.grpVehicleSkin.length;t++)this.grpVehicleSkin[t].visible=!1;var a=this.shopObj.getVehicleSkinCount(this.vehicleIndex),o=0;a===this.btnVehicleSkin[0].length?(this.grpVehicleSkin[0].visible=!0,o=0):a===this.btnVehicleSkin[1].length&&(this.grpVehicleSkin[1].visible=!0,o=1);for(var r=0;r<a;r++)this.btnVehicleSkin[o][r].frameName=this.shopObj.getVehicleSkinIconKey(this.vehicleIndex,r),this.vehicleSkinIndex===r?(this.lblVehicleSkinSelect[o][r].visible=!0,this.btnVehicleSkin[o][r].scale.set(this.SCALE_SELECTED)):(this.lblVehicleSkinSelect[o][r].visible=!1,this.btnVehicleSkin[o][r].scale.set(1));this.shopObj.isVehicleOwned(this.vehicleIndex,this.vehicleSkinIndex)?(this.lblIcon[this.Tabs.VEHICLES].alpha=1,this.grpLock[this.Tabs.VEHICLES].visible=!1,this.ownedVehicleIndex=this.vehicleIndex,this.ownedVehicleSkinIndex=this.vehicleSkinIndex):this.shopObj.isVehicleSkinPurchasable(this.vehicleIndex,this.vehicleSkinIndex)?!this.shopObj.isVehicleOwned(this.vehicleIndex,this.vehicleSkinIndex)&&(this.lblIcon[this.Tabs.VEHICLES].alpha=.5,this.grpLock[this.Tabs.VEHICLES].visible=!0,this.lblCoin[this.Tabs.VEHICLES].visible=!0,this.txtPrice[this.Tabs.VEHICLES].setText(e)):(this.lblIcon[this.Tabs.VEHICLES].alpha=.5,this.grpLock[this.Tabs.VEHICLES].visible=!0,this.lblCoin[this.Tabs.VEHICLES].visible=!1,this.txtPrice[this.Tabs.VEHICLES].setText(e+'m'))}}()},{key:'onDriverBuyButtonDown',value:function(){return function(){var e=this;if(!this.shopObj.isDriverSkinPurchasable(this.driverIndex,this.driverSkinIndex)){var t=this.textJson.unlockOnly+this.shopObj.getDriverPrice(this.driverIndex,this.driverSkinIndex)+this.textJson.scoreUnit;this.displayInfoPopup(t,null)}else if(!this.shopObj.isDriverAffordable(this.driverIndex,this.driverSkinIndex,this.playerCurrency)){var a=this.textJson.insufficientCoins+this.shopObj.getDriverPrice(this.driverIndex,this.driverSkinIndex)+this.textJson.currencyUnit;this.displayInfoPopup(a,null)}else{var o=this.textJson.buyConfirm+this.shopObj.getDriverPrice(this.driverIndex,this.driverSkinIndex)+this.textJson.currencyUnit;this.displayBuyPopup(o,function(){e.game.tracking.enabled&&(GameAnalytics('addDesignEvent','Shop:PlayerPurchased:\n\t\t\t\t\t\t\t'+(e.shopObj.getDriverSkinName(e.driverIndex,e.driverSkinIndex)+'')),GameAnalytics('addDesignEvent','CurrencySpent',e.shopObj.getDriverPrice(e.driverIndex,e.driverSkinIndex))),e.shopObj.buyDriverSkin(e.driverIndex,e.driverSkinIndex,e.playerCurrency),e.updateCurrencyAmountLocal(),e.updateDriverTab(),e.ownedDriverIndex=e.driverIndex,e.ownedDriverSkinIndex=e.driverSkinIndex})}}}()},{key:'onVehicleBuyButtonDown',value:function(){return function(){var e=this;if(!this.shopObj.isVehicleSkinPurchasable(this.vehicleIndex,this.vehicleSkinIndex)){var t=this.textJson.unlockOnly+this.shopObj.getVehiclePrice(this.vehicleIndex,this.vehicleSkinIndex)+this.textJson.scoreUnit;this.displayInfoPopup(t,null)}else if(!this.shopObj.isVehicleAffordable(this.vehicleIndex,this.vehicleSkinIndex,this.playerCurrency)){var a=this.textJson.insufficientCoins+this.shopObj.getVehiclePrice(this.vehicleIndex,this.vehicleSkinIndex)+this.textJson.currencyUnit;this.displayInfoPopup(a,null)}else{var o=this.textJson.buyConfirm+this.shopObj.getVehiclePrice(this.vehicleIndex,this.vehicleSkinIndex)+this.textJson.currencyUnit;this.displayBuyPopup(o,function(){e.game.tracking.enabled&&(GameAnalytics('addDesignEvent','Shop:BoardPurchased:'+(e.shopObj.getVehicleName(e.vehicleIndex,e.vehicleSkinIndex)+'')),GameAnalytics('addDesignEvent','CurrencySpent',e.shopObj.getVehiclePrice(e.vehicleIndex,e.vehicleSkinIndex))),e.shopObj.buyVehicleSkin(e.vehicleIndex,e.vehicleSkinIndex,e.playerCurrency),e.updateCurrencyAmountLocal(),e.updateVehicleTab(),e.ownedVehicleIndex=e.vehicleIndex,e.ownedVehicleSkinIndex=e.vehicleSkinIndex})}}}()},{key:'onPowerupBuyButtonDown',value:function(){return function(e){var t=this;this.consumables.isAffordable(e,this.playerCurrency)?this.displayBuyPopup(this.textJson.buyConfirm+this.consumables.getPrice(e)+this.textJson.currencyUnit,function(){t.game.tracking.enabled&&(GameAnalytics('addDesignEvent','Shop:ConsumablePurchased:'+(t.consumables.getName(e)+'')),GameAnalytics('addDesignEvent','CurrencySpent',t.consumables.getPrice(e))),t.consumables.buy(e,t.playerCurrency),t.updateCurrencyAmountLocal();var a=t.consumables.Consumables;t.txtPowerupsCount[a.properties[e].shopIndex].setText(t.consumables.getCount(e))}):this.displayInfoPopup(this.textJson.insufficientCoins+this.consumables.getPrice(e)+this.textJson.currencyUnit,null)}}()},{key:'displayInfoPopup',value:function(){return function(e,t){this.layoutInfoPopup.visible=!0,this.txtInfoPopup.setText(e),null!==t&&this.btnInfoPopup.onInputUp.addOnce(t,this)}}()},{key:'displayBuyPopup',value:function(){return function(e,t){this.layoutBuyPopup.visible=!0,this.txtBuyPopup.setText(e),null!==t&&this.btnBuyPopupAccept.onInputUp.addOnce(function(){t(!0)},this)}}()},{key:'displayTab',value:function(){return function(e){for(var t=0;t<this.TABS_COUNT;t++)this.grpTabs[t].visible=!1,this.btnTabs[t].useState('default');this.grpTabs[e].visible=!0,this.btnTabs[e].useState('active'),e===this.Tabs.DRIVERS?this.updateDriverTab():e===this.Tabs.VEHICLES&&this.updateVehicleTab()}}()},{key:'updateCurrencyAmountLocal',value:function(){return function(){this.playerCurrency=this.storage.getItem('currency',0),this.txtCurrentCurrency.setText(this.playerCurrency)}}()},{key:'startGameState',value:function(){return function(){this.game.tracking.enabled&&(GameAnalytics('addDesignEvent','PlayerSelected:'+(this.shopObj.getDriverSkinName(this.ownedDriverIndex,this.ownedDriverSkinIndex)+'')),GameAnalytics('addDesignEvent','BoardSelected:'+(this.shopObj.getVehicleSkinName(this.ownedVehicleIndex,this.ownedVehicleSkinIndex)+''))),this.game.state.start('game',!0,!1,this.ownedDriverIndex,this.ownedDriverSkinIndex,this.ownedVehicleIndex,this.ownedVehicleSkinIndex)}}()},{key:'startMenuState',value:function(){return function(){this.game.state.start('menu')}}()}]),t}(g['default']);t['default']=x},function(e,t){function a(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(t,'__esModule',{value:!0});var o=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),r=function(){function e(){a(this,e)}return o(e,null,[{key:'getRandomExistsFromGroup',value:function(){return function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],a=e.getAll('exists',t,0,e.children.length);return a[this.getRndIntInRange(0,a.length-1)]}}()},{key:'getFirstExists',value:function(){return function(e,t){for(var a=0;a<e.length;a++)if(e[a].exists===t)return e[a];return null}}()},{key:'createBackgroundOverlay',value:function(){return function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=arguments[2],o=e.add.graphics(0,0);return o.name='overlay_'+(Date.now()+''),o.beginFill(t),o.drawRect(0,0,e.width,e.height),o.endFill(),o.alpha=.5,o.inputEnabled=a,o}}()},{key:'getRndIntInRange',value:function(){return function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}}()},{key:'addIntroTweenShui',value:function(){return function(e,t,a,o,r){return t.defaultPosition=t.shui.position.clone(),a?o?t.shui.position.y-=3*t.height:t.shui.position.y+=3*t.height:!a&&(o?t.shui.position.x-=3*t.width:t.shui.position.x+=3*t.width),e.add.tween(t.shui.position).to({x:t.defaultPosition.x,y:t.defaultPosition.y},r,Phaser.Easing.Back.Out,!0,0,0,!1)}}()},{key:'addIntroTween',value:function(){return function(e,t,a,o,r){return t.defaultPosition=t.position.clone(),a?o?t.position.y-=3*t.height:t.position.y+=3*t.height:!a&&(o?t.position.x-=3*t.width:t.position.x+=3*t.width),e.add.tween(t.position).to({x:t.defaultPosition.x,y:t.defaultPosition.y},r,Phaser.Easing.Back.Out,!0,0,0,!1)}}()}]),e}();t['default']=r},function(e,t,a){function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var s=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=function(){function e(t,a,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(r===void 0){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,a,o)}if('value'in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(o)}return e}(),d=a(18),p=o(d),c=a(22),u=o(c),y=a(33),g=o(y),m=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:'init',value:function(){return function(){for(var e={key:'highscoreState',url:'data/highscorePack.json'},a=arguments.length,o=Array(a),r=0,n;r<a;r++)o[r]=arguments[r];(n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'init',this)).call.apply(n,[this,e].concat(o))}}()},{key:'createOnce',value:function(){return function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'createOnce',this).call(this),this.config=this.game.cache.getJSON('config'),this.storage=new p['default'].Storage(this.config.storageKey),this.sndClick=this.game.add.audio('click'),this.grpScores=[],this.txtNames=[],this.txtScores=[]}}()},{key:'create',value:function(){return function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'create',this).call(this),this.game.tracking.enabled&&GameAnalytics('addDesignEvent','Highscore'),this.playerName=this.storage.getItem('playerName',!1),!1!==this.playerName&&(this.playerName=this.playerName.slice(0,-3)),this.playerScore=this.storage.getItem('playerScore',0),this.layout=new u['default'].Layout(this.game,this.game.cache.getLayout('layout_highscore')),this.layout.setup(),this.game.world.add(this.layout),this.lblLoading=this.layout.getElementById('labelLoading'),this.loadTween=this.game.add.tween(this.lblLoading).to({angle:-360},1e3,Phaser.Easing.Linear.None,!0,0,Number.MAX_SAFE_INTEGER,!1),this.loadTween.onLoop.add(function(){e.lblLoading.angle=0},this);var a=this.layout.getElementById('buttonBack');a.onDownSound=this.sndClick,a.onInputUp.add(this.startMenuState,this);for(var o=0,r;10>o;o++)r=10>o+1?'varTextName_0':'varTextName_',this.txtNames[o]=this.layout.getElementById(''+r+(o+1+'')),r=10>o+1?'varTextScore_0':'varTextScore_',this.txtScores[o]=this.layout.getElementById(''+r+(o+1+'')),r=10>o+1?'groupScore_0':'groupScore_',this.grpScores[o]=this.layout.getElementById(''+r+(o+1+'')),this.grpScores[o].visible=!1;this.grpPlayer=this.layout.getElementById('groupScore_11'),this.grpPlayer.visible=!1,this.txtPlayerName=this.layout.getElementById('varTextName_11'),this.txtPlayerScore=this.layout.getElementById('varTextScore_11'),this.txtPlayerPosition=this.layout.getElementById('varTextPosition_11');var n=this.layout.getElementById('buttonAudio');n.onDownSound=this.sndClick,this.game.sound.mute&&n.useState('muted'),n.onInputUp.add(function(){'default'===n.getCurrentState()?(e.game.sound.mute=!0,n.useState('muted')):(e.game.sound.mute=!1,n.useState('default'))}),this.displayScores()}}()},{key:'displayScores',value:function(){return function(){var e=this;PlayFab.settings.titleId=this.game.playFab.titleId;var t={TitleId:PlayFab.settings.titleId,CustomId:'anonymous',CreateAccount:!0};PlayFab.ClientApi.LoginWithCustomID(t,function(){PlayFab.ClientApi.GetLeaderboard({StatisticName:'highscore',StartPosition:0,MaxResultsCount:100},function(t){var a=!1;t=t.data.Leaderboard,e.lblLoading.visible=!1,e.loadTween.stop();for(var o=0;o<t.length;o++){var r=t[o].DisplayName.slice(0,-3),n=t[o].StatValue,i=t[o].Position;10>o&&(e.grpScores[o].visible=!0,e.txtNames[o].setText(r),e.txtScores[o].setText(n)),r===e.playerName&&(a=!0,e.grpPlayer.visible=!0,e.txtPlayerName.setText(e.playerName),e.txtPlayerScore.setText(n),e.txtPlayerPosition.setText(i))}!a&&e.playerName&&(e.grpPlayer.visible=!0,e.txtPlayerScore.setText(e.playerScore),e.txtPlayerName.setText(e.playerName))})})}}()},{key:'startMenuState',value:function(){return function(){this.game.state.start('menu')}}()}]),t}(g['default']);t['default']=m},function(e,t,a){function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var s=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=function(){function e(t,a,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(r===void 0){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,a,o)}if('value'in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(o)}return e}(),d=a(18),p=o(d),c=a(22),u=o(c),y=a(33),g=o(y),m=a(98),f=o(m),h=a(200),b=o(h),v=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:'init',value:function(){return function(e,a,o,r,n){for(var i={key:'gameOverState',url:'data/gameOverPack.json'},s=arguments.length,d=Array(5<s?s-5:0),p=5,c;p<s;p++)d[p-5]=arguments[p];(c=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'init',this)).call.apply(c,[this,i].concat(d)),this.score=e,this.driver=a,this.collectedCurrency=o,this.currencyCounts=r,this.distance=n}}()},{key:'createOnce',value:function(){return function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'createOnce',this).call(this),this.config=this.game.cache.getJSON('config'),this.textJson=this.game.cache.getJSON('text'),this.storage=new p['default'].Storage(this.config.storageKey),this.shop=new f['default'](this.game),this.collectables=new b['default'](this.game)}}()},{key:'create',value:function(){return function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'create',this).call(this),this.game.tracking.enabled&&GameAnalytics('addDesignEvent','GameOver'),this.playerName=this.storage.getItem('playerName',null),this.playerScore=this.storage.getItem('playerScore',0),this.totalCurrency=this.storage.getItem('currency',0),this.totalCurrency+=this.collectedCurrency,this.storage.setItem('currency',this.totalCurrency),this.createUI(),this.unlockPopups=[];for(var e=this.shop.unlockDriverSkin(this.score),a=0,o;a<e.length;a++)o=e[a],this.unlockPopups.push(this.createUnlockedPopup(this.shop.getDriverUiKey(o.driver,o.skin),this.distance,this.shop.getDriverSkinName(o.driver,o.skin))),this.game.tracking.enabled&&GameAnalytics('addDesignEvent','Shop:PlayerUnlocked:'+(this.shop.getDriverSkinName(o.driver,o.skin)+''));for(var r=this.shop.unlockVehicleSkin(this.score),n=0,i;n<r.length;n++)i=r[n],this.unlockPopups.push(this.createUnlockedPopup(this.shop.getVehicleUiKey(i.vehicle,i.skin),this.distance,this.shop.getVehicleSkinName(i.vehicle,i.skin))),this.game.tracking.enabled&&GameAnalytics('addDesignEvent','Shop:BoardUnlocked:'+(this.shop.getVehicleSkinName(i.vehicle,i.skin)+''));0<this.unlockPopups.length&&this.setLayoutVisible(!1),this.playerScore<this.score&&(this.playerScore=this.score,this.storage.setItem('playerScore',this.playerScore),null!==this.playerName&&this.uploadScore())}}()},{key:'createUI',value:function(){return function(){var e=this;this.layout=new u['default'].Layout(this.game,this.game.cache.getLayout('layout_gameOver')),this.layout.setup(),this.game.world.add(this.layout);var t=this.layout.getElementById('varTextCurrencyTotal');t.setText(this.collectedCurrency);var a=this.layout.getElementById('varTextScore_copy_1');a.setText(this.distance);for(var o=[],r=0;r<this.collectables.CURRENCY_TYPE_COUNT;r++)o[r]=this.layout.getElementById('varTextCurrency_0'+(r+1+'')),o[r].setText(this.currencyCounts[r]+' x '+(this.collectables.getCurrencyValue(r)+''));var n=this.layout.getElementById('varTextScore');n.setText(this.score);var i=this.layout.getElementById('frameEnd'),s=this.game.add.image(-180,50,'ui',this.shop.getDriverUiKey(this.driver.driver,this.driver.skin));s.anchor.set(.5),i.addChild(s),this.btnPlay=this.layout.getElementById('buttonReplay'),this.btnPlay.onInputUp.add(this.startShopState,this),this.btnTutorial=this.layout.getElementById('buttonTutorial'),this.btnTutorial.onInputUp.add(this.startTutorialState,this),this.btnHighscore=this.layout.getElementById('buttonHighscore'),this.btnHighscore.onInputUp.add(this.startHighscoreState,this);var l=this.layout.getElementById('buttonSound');l.onDownSound=this.sndClick,this.game.sound.mute&&l.useState('muted'),l.onInputUp.add(function(){'default'===l.getCurrentState()?(e.game.sound.mute=!0,l.useState('muted')):(e.game.sound.mute=!1,l.useState('default'))})}}()},{key:'setLayoutVisible',value:function(){return function(e){this.btnHighscore.visible=e,this.btnTutorial.visible=e,this.btnPlay.visible=e}}()},{key:'createUnlockedPopup',value:function(){return function(e,t,a){var o=this,r=new u['default'].Layout(this.game,this.game.cache.getLayout('layout_unlock'));r.setup(),this.game.world.add(r);var n=r.getElementById('frameUnlock'),i=this.game.add.image(-180,50,'ui',e);i.anchor.set(.5),n.addChild(i);var s=r.getElementById('varTextUnlock_01');s.setText(t+this.textJson.scoreUnit);var l=r.getElementById('varTextUnlock_02');l.setText(a);var d=r.getElementById('buttonConfirm');return d.onInputUp.add(function(){r.visible=!1;for(var e=0;e<o.unlockPopups.length;e++)if(o.unlockPopups[e].visible)return;o.setLayoutVisible(!0)},this),r}}()},{key:'uploadScore',value:function(){return function(){var e=this;PlayFab.settings.titleId=this.game.playFab.titleId;var t={TitleId:PlayFab.settings.titleId,CustomId:this.playerName,CreateAccount:!0};PlayFab.ClientApi.LoginWithCustomID(t,function(t,a){null===t?null!==a:PlayFab.ClientApi.UpdateUserTitleDisplayName({DisplayName:e.playerName},function(){PlayFab.ClientApi.UpdatePlayerStatistics({PlayFabID:t.data.PlayFabId,Statistics:[{StatisticName:'highscore',Value:e.score}]},function(){})})})}}()},{key:'startShopState',value:function(){return function(){this.game.state.start('shop')}}()},{key:'startTutorialState',value:function(){return function(){this.game.state.start('instructions')}}()},{key:'startHighscoreState',value:function(){return function(){this.game.state.start('highscore')}}()}]),t}(g['default']);t['default']=v},function(e,t,a){function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,'__esModule',{value:!0});var s=function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),l=function(){function e(t,a,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(r===void 0){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,a,o)}if('value'in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(o)}return e}(),d=a(18),p=o(d),c=a(22),u=o(c),y=a(33),g=o(y),m=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:'init',value:function(){return function(e,a,o,r,n){for(var i={key:'nameInputState',url:'data/nameInputPack.json'},s=arguments.length,d=Array(5<s?s-5:0),p=5,c;p<s;p++)d[p-5]=arguments[p];(c=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'init',this)).call.apply(c,[this,i].concat(d)),this.score=e,this.driver=a,this.collectedCurrency=o,this.currencyCounts=r,this.distance=n}}()},{key:'createOnce',value:function(){return function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'createOnce',this).call(this),this.POLL_TIME=.2,this.config=this.game.cache.getJSON('config'),this.storage=new p['default'].Storage(this.config.storageKey),this.sndClick=this.game.add.audio('click')}}()},{key:'create',value:function(){return function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'create',this).call(this),this.game.tracking.enabled&&GameAnalytics('addDesignEvent','NameInput'),this.submitting=!1,this.tempName='',this.pollTime=this.POLL_TIME,this.playerName=this.storage.getItem('playerName',null),this.layout=new u['default'].Layout(this.game,this.game.cache.getLayout('layout_nameInput')),this.layout.setup(),this.game.world.add(this.layout);var a=this.layout.getElementById('buttonAccept');a.onDownSound=this.sndClick,a.onInputUp.add(this.onContinueButtonDown,this),this.input=this.layout.getElementById('inputName'),this.inputText=this.input.children[0],this.input.shui.inputField.focusIn.add(function(){e.previousFullscreenConf=e.game.fsConf.fullscreen,e.game.fsConf.fullscreen=p['default'].NONE,e.stopFullscreen()},this),this.input.shui.inputField.focusOut.add(function(){e.game.fsConf.fullscreen=e.previousFullscreenConf,e.playerName=e.inputText.value},this),null!==this.playerName&&this.inputText.setText(this.playerName),PhaserInput.onKeyboardOpen.add(function(){e.layout.position.y=.15*-e.game.height}),PhaserInput.onKeyboardClose.add(function(){e.layout.position.y=0});var o=this.layout.getElementById('buttonSound');o.onDownSound=this.sndClick,this.game.sound.mute&&o.useState('muted'),o.onInputUp.add(function(){'default'===o.getCurrentState()?(e.game.sound.mute=!0,o.useState('muted')):(e.game.sound.mute=!1,o.useState('default'))})}}()},{key:'update',value:function(){return function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'update',this).call(this);var e=this.game.time.elapsedMS/1e3;this.pollTime-=e,0>this.pollTime&&(this.tempName!==this.inputText.value&&(this.tempName=this.inputText.value,12<this.tempName.length&&(this.tempName=this.tempName.substring(0,12),this.inputText.setText(this.tempName))),this.pollTime=this.POLL_TIME)}}()},{key:'onContinueButtonDown',value:function(){return function(){this.submitting||''===this.playerName||null===this.playerName||(this.submitting=!0,this.storage.setItem('playerName',this.playerName+this.game.rnd.integerInRange(100,999)),this.startGameOverState())}}()},{key:'stopFullscreen',value:function(){return function(){if(p['default'].Util.isFullScreen())if(window.frameElement)try{window.parent.document[this.game.device.cancelFullscreen]()}catch(t){}else try{window.document[this.game.device.cancelFullscreen]()}catch(t){}}}()},{key:'startGameOverState',value:function(){return function(){this.game.state.start('gameOver',!0,!1,this.score,this.driver,this.collectedCurrency,this.currencyCounts,this.distance)}}()}]),t}(g['default']);t['default']=m},function(){var e={Project:'1.0.2',SheepCore:'0.11.4',SheepUi:'0.12.0'};'fsVersion'in window?Phaser.Utils.mixin(e,window.fsVersion):window.fsVersion=e}],[201]);